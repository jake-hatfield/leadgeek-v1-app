{"version":3,"sources":["components/features/alert/alertSlice.ts","utils/utils.ts","components/features/leads/leadsSlice.ts","components/features/auth/authSlice.ts","components/features/filters/filtersSlice.ts","components/features/users/usersSlice.ts","assets/images/svgs/eye-open.svg","store.ts","utils/authTokens.ts","utils/hooks.ts","components/utils/Button.tsx","components/layout/navigation/DefaultFooter.tsx","components/features/alert/Alert.tsx","components/features/alert/Alerts.tsx","components/layout/DefaultLayout.tsx","components/utils/FormField.tsx","components/auth/login/LoginImage.tsx","assets/images/svgs/eye-closed.svg","assets/images/svgs/leadgeek-logo-light.svg","components/utils/PasswordFormField.tsx","assets/images/svgs/check.svg","pages/Login.tsx","pages/ForgotPassword.tsx","components/utils/Spinner.tsx","pages/ResetPassword.tsx","components/layout/navigation/Navbar.tsx","components/layout/AuthLayout.tsx","components/features/filters/DatePicker.tsx","components/features/leads/Details.tsx","components/features/leads/ExportButton.tsx","components/utils/Select.tsx","components/features/filters/Filter.tsx","components/layout/navigation/SearchBar.tsx","components/layout/navigation/Header.tsx","components/features/leads/LeadRow.tsx","components/utils/NullState.tsx","components/features/leads/LeadTable.tsx","components/layout/navigation/Pagination.tsx","components/features/filters/Prep.tsx","components/features/leads/Leads.tsx","pages/Feed.tsx","pages/Liked.tsx","pages/Archived.tsx","pages/Search.tsx","assets/images/svgs/x.svg","pages/Admin.tsx","pages/Help.tsx","components/layout/navigation/SettingsNavbar.tsx","components/layout/SettingsLayout.tsx","pages/settings/Profile.tsx","components/auth/login/password/ResetPassword.jsx","pages/settings/Security.tsx","pages/settings/Billing.tsx","pages/settings/Affiliates.tsx","routes/PrivateRoute.tsx","routes/Routes.jsx","App.tsx","index.tsx"],"names":["initialState","leadsSlice","createSlice","name","reducers","removeAlert","state","action","filter","alert","id","payload","removeAllAlerts","setAlert","reducer","push","prepare","title","message","alertType","nanoid","actions","config","headers","capitalize","string","toUpperCase","slice","truncate","n","length","substr","numberWithCommas","toString","replace","returnDomainFromUrl","url","result","match","calculateBSR","currentRank","category","totalItems","includes","toFixed","openLinkHandler","retailerLink","amzLink","window","open","useOutsideMousedown","ref","setState_1","setState_2","useEffect","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","planCheckerByPrice","price","calcAffCommission","formatTimestamp","timestamp","showYear","isoTime","Date","toJSON","DateTime","fromISO","toFormat","calcNextPossiblePayoutDate","instance","dt","now","cache","Number","newDate","set","day","hour","minute","second","plus","months","calcNextPayoutDate","date","addComment","createAsyncThunk","options","a","dispatch","comment","userId","leadId","body","JSON","stringify","axios","post","data","comments","console","log","getAllLeads","role","dateCreated","getArchivedLeads","rejectWithValue","leads","page","itemLimit","getFeedLeads","user","_id","filters","getLikedLeads","getSearchResults","query","handleArchiveLead","res","status","handleLikeLead","feed","totalByIds","totalAllIds","pageByIds","pagination","hasNextPage","hasPreviousPage","nextPage","previousPage","lastPage","filteredItems","liked","archived","search","searchValue","currentLead","lastUpdated","setCurrentLead","clearCurrentLead","setLeadLoading","setPage","type","extraReducers","builder","addCase","fulfilled","archivedLeads","rejected","pending","likedLeads","newArchived","lead","newLiked","token","localStorage","getItem","isAuthenticated","validatedResetPwToken","authenticateUser","email","password","emailToLowerCase","toLowerCase","getUserData","_","get","surrogateUser","updatePassword","put","removeItem","validateResetPwToken","resetPwToken","authSlice","removeUserData","count","prep","unit","lb","dateLimits","min","max","selected","filtersSlice","clearFilter","clearFilters","clearPrepFilter","createFilter","operator","value","newFilter","index","findIndex","setDateLimit","setItemLimit","setItem","setPrepFilter","usersSlice","allUsers","loading","userSettings","billing","plan","created","cancelAt","cancelAtPeriod","currentPeriodEnd","amount","paymentHistory","payments","affiliates","paypalEmail","_path","_path2","store","configureStore","alertReducer","auth","authReducer","filterReducer","leadsReducer","users","usersReducer","middleware","getDefaultMiddleware","serializableCheck","setResetPwToken","defaults","common","setAuthToken","useAppDispatch","useDispatch","useAppSelector","useSelector","Button","text","onClick","width","margin","size","cta","path","conditional","conditionalDisplay","className","xmlns","viewBox","fill","DefaultFooter","getFullYear","alertIcons","fillRule","d","clipRule","Alert","setTimeout","key","foundIcon","find","alertIcon","setIcon","Alerts","alerts","map","i","DefaultLayout","children","FormField","label","placeholder","onChange","required","styles","htmlFor","LoginImage","style","backgroundImage","backgroundRepeat","backgroundSize","position","_extends","Object","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgEyeOpen","_ref","svgRef","titleId","props","ForwardRef","SvgEyeClosed","_defs","_rect","_rect2","_path3","_path4","_path5","PasswordFormField","useState","passwordShown","setPasswordShown","SvgLeadgeekLogoLight","x","y","height","rx","transform","classes","wrapper","border","content","contentHeader","logoLg","logoSm","card","signup","subheaderLink","Login","formData","setFormData","onSubmit","preventDefault","meta","requestStatus","to","href","ForgotPassword","forgotPassword","errorMsg","response","exact","Spinner","divWidth","center","spinnerWidth","use","Oval","strokeWidth","strokeColor","duration","ResetPasswordPage","NavbarLink","link","hover","setHover","v-for","onMouseEnter","onMouseLeave","navLinks","primaryLinks","secondaryLinks","adminLinks","dropdownItems","Navbar","userDropdown","setUserDropdown","wrapperRef","useRef","keyPress","useCallback","aria-label","split","item","AuthLayout","DatePicker","setDate","mostRecentDay","previousDay","minusBusiness","days","lastFiveStart","lastFourteenStart","last30Start","lastDay","dateOptions","startOf","dateString","toISODate","endOf","toISO","validateDateRange","minDate","dateOption","cb","validDate","handleSetDate","HeaderButton","activePath","disabledPath","description","last","stroke","PrimaryMetric","Note","nullState","rel","Details","showDetails","setShowDetails","unitFee","lbFee","setComment","copiedText","setCopiedText","copyText","setCopyText","fullTitle","toggleFullTitle","identifyingText","setIdentifyingText","noteCount","setNoteCount","overviewActive","setOverviewActive","overflow","modalRef","some","like","setLike","archive","setArchive","hasComment","primaryButtons","strokeLinecap","strokeLinejoin","primaryMetrics","netProfit","weight","buyPrice","monthlySales","notes","promo","cashback","variations","shipping","note","asin","startsWith","descriptorClasses","linkClasses","closeModal","button","ReactImageMagnify","smallImage","alt","isFluidWidth","src","img","largeImage","enlargedImageContainerDimensions","enlargedImageContainerClassName","brand","metric","navigator","clipboard","writeText","sellPrice","competitorCount","competitorType","bsrCurrent","ExportButton","setExportLeads","currentLocalDate","setLocale","toLocaleString","filename","SelectComponent","selectedOption","openState","setOpenState","handleClick","aria-haspopup","aria-expanded","aria-labelledby","aria-hidden","tabIndex","aria-activedescendant","option","aria-selected","ActiveFilter","filterDescription","setFilterDescription","valueProcessor","valuePostproccesor","typeOptions","numericValueOptions","textValueOptions","categoryOptions","FilterComponent","filterActive","setFilterActive","addFilter","setAddFilter","categoryActive","setCategoryActive","typeIs","valueIs","setFilter","typeActive","setTypeActive","valueActive","setValueActive","stopPropagation","Select","getFilterValue","maxFilter","minFilter","handleFilterSubmit","forEach","SearchBar","onSearchChange","handleSearchSubmit","method","Header","searchActive","location","useLocation","redirectToSearch","setRedirectToSearch","setQuery","pathname","newSearch","svgList","heart","image","competition","dots","eye","LeadRow","expandedView","setExpandedView","eyeDesc","setEyeDesc","linkDesc","setLinkDesc","rowHover","setRowHover","titleHover","setTitleHover","quickView","setQuickView","viewCompetition","setViewCompetition","viewImage","setViewImage","l","datePosted","viewDetailsHandler","favoriteHandler","prev","rowWrapper","likeCellWrapper","likeCellButton","likeCellActive","likeCellNull","titleCellWrapper","detailsCellWrapper","detailsCellSvg","detailsCellButton","detailsCellImageWrapper","detailsCellImage","competitionWrapper","competitionRow","profitCellWrapper","quickViewCellWrapper","quickViewWrapper","quickViewMenu","quickViewExpandedWrapper","eyeIconWrapper","linkIconWrapper","quickViewMenuHover","quickViewNull","expandedViewWrapper","expandedViewMenuTop","expandedViewMenuBottom","expandedViewMenuSvg","expandedViewMenuButton","expandedViewMenuButtonSvg","defaultCellWrapper","defaultSvg","valueIndicator","archiveHandler","nullStateClasses","nullStateWrapper","svgWrapper","svg","NullState","header","linkText","reload","tableWrapper","table","tableHeadWrapper","tableHead","tableHeadCell","tableBody","LeadTable","currentSearchParam","PaginationComponent","padding","selectValue","setSelectValue","filteredMessage","setFilteredMessage","itemsFrom","itemsTo","currentTarget","Prep","setPrep","checked","calendar","export","leadsWrapper","navWrapper","nav","navLink","navLinkActive","navLinkCounter","navToolsWrapper","Leads","headerTitle","authStatus","leadStatus","exportLeads","filterCount","dateSelected","tools","handleExport","error","activeClassName","tool","Filter","Pagination","Feed","LikedPage","Archived","Search","SvgCheck","SvgX","AdminItem","additionalFunction","buttonText","popupHeading","popupContent","popup","setPopup","UserTable","usersState","usersLimit","setUsersState","getAllUsers","subscription","subIds","active","cusId","Admin","handleExportLeads","adminItems","buttonPath","HelpItem","color","external","Help","currentTime","setCurrentTime","DATETIME_MED","helpItems","new","SettingsNavbar","SettingsLayout","pill","initials","setInitials","userInitials","ProfilePage","connect","ownProps","fullWidthButton","password_1","password_2","lengthValidated","setLengthValidated","emailValidated","setEmailValidated","commonPasswordValidated","setCommonPasswordValidated","checkSyles","xStyles","securityMeasureBullets","terriblePasswords","emailBeforeAt","handleUpdatePassword","bullet","minLength","Dashboard","payment","affiliate","BillingPage","billingState","setBillingState","validBilling","getSuccessfulPayments","paymentMethodBrand","invoice","pdf","currency","paymentMethod","last4","BasicInformationItem","isInteractable","t","tooltip","setTooltip","CodeItem","code","AffiliatesPage","affiliateState","setAffiliateState","changePaypal","setChangePaypal","referrals","referrer","isReferrer","isAffiliate","lastPayout","lgid","modal","setModal","nextPayout","paymentStatus","clients","calcCommissionTotal","total","reduce","b","basicInformationItems","eligiblePayments","calcAffPayout","codeItems","newString","truncateAndObfuscate","codeItem","PrivateRoute","Component","component","rest","render","Routes","ResetPassword","Liked","Profile","Security","Billing","Affiliates","App","stripePromise","loadStripe","process","stripe","TagManager","initialize","gtmId","ReactDOM","getElementById"],"mappings":"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EACA,kBAAC,GAAD,CAAOnc,UAAWyc,IAElB,kBAAC,GAAD,CAAGzc,UAAW0c,KAIjBzX,QAAS,6BAEV,CACCmR,IACC,8BACEiG,EACA,kBAAC,GAAD,CAAOrc,UAAWyc,IAElB,kBAAC,GAAD,CAAGzc,UAAW0c,KAIjBzX,QAAQ,kFAET,CACCmR,IACC,8BACEmG,EACA,kBAAC,GAAD,CAAOvc,UAAWyc,IAElB,kBAAC,GAAD,CAAGzc,UAAW0c,KAIjBzX,QACC,wDACyB,IACxB,uBACCe,KAAK,2HACL/R,OAAO,SACPqW,IAAI,sBACJtK,UAAU,QAJX,+BAYE0B,EAAW,SAAC5N,GACjB4R,EAAY,6BAAKD,GAAN,mBAAiB3R,EAAEG,OAAOxD,KAAOqD,EAAEG,OAAOwI,UArIjD,EA8OuB4H,mBAvGP,CACpB,SACA,WACA,WACA,SACA,YACA,QACA,OACA,SACA,UACA,SACA,SACA,WACA,SACA,WACA,SACA,UACA,SACA,SACA,SACA,SACA,aACA,SACA,UACA,aACA,UACA,SACA,QACA,WACA,WACA,UACA,UACA,SACA,SACA,SACA,SACA,SACA,WACA,SACA,WACA,UACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,WACA,WACA,SACA,OACA,UACA,SACA,SACA,SACA,SACA,SACA,WACA,UACA,SACA,SACA,UACA,WACA,WACA,UACA,SACA,OACA,SACA,SACA,WACA,SACA,UACA,SACA,OACA,OACA,SACA,SACA,SACA,SACA,WACA,SACA,SACA,SACA,SACA,OACA,SACA,OACA,SACA,UACA,SACA,UACA,SACA,UACA,YACA,SACA,SACA,UACA,SACA,SACA,cAEMuY,EA9OF,qBA+OLhpB,qBAAU,WACT,GAAIqoB,GAAcC,EAAY,CAC7BM,GAA2B,GAC3B,IAIIK,EAA+BjiB,EAHTwN,MAAM,KACZ,GA+BpB,GA5BI6T,EAAW7pB,QAAU,GAAK8pB,EAAW9pB,QAAU,GAClDgqB,GAAmB,GAElBH,EAAWhpB,SAAS4pB,IACpBX,EAAWjpB,SAAS4pB,IAEpBP,GAAkB,GAClBnrB,EACC,u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","file":"static/js/main.c8024d62.chunk.js","sourcesContent":["import { createSlice, nanoid, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport { Alert } from '@utils/interfaces/Alert';\r\n\r\nconst initialState: Alert[] = [];\r\n\r\nexport const leadsSlice = createSlice({\r\n\tname: 'alert',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tremoveAlert: (state, action: PayloadAction<string>) => {\r\n\t\t\treturn state.filter((alert) => alert.id !== action.payload);\r\n\t\t},\r\n\t\tremoveAllAlerts: () => {\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t\tsetAlert: {\r\n\t\t\treducer: (state, action: PayloadAction<Alert>) => {\r\n\t\t\t\tstate.push(action.payload);\r\n\t\t\t},\r\n\t\t\tprepare: (alert: {\r\n\t\t\t\ttitle: string;\r\n\t\t\t\tmessage: string;\r\n\t\t\t\talertType: 'success' | 'warning' | 'danger';\r\n\t\t\t}) => {\r\n\t\t\t\tconst { title, message, alertType } = alert;\r\n\t\t\t\tconst id = nanoid();\r\n\t\t\t\treturn { payload: { id, title, message, alertType } };\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\t// extraReducers: (builder) => {\r\n\t// \tbuilder.addCase(authenticateUser.fulfilled, (state) => {\r\n\t// \t\tstate = initialState;\r\n\t// \t});\r\n\t// },\r\n});\r\n\r\nexport const { removeAlert, removeAllAlerts, setAlert } = leadsSlice.actions;\r\n\r\nexport default leadsSlice.reducer;\r\n","import React, { RefObject, useEffect } from 'react';\r\n\r\nimport { DateTime } from 'luxon';\r\n\r\nexport const config = {\r\n\theaders: {\r\n\t\t'Content-Type': 'application/json',\r\n\t},\r\n};\r\n\r\nexport const capitalize = (string: string) => {\r\n\treturn string[0].toUpperCase() + string.slice(1);\r\n};\r\n\r\nexport const truncate = (string: string, n: number) => {\r\n\treturn string.length > n ? string.substr(0, n - 1) + '...' : string;\r\n};\r\n\r\nexport const truncateAndObfuscate = (string: string, n: number) => {\r\n\tconst newString = string.slice(3);\r\n\treturn newString.length > n ? newString.substr(0, n - 1) + 'xxxx' : string;\r\n};\r\n\r\nexport const numberWithCommas = (n: number) => {\r\n\treturn n.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n};\r\n\r\nexport const arrayLengthChecker = (array: []): string | number => {\r\n\treturn array.length > 99 ? '99+' : array.length;\r\n};\r\n\r\nexport const returnDomainFromUrl = (url: string) => {\r\n\tlet result, match;\r\n\tif (\r\n\t\t(match = url.match(\r\n\t\t\t/^(?:https?:\\/\\/)?(?:[^@\\n]+@)?(?:www\\.)?([^:\\/\\n\\?\\=]+)/im\r\n\t\t))\r\n\t) {\r\n\t\tresult = match[1];\r\n\t\tif ((match = result.match(/^[^\\.]+\\.(.+\\..+)$/))) {\r\n\t\t\tresult = match[1];\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n};\r\n\r\n// bsr / category % calculator\r\nexport const calculateBSR = (\r\n\tcurrentRank: number,\r\n\tcategory: string\r\n): string | number => {\r\n\tlet totalItems: number;\r\n\tif (category === 'Appliances') {\r\n\t\ttotalItems = 616462;\r\n\t} else if (category.includes('Arts')) {\r\n\t\ttotalItems = 7498354;\r\n\t} else if (category === 'Automotive') {\r\n\t\ttotalItems = 22271330;\r\n\t} else if (category.includes('Baby')) {\r\n\t\ttotalItems = 2969134;\r\n\t} else if (category.includes('Beauty')) {\r\n\t\ttotalItems = 8918802;\r\n\t} else if (category === 'Books') {\r\n\t\ttotalItems = 63513871;\r\n\t} else if (category.includes('CDs')) {\r\n\t\ttotalItems = 5768853;\r\n\t} else if (category.includes('Phone')) {\r\n\t\ttotalItems = 23560255;\r\n\t} else if (category.includes('Clothing')) {\r\n\t\ttotalItems = 115990329;\r\n\t} else if (category.includes('Collectibles')) {\r\n\t\ttotalItems = 5319325;\r\n\t} else if (category.includes('Electronics')) {\r\n\t\ttotalItems = 13436282;\r\n\t} else if (category.includes('Grocery')) {\r\n\t\ttotalItems = 2871202;\r\n\t} else if (category.includes('Handmade')) {\r\n\t\ttotalItems = 1515790;\r\n\t} else if (category.includes('Health')) {\r\n\t\ttotalItems = 7528676;\r\n\t} else if (category.includes('Home')) {\r\n\t\ttotalItems = 59108947;\r\n\t} else if (category.includes('Industrial')) {\r\n\t\ttotalItems = 9915828;\r\n\t} else if (category.includes('Dining')) {\r\n\t\ttotalItems = 59108947;\r\n\t} else if (category.includes('Movies')) {\r\n\t\ttotalItems = 3426934;\r\n\t} else if (category.includes('Musical')) {\r\n\t\ttotalItems = 1455860;\r\n\t} else if (category.includes('Office')) {\r\n\t\ttotalItems = 7746679;\r\n\t} else if (category.includes('Patio')) {\r\n\t\ttotalItems = 8107431;\r\n\t} else if (category.includes('Pet')) {\r\n\t\ttotalItems = 4996454;\r\n\t} else if (category.includes('Software')) {\r\n\t\ttotalItems = 160164;\r\n\t} else if (category.includes('Sports')) {\r\n\t\ttotalItems = 29519885;\r\n\t} else if (category.includes('Tools')) {\r\n\t\ttotalItems = 17564272;\r\n\t} else if (category.includes('Toys')) {\r\n\t\ttotalItems = 8933993;\r\n\t} else if (category === 'Video Games') {\r\n\t\ttotalItems = 730691;\r\n\t}\r\n\tif (!totalItems!) {\r\n\t\treturn '-';\r\n\t} else {\r\n\t\treturn ((currentRank / totalItems) * 100).toFixed(3);\r\n\t}\r\n};\r\n\r\nexport const openLinkHandler = (retailerLink: string, amzLink: string) => {\r\n\twindow.open(retailerLink);\r\n\twindow.open(amzLink);\r\n};\r\n\r\nexport const useOutsideMousedown = (\r\n\tref: RefObject<HTMLElement>,\r\n\tsetState_1: React.Dispatch<boolean>,\r\n\tsetState_2: React.Dispatch<boolean> | null\r\n) => {\r\n\tuseEffect(() => {\r\n\t\tconst handleClickOutside = (e: any) => {\r\n\t\t\tif (ref.current && !ref.current.contains(e.target as Node)) {\r\n\t\t\t\tsetState_1(false);\r\n\t\t\t\tif (setState_2) {\r\n\t\t\t\t\tsetState_2(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t}, [ref, setState_1, setState_2]);\r\n};\r\n\r\nexport const useOutsideMouseup = (\r\n\tref: RefObject<HTMLElement>,\r\n\tsetState_1: React.Dispatch<boolean>,\r\n\tsetState_2: React.Dispatch<boolean> | null\r\n) => {\r\n\tuseEffect(() => {\r\n\t\tfunction handleClickOutside(e: any) {\r\n\t\t\tif (ref.current && !ref.current.contains(e.target)) {\r\n\t\t\t\tsetState_1(false);\r\n\t\t\t\tif (setState_2) {\r\n\t\t\t\t\tsetState_2(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.addEventListener('mouseup', handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener('mouseup', handleClickOutside);\r\n\t\t};\r\n\t}, [ref, setState_1, setState_2]);\r\n};\r\n\r\nexport const planCheckerByPrice = (price: number) => {\r\n\tlet plan;\r\n\tif (price === 12900) {\r\n\t\tplan = 'Grow';\r\n\t} else if (price === 18900) {\r\n\t\tplan = 'Pro';\r\n\t} else if (price === 26300) {\r\n\t\tplan = 'Bundle';\r\n\t} else {\r\n\t\tplan = 'Leadgeek';\r\n\t}\r\n\treturn plan;\r\n};\r\n\r\nexport const calcAffCommission = (price: number) => {\r\n\treturn (price * 0.25) / 100;\r\n};\r\n\r\nexport const formatTimestamp = (timestamp: number, showYear: boolean) => {\r\n\tconst isoTime = new Date(timestamp * 1000).toJSON();\r\n\tif (showYear) {\r\n\t\treturn DateTime.fromISO(isoTime).toFormat('LLL dd, yyyy');\r\n\t} else {\r\n\t\treturn DateTime.fromISO(isoTime).toFormat('LLLL dd');\r\n\t}\r\n};\r\n\r\nexport const calcNextPossiblePayoutDate = (instance: number) => {\r\n\tlet dt = DateTime.now();\r\n\tlet cache = Number(dt.toFormat('dd'));\r\n\r\n\tlet newDate = dt.set({ day: 15, hour: 23, minute: 59, second: 59 });\r\n\tif (cache >= 15) {\r\n\t\tif (instance === 1) {\r\n\t\t\treturn newDate.plus({ months: 1 });\r\n\t\t} else {\r\n\t\t\treturn newDate.plus({ months: -1 });\r\n\t\t}\r\n\t} else {\r\n\t\treturn newDate;\r\n\t}\r\n};\r\n\r\nexport const calcNextPayoutDate = (date: number) => {\r\n\tconst isoTime = new Date(date * 1000).toJSON();\r\n\tlet dt = DateTime.fromISO(isoTime).plus({ months: 2 });\r\n\tlet cache = Number(dt.toFormat('dd'));\r\n\tlet newDate = dt.set({ hour: 23, minute: 59, second: 59 });\r\n\tif (cache >= 15) {\r\n\t\treturn newDate.set({ day: 15 }).plus({ months: 1 });\r\n\t} else {\r\n\t\treturn newDate.set({ day: 15 });\r\n\t}\r\n};\r\n","import axios from 'axios';\r\n\r\nimport { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\n\r\nimport { FilterState } from '@utils/interfaces/Filter';\r\nimport { Lead } from '@utils/interfaces/leads/Lead';\r\nimport { Pagination } from '@utils/interfaces/leads/Pagination';\r\nimport { config, truncate } from '@utils/utils';\r\n\r\nexport const addComment = createAsyncThunk(\r\n\t'leads/addComment',\r\n\tasync (\r\n\t\toptions: { comment: string; userId: string; leadId: string },\r\n\t\t{ dispatch }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\tconst { comment, userId, leadId } = options;\r\n\t\t\tconst body = JSON.stringify({ comment, userId, leadId });\r\n\t\t\tconst { data } = await axios.post('/api/leads/add-comment', body, config);\r\n\t\t\tif (data.message === 'Comment was added') {\r\n\t\t\t\treturn data.comments;\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Something went wrong',\r\n\t\t\t\t\t\tmessage: \"Your comment couldn't be added right now\",\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const getAllLeads = createAsyncThunk(\r\n\t'leads/getAllLeads',\r\n\tasync (options: { role: string; dateCreated: string }, { dispatch }) => {\r\n\t\tconst { role, dateCreated } = options;\r\n\t\tconst body = JSON.stringify({\r\n\t\t\trole,\r\n\t\t\tdateCreated,\r\n\t\t});\r\n\t\tconst { data } = await axios.post('/api/leads/all', body, config);\r\n\t\treturn data;\r\n\t}\r\n);\r\n\r\nexport const getArchivedLeads = createAsyncThunk(\r\n\t'leads/getArchivedLeads',\r\n\tasync (\r\n\t\toptions: { leads: Lead[]; page: number; itemLimit: number },\r\n\t\t{ rejectWithValue }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\tconst { leads, page, itemLimit } = options;\r\n\t\t\tconst body = JSON.stringify({ leads, page, itemLimit });\r\n\t\t\tconst { data } = await axios.post('/api/leads/archived', body, config);\r\n\t\t\treturn data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const getFeedLeads = createAsyncThunk(\r\n\t'leads/getFeedLeads',\r\n\tasync (\r\n\t\toptions: {\r\n\t\t\tuser: {\r\n\t\t\t\tid: string;\r\n\t\t\t\trole: string;\r\n\t\t\t};\r\n\t\t\tpage: number;\r\n\t\t\tfilters: FilterState;\r\n\t\t},\r\n\t\t{ rejectWithValue }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\tconst { id, role } = options.user;\r\n\t\t\tconst body = JSON.stringify({\r\n\t\t\t\t_id: id,\r\n\t\t\t\trole,\r\n\t\t\t\tpage: options.page,\r\n\t\t\t\tfilters: options.filters,\r\n\t\t\t});\r\n\t\t\tconst { data } = await axios.post('/api/leads', body, config);\r\n\t\t\tif (data.message === 'There are no leads to show') {\r\n\t\t\t} else {\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const getLikedLeads = createAsyncThunk(\r\n\t'leads/getLikedLeads',\r\n\tasync (\r\n\t\toptions: { leads: Lead[]; page: number; itemLimit: number },\r\n\t\t{ rejectWithValue }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\tconst { leads, page, itemLimit } = options;\r\n\t\t\tconst body = JSON.stringify({ leads, page, itemLimit });\r\n\t\t\tconst { data } = await axios.post('/api/leads/liked', body, config);\r\n\t\t\tconsole.log(data);\r\n\t\t\treturn data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const getSearchResults = createAsyncThunk(\r\n\t'leads/getSearchResults',\r\n\tasync (\r\n\t\toptions: {\r\n\t\t\tquery: string;\r\n\t\t\trole: string;\r\n\t\t\tdateCreated: string;\r\n\t\t\tpage: number;\r\n\t\t\tnewSearch: boolean;\r\n\t\t\titemLimit: number;\r\n\t\t},\r\n\t\t{ dispatch }\r\n\t) => {\r\n\t\tconst { query, role, dateCreated, page, itemLimit } = options;\r\n\r\n\t\tconst body = JSON.stringify({\r\n\t\t\tquery,\r\n\t\t\trole,\r\n\t\t\tdateCreated,\r\n\t\t\tpage,\r\n\t\t\titemLimit,\r\n\t\t});\r\n\t\tconst { data } = await axios.post('/api/search', body, config);\r\n\t\treturn {\r\n\t\t\tdata,\r\n\t\t\tquery,\r\n\t\t};\r\n\t}\r\n);\r\n\r\nexport const handleArchiveLead = createAsyncThunk(\r\n\t'leads/handleArchiveLead',\r\n\tasync (\r\n\t\toptions: {\r\n\t\t\tuserId: string;\r\n\t\t\tleadId: string;\r\n\t\t},\r\n\t\t{ dispatch }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\tconst { userId, leadId } = options;\r\n\t\t\tconst body = JSON.stringify({ userId, leadId });\r\n\t\t\tconst res = await axios.post(\r\n\t\t\t\t'/api/leads/handle-archive-lead',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst { message, leads, title } = res.data;\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: truncate(title, 50),\r\n\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleadId,\r\n\t\t\t\t\tleads,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const handleLikeLead = createAsyncThunk(\r\n\t'leads/handleLikeLead',\r\n\tasync (\r\n\t\toptions: {\r\n\t\t\tuserId: string;\r\n\t\t\tleadId: string;\r\n\t\t},\r\n\t\t{ dispatch }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\tconst { userId, leadId } = options;\r\n\t\t\tconst body = JSON.stringify({ userId, leadId });\r\n\t\t\tconst res = await axios.post('/api/leads/handle-like-lead', body, config);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst { message, leads, title } = res.data;\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: truncate(title, 50),\r\n\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleadId,\r\n\t\t\t\t\tleads,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\ninterface LeadState {\r\n\ttotalByIds: Lead[];\r\n\ttotalAllIds: string[];\r\n\tpageByIds: Lead[];\r\n\tpagination: Pagination;\r\n}\r\n\r\ninterface LeadsState {\r\n\tstatus: 'idle' | 'loading' | 'failed';\r\n\tfeed: LeadState;\r\n\tliked: LeadState;\r\n\tarchived: LeadState;\r\n\tsearch: {\r\n\t\ttotalByIds: Lead[];\r\n\t\ttotalAllIds: string[];\r\n\t\tpageByIds: Lead[];\r\n\t\tpagination: Pagination;\r\n\t\tsearchValue: string | null;\r\n\t};\r\n\tcurrentLead: Lead | null;\r\n\tlastUpdated: string | null;\r\n}\r\n\r\nconst initialState: LeadsState = {\r\n\tstatus: 'loading',\r\n\tfeed: {\r\n\t\ttotalByIds: [],\r\n\t\ttotalAllIds: [],\r\n\t\tpageByIds: [],\r\n\t\tpagination: {\r\n\t\t\tpage: 1,\r\n\t\t\thasNextPage: null,\r\n\t\t\thasPreviousPage: false,\r\n\t\t\tnextPage: null,\r\n\t\t\tpreviousPage: null,\r\n\t\t\tlastPage: null,\r\n\t\t\ttotalItems: null,\r\n\t\t\tfilteredItems: null,\r\n\t\t},\r\n\t},\r\n\tliked: {\r\n\t\ttotalByIds: [],\r\n\t\ttotalAllIds: [],\r\n\t\tpageByIds: [],\r\n\t\tpagination: {\r\n\t\t\tpage: 1,\r\n\t\t\thasNextPage: null,\r\n\t\t\thasPreviousPage: false,\r\n\t\t\tnextPage: null,\r\n\t\t\tpreviousPage: null,\r\n\t\t\tlastPage: null,\r\n\t\t\ttotalItems: null,\r\n\t\t\tfilteredItems: null,\r\n\t\t},\r\n\t},\r\n\tarchived: {\r\n\t\ttotalByIds: [],\r\n\t\ttotalAllIds: [],\r\n\t\tpageByIds: [],\r\n\t\tpagination: {\r\n\t\t\tpage: 1,\r\n\t\t\thasNextPage: null,\r\n\t\t\thasPreviousPage: false,\r\n\t\t\tnextPage: null,\r\n\t\t\tpreviousPage: null,\r\n\t\t\tlastPage: null,\r\n\t\t\ttotalItems: null,\r\n\t\t\tfilteredItems: null,\r\n\t\t},\r\n\t},\r\n\tsearch: {\r\n\t\ttotalByIds: [],\r\n\t\ttotalAllIds: [],\r\n\t\tpageByIds: [],\r\n\t\tpagination: {\r\n\t\t\tpage: 1,\r\n\t\t\thasNextPage: null,\r\n\t\t\thasPreviousPage: false,\r\n\t\t\tnextPage: null,\r\n\t\t\tpreviousPage: null,\r\n\t\t\tlastPage: null,\r\n\t\t\ttotalItems: null,\r\n\t\t\tfilteredItems: null,\r\n\t\t},\r\n\t\tsearchValue: null,\r\n\t},\r\n\tcurrentLead: null,\r\n\tlastUpdated: null,\r\n};\r\n\r\nexport const leadsSlice = createSlice({\r\n\tname: 'leads',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tsetCurrentLead: (state, action: PayloadAction<Lead>) => {\r\n\t\t\tstate.currentLead = action.payload;\r\n\t\t},\r\n\t\tclearCurrentLead: (state) => {\r\n\t\t\tstate.currentLead = null;\r\n\t\t},\r\n\t\tsetLeadLoading: (state) => {\r\n\t\t\tstate.status = 'loading';\r\n\t\t},\r\n\t\tsetPage: (state, action: PayloadAction<{ page: number; type: string }>) => {\r\n\t\t\tconst { page, type } = action.payload;\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'feed':\r\n\t\t\t\t\tstate.feed.pagination.page = page;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'liked':\r\n\t\t\t\t\tstate.liked.pagination.page = page;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'archived':\r\n\t\t\t\t\tstate.archived.pagination.page = page;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'search':\r\n\t\t\t\t\tstate.archived.pagination.page = page;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\textraReducers: (builder) => {\r\n\t\tbuilder\r\n\t\t\t.addCase(getAllLeads.fulfilled, (state, action) => {\r\n\t\t\t\tstate.feed.totalByIds = action.payload.feed;\r\n\t\t\t})\r\n\t\t\t.addCase(getArchivedLeads.fulfilled, (state, action) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tarchivedLeads,\r\n\t\t\t\t\tpage,\r\n\t\t\t\t\thasNextPage,\r\n\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\tnextPage,\r\n\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\ttotalItems,\r\n\t\t\t\t} = action.payload;\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.archived.pageByIds = archivedLeads;\r\n\t\t\t\tstate.archived.pagination.page = page;\r\n\t\t\t\tstate.archived.pagination.hasNextPage = hasNextPage;\r\n\t\t\t\tstate.archived.pagination.hasPreviousPage = hasPreviousPage;\r\n\t\t\t\tstate.archived.pagination.nextPage = nextPage;\r\n\t\t\t\tstate.archived.pagination.previousPage = previousPage;\r\n\t\t\t\tstate.archived.pagination.totalItems = totalItems;\r\n\t\t\t})\r\n\t\t\t.addCase(getArchivedLeads.rejected, (state) => {\r\n\t\t\t\tstate.status = 'failed';\r\n\t\t\t})\r\n\t\t\t.addCase(getFeedLeads.pending, (state) => {\r\n\t\t\t\tstate.status = 'loading';\r\n\t\t\t})\r\n\t\t\t.addCase(getFeedLeads.fulfilled, (state, action) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tfeed,\r\n\t\t\t\t\tpage,\r\n\t\t\t\t\thasNextPage,\r\n\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\tnextPage,\r\n\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\ttotalItems,\r\n\t\t\t\t\tfilteredItems,\r\n\t\t\t\t\tlastUpdated,\r\n\t\t\t\t} = action.payload;\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.feed.pageByIds = feed;\r\n\t\t\t\tstate.feed.pagination.page = page;\r\n\t\t\t\tstate.feed.pagination.hasNextPage = hasNextPage;\r\n\t\t\t\tstate.feed.pagination.hasPreviousPage = hasPreviousPage;\r\n\t\t\t\tstate.feed.pagination.nextPage = nextPage;\r\n\t\t\t\tstate.feed.pagination.previousPage = previousPage;\r\n\t\t\t\tstate.feed.pagination.totalItems = totalItems;\r\n\t\t\t\tstate.feed.pagination.filteredItems = filteredItems;\r\n\t\t\t\tstate.lastUpdated = lastUpdated;\r\n\t\t\t})\r\n\t\t\t.addCase(getFeedLeads.rejected, (state) => {\r\n\t\t\t\tstate.status = 'failed';\r\n\t\t\t})\r\n\t\t\t.addCase(getLikedLeads.fulfilled, (state, action) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tlikedLeads,\r\n\t\t\t\t\tpage,\r\n\t\t\t\t\thasNextPage,\r\n\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\tnextPage,\r\n\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\ttotalItems,\r\n\t\t\t\t} = action.payload;\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.liked.pageByIds = likedLeads;\r\n\t\t\t\tstate.liked.pagination.page = page;\r\n\t\t\t\tstate.liked.pagination.hasNextPage = hasNextPage;\r\n\t\t\t\tstate.liked.pagination.hasPreviousPage = hasPreviousPage;\r\n\t\t\t\tstate.liked.pagination.nextPage = nextPage;\r\n\t\t\t\tstate.liked.pagination.previousPage = previousPage;\r\n\t\t\t\tstate.liked.pagination.totalItems = totalItems;\r\n\t\t\t})\r\n\t\t\t.addCase(getLikedLeads.rejected, (state) => {\r\n\t\t\t\tstate.status = 'failed';\r\n\t\t\t})\r\n\t\t\t.addCase(getSearchResults.pending, (state) => {\r\n\t\t\t\tstate.status = 'loading';\r\n\t\t\t})\r\n\t\t\t.addCase(getSearchResults.fulfilled, (state, action) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tleads,\r\n\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\thasNextPage,\r\n\t\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\t\tnextPage,\r\n\t\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\t\ttotalItems,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tquery,\r\n\t\t\t\t} = action.payload;\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.search.pageByIds = leads;\r\n\t\t\t\tstate.search.pagination.page = page;\r\n\t\t\t\tstate.search.pagination.page = page;\r\n\t\t\t\tstate.search.pagination.hasNextPage = hasNextPage;\r\n\t\t\t\tstate.search.pagination.hasPreviousPage = hasPreviousPage;\r\n\t\t\t\tstate.search.pagination.nextPage = nextPage;\r\n\t\t\t\tstate.search.pagination.previousPage = previousPage;\r\n\t\t\t\tstate.search.pagination.totalItems = totalItems;\r\n\t\t\t\tstate.search.searchValue = query;\r\n\t\t\t})\r\n\t\t\t.addCase(handleArchiveLead.fulfilled, (state, action) => {\r\n\t\t\t\tconst newArchived = state.archived.pageByIds.filter(\r\n\t\t\t\t\t(lead) => lead._id !== action.payload?.leadId\r\n\t\t\t\t);\r\n\t\t\t\tstate.archived.pageByIds = newArchived;\r\n\t\t\t})\r\n\t\t\t.addCase(handleLikeLead.fulfilled, (state, action) => {\r\n\t\t\t\tconst newLiked = state.liked.pageByIds.filter(\r\n\t\t\t\t\t(lead) => lead._id !== action.payload?.leadId\r\n\t\t\t\t);\r\n\t\t\t\tstate.liked.pageByIds = newLiked;\r\n\t\t\t});\r\n\t},\r\n});\r\n\r\nexport const { setCurrentLead, clearCurrentLead, setLeadLoading, setPage } =\r\n\tleadsSlice.actions;\r\n\r\nexport default leadsSlice.reducer;\r\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\n// packages\r\nimport axios from 'axios';\r\n\r\n// redux\r\nimport { setAlert } from '@features/alert/alertSlice';\r\nimport {\r\n\taddComment,\r\n\thandleArchiveLead,\r\n\thandleLikeLead,\r\n} from '@features/leads/leadsSlice';\r\n\r\n// utils\r\nimport { config } from '@utils/utils';\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ninterface AuthState {\r\n\tstatus: 'idle' | 'loading' | 'failed';\r\n\ttoken: string | null;\r\n\tisAuthenticated: boolean;\r\n\tuser: User | null;\r\n\tvalidatedResetPwToken: boolean;\r\n}\r\n\r\nconst initialState: AuthState = {\r\n\tstatus: 'loading',\r\n\ttoken: localStorage.getItem('token'),\r\n\tisAuthenticated: false,\r\n\tuser: null,\r\n\tvalidatedResetPwToken: false,\r\n};\r\n\r\nexport const authenticateUser = createAsyncThunk(\r\n\t'auth/authenticateUser',\r\n\tasync (\r\n\t\toptions: { email: string; password: string },\r\n\t\t{ dispatch, rejectWithValue }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\tconst { email, password } = options;\r\n\t\t\tconst emailToLowerCase = email.toLowerCase();\r\n\t\t\tconst body = JSON.stringify({ email: emailToLowerCase, password });\r\n\t\t\tconst res = await axios.post('/api/auth', body, config);\r\n\t\t\tif (res.data.token) {\r\n\t\t\t\treturn res.data.token;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Login error',\r\n\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\"Email & password combination aren't correct. Please try again or reset your password.\",\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const getUserData = createAsyncThunk(\r\n\t'auth/getUserData',\r\n\tasync (_, { rejectWithValue }) => {\r\n\t\ttry {\r\n\t\t\tconst res = await axios.get('/api/auth');\r\n\t\t\treturn res.data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\n// export const login = createAsyncThunk(\r\n// \t'auth/login',\r\n// \tasync (options: { email: string; password: string }, { dispatch }) => {\r\n// \t\ttry {\r\n// \t\t\tconst { email, password } = options;\r\n\r\n// \t\t\tconst emailToLowerCase = email.toLowerCase();\r\n// \t\t\tconst body = JSON.stringify({ email: emailToLowerCase, password });\r\n// \t\t\tconst res = await axios.post('/api/auth', body, config);\r\n// \t\t\t// dispatch({\r\n// \t\t\t// \ttype: LOGIN_SUCCESS,\r\n// \t\t\t// \tpayload: res.data,\r\n// \t\t\t// });\r\n// \t\t\t// return dispatch(loadUser());\r\n// \t\t} catch (error) {\r\n// \t\t\tconsole.log(error);\r\n\r\n// \t\t\tdispatch(\r\n// \t\t\t\tsetAlert({\r\n// \t\t\t\t\ttitle: 'Login error',\r\n// \t\t\t\t\tmessage:\r\n// \t\t\t\t\t\t\"Email & password combination aren't correct. Please try again or reset your password.\",\r\n// \t\t\t\t\talertType: 'danger',\r\n// \t\t\t\t})\r\n// \t\t\t);\r\n// \t\t}\r\n// \t}\r\n// );\r\n\r\nexport const surrogateUser = createAsyncThunk(\r\n\t'auth/surrogateUser',\r\n\tasync (options: { id: string }) => {\r\n\t\ttry {\r\n\t\t\tconst { id } = options;\r\n\t\t\tconst body = JSON.stringify({ id });\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/auth/surrogate-user',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\treturn data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const updatePassword = createAsyncThunk(\r\n\t'auth/updatePassword',\r\n\tasync (options: { email: string; password: string }, { dispatch }) => {\r\n\t\ttry {\r\n\t\t\tconst { email, password } = options;\r\n\t\t\tconst emailToLowerCase = email.toLowerCase();\r\n\t\t\tconst body = JSON.stringify({ email: emailToLowerCase, password });\r\n\t\t\tconst { data } = await axios.put(\r\n\t\t\t\t'/api/auth/update-password',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\tif (data === 'Password was successfully updated') {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Reset success',\r\n\t\t\t\t\t\tmessage: 'Your password was successfully updated.',\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tlocalStorage.removeItem('resetPwToken');\r\n\t\t\t\t// dispatch(login(emailToLowerCase, password));\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\treturn dispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Error resetting password',\r\n\t\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\t\"Your password couldn't be updated. Please contact support.\",\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const validateResetPwToken = createAsyncThunk(\r\n\t'auth/validateResetPwToken',\r\n\tasync (options: { resetPwToken: string }, { dispatch }) => {\r\n\t\ttry {\r\n\t\t\tconst { resetPwToken } = options;\r\n\t\t\tconst body = JSON.stringify({ resetPwToken });\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/auth/reset-password-validation',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\tif (data.message === 'Password reset link was validated') {\r\n\t\t\t\treturn data.user;\r\n\t\t\t} else {\r\n\t\t\t\treturn dispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Error resetting password',\r\n\t\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\t\"Your password couldn't be reset. Please request a new email link or contact support.\",\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn error;\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const authSlice = createSlice({\r\n\tname: 'auth',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tremoveUserData: (state) => {\r\n\t\t\tlocalStorage.removeItem('token');\r\n\t\t\tstate.token = null;\r\n\t\t\tstate.status = 'idle';\r\n\t\t\tstate.isAuthenticated = false;\r\n\t\t\tstate.user = null;\r\n\t\t\tstate.validatedResetPwToken = false;\r\n\t\t},\r\n\t},\r\n\textraReducers: (builder) => {\r\n\t\tbuilder\r\n\t\t\t.addCase(addComment.fulfilled, (state, action) => {\r\n\t\t\t\tif (state.user) {\r\n\t\t\t\t\tstate.user.comments = action.payload;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.addCase(authenticateUser.pending, (state) => {\r\n\t\t\t\tstate.status = 'loading';\r\n\t\t\t})\r\n\t\t\t.addCase(authenticateUser.fulfilled, (state, action) => {\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.token = action.payload;\r\n\t\t\t\tstate.isAuthenticated = true;\r\n\t\t\t})\r\n\t\t\t.addCase(authenticateUser.rejected, (state) => {\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.token = null;\r\n\t\t\t\tstate.isAuthenticated = false;\r\n\t\t\t\tstate.user = null;\r\n\t\t\t\tstate.validatedResetPwToken = false;\r\n\t\t\t})\r\n\t\t\t.addCase(getUserData.pending, (state) => {\r\n\t\t\t\tstate.status = 'loading';\r\n\t\t\t})\r\n\t\t\t.addCase(getUserData.fulfilled, (state, action: PayloadAction<User>) => {\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.isAuthenticated = true;\r\n\t\t\t\tstate.user = action.payload;\r\n\t\t\t})\r\n\t\t\t.addCase(getUserData.rejected, (state) => {\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.token = null;\r\n\t\t\t\tstate.isAuthenticated = false;\r\n\t\t\t\tstate.user = null;\r\n\t\t\t\tstate.validatedResetPwToken = false;\r\n\t\t\t})\r\n\t\t\t.addCase(handleLikeLead.fulfilled, (state, action) => {\r\n\t\t\t\tstate.user!.likedLeads! = action.payload?.leads;\r\n\t\t\t})\r\n\t\t\t.addCase(handleArchiveLead.fulfilled, (state, action) => {\r\n\t\t\t\tstate.user!.archivedLeads! = action.payload?.leads;\r\n\t\t\t})\r\n\t\t\t.addCase(surrogateUser.fulfilled, (state, action) => {\r\n\t\t\t\tconst { token, user } = action.payload;\r\n\t\t\t\tstate.token = token;\r\n\t\t\t\tstate.user = user;\r\n\t\t\t})\r\n\t\t\t.addCase(updatePassword.fulfilled, (state) => {\r\n\t\t\t\tstate.user = null;\r\n\t\t\t\tstate.validatedResetPwToken = false;\r\n\t\t\t})\r\n\t\t\t.addCase(validateResetPwToken.pending, (state) => {\r\n\t\t\t\tstate.status = 'loading';\r\n\t\t\t})\r\n\t\t\t.addCase(validateResetPwToken.fulfilled, (state, action) => {\r\n\t\t\t\tstate.user!.email = action.payload;\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.validatedResetPwToken = true;\r\n\t\t\t});\r\n\t},\r\n});\r\n\r\nexport const { removeUserData } = authSlice.actions;\r\n\r\nexport default authSlice.reducer;\r\n","import { createSlice, nanoid, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport {\r\n\tFilter,\r\n\tFilterOperators,\r\n\tFilterState,\r\n\tFilterTitles,\r\n\tFilterTypes,\r\n} from '@utils/interfaces/Filter';\r\n\r\nconst initialState: FilterState = {\r\n\tcount: +localStorage.getItem('filterCount')! || 0,\r\n\tfilters: [],\r\n\tprep: {\r\n\t\tunit: +localStorage.getItem('unitFee')! || null,\r\n\t\tlb: +localStorage.getItem('lbFee')! || null,\r\n\t},\r\n\titemLimit: +localStorage.getItem('itemLimit')! || 15,\r\n\tdateLimits: { min: null, max: null, selected: null },\r\n};\r\n\r\nexport const filtersSlice = createSlice({\r\n\tname: 'filters',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tclearFilter: (\r\n\t\t\tstate,\r\n\t\t\taction: PayloadAction<{\r\n\t\t\t\tid: string;\r\n\t\t\t}>\r\n\t\t) => {\r\n\t\t\tstate.filters = state.filters.filter(\r\n\t\t\t\t(filter) => filter.id !== action.payload.id\r\n\t\t\t);\r\n\t\t\tstate.count = state.filters.length;\r\n\t\t},\r\n\r\n\t\tclearFilters: (state) => {\r\n\t\t\tstate.count = 0;\r\n\t\t\tstate.filters = [];\r\n\t\t},\r\n\t\tclearPrepFilter: (state) => {\r\n\t\t\tconsole.log(state);\r\n\t\t},\r\n\t\tcreateFilter: {\r\n\t\t\treducer: (\r\n\t\t\t\tstate,\r\n\t\t\t\taction: PayloadAction<{\r\n\t\t\t\t\tid: string;\r\n\t\t\t\t\ttype: FilterTypes;\r\n\t\t\t\t\ttitle: FilterTitles;\r\n\t\t\t\t\toperator: FilterOperators;\r\n\t\t\t\t\tvalue: string | number;\r\n\t\t\t\t}>\r\n\t\t\t) => {\r\n\t\t\t\tconst { id, type, title, operator, value } = action.payload;\r\n\r\n\t\t\t\t// perform actions to the input value to make it able to processed the same way for all types\r\n\t\t\t\tlet processedValue;\r\n\t\t\t\tif (type === 'roi') {\r\n\t\t\t\t\tprocessedValue = +value / 100;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprocessedValue = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create a new filter object\r\n\t\t\t\tconst newFilter: Filter = {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\ttype,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\toperator,\r\n\t\t\t\t\tvalue: processedValue,\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// see if a filter already exists and return the index if it does\r\n\t\t\t\tconst index = state.filters.findIndex(\r\n\t\t\t\t\t(filter: Filter) =>\r\n\t\t\t\t\t\tfilter.type === newFilter.type &&\r\n\t\t\t\t\t\tfilter.operator === newFilter.operator\r\n\t\t\t\t);\r\n\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t// create a new filter\r\n\t\t\t\t\tstate.filters.push(newFilter);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// update already existing filter\r\n\t\t\t\t\tstate.filters[index] = newFilter;\r\n\t\t\t\t}\r\n\t\t\t\t// update the count to the current number of applied filters\r\n\t\t\t\tstate.count = state.filters.length;\r\n\t\t\t},\r\n\t\t\tprepare: (\r\n\t\t\t\ttype: FilterTypes,\r\n\t\t\t\ttitle: FilterTitles,\r\n\t\t\t\toperator: FilterOperators,\r\n\t\t\t\tvalue: string | number\r\n\t\t\t) => {\r\n\t\t\t\tconst id = nanoid();\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\toperator,\r\n\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t},\r\n\t\tsetDateLimit: (\r\n\t\t\tstate,\r\n\t\t\taction: PayloadAction<{\r\n\t\t\t\tmin: string;\r\n\t\t\t\tmax: string | null;\r\n\t\t\t\tselected: string;\r\n\t\t\t}>\r\n\t\t) => {\r\n\t\t\tstate.dateLimits.min = action.payload.min;\r\n\t\t\tstate.dateLimits.max = action.payload.max;\r\n\t\t\tstate.dateLimits.selected = action.payload.selected;\r\n\t\t},\r\n\t\tsetItemLimit: (\r\n\t\t\tstate,\r\n\t\t\taction: PayloadAction<{ type: string; itemLimit: number }>\r\n\t\t) => {\r\n\t\t\tlocalStorage.setItem('itemLimit', action.payload.itemLimit.toString());\r\n\t\t\tstate.itemLimit = +action.payload.itemLimit;\r\n\t\t},\r\n\t\tsetPrepFilter: (state, action: PayloadAction<string>) => {\r\n\t\t\tconsole.log(action.payload);\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const {\r\n\tclearFilter,\r\n\tclearFilters,\r\n\tclearPrepFilter,\r\n\tcreateFilter,\r\n\tsetDateLimit,\r\n\tsetItemLimit,\r\n\tsetPrepFilter,\r\n} = filtersSlice.actions;\r\n\r\nexport default filtersSlice.reducer;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n\tallUsers: [],\r\n\tloading: false,\r\n\tpagination: {\r\n\t\tpage: 1,\r\n\t\thasNextPage: null,\r\n\t\thasPreviousPage: false,\r\n\t\tnextPage: null,\r\n\t\tpreviousPage: null,\r\n\t\tlastPage: null,\r\n\t\ttotalItems: null,\r\n\t},\r\n\tuserSettings: {\r\n\t\tbilling: {\r\n\t\t\tplan: {\r\n\t\t\t\tloading: true,\r\n\t\t\t\tid: null,\r\n\t\t\t\tcreated: null,\r\n\t\t\t\tcancelAt: null,\r\n\t\t\t\tcancelAtPeriod: null,\r\n\t\t\t\tcurrentPeriodEnd: null,\r\n\t\t\t\tplan: {\r\n\t\t\t\t\tid: null,\r\n\t\t\t\t\tamount: null,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tpaymentHistory: {\r\n\t\t\t\tloading: true,\r\n\t\t\t\tpayments: [],\r\n\t\t\t},\r\n\t\t},\r\n\t\taffiliates: {\r\n\t\t\tpaypalEmail: '',\r\n\t\t\tpaymentHistory: {\r\n\t\t\t\tloading: true,\r\n\t\t\t\tpayments: [],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n\r\nexport const usersSlice = createSlice({\r\n\tname: 'users',\r\n\tinitialState,\r\n\treducers: {},\r\n});\r\n\r\nexport const {} = usersSlice.actions;\r\n\r\nexport default usersSlice.reducer;\r\n","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEyeOpen(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 12a2 2 0 100-4 2 2 0 000 4z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z\",\n    clipRule: \"evenodd\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEyeOpen);\nexport default __webpack_public_path__ + \"static/media/eye-open.5fb848f4.svg\";\nexport { ForwardRef as ReactComponent };","import { configureStore } from '@reduxjs/toolkit';\r\n\r\n// import reducers\r\nimport alertReducer from '@features/alert/alertSlice';\r\nimport authReducer from '@features/auth/authSlice';\r\nimport filterReducer from '@features/filters/filtersSlice';\r\nimport leadsReducer from '@features/leads/leadsSlice';\r\nimport usersReducer from '@features/users/usersSlice';\r\n\r\nconst store = configureStore({\r\n\treducer: {\r\n\t\talert: alertReducer,\r\n\t\tauth: authReducer,\r\n\t\tfilters: filterReducer,\r\n\t\tleads: leadsReducer,\r\n\t\tusers: usersReducer,\r\n\t},\r\n\tmiddleware: (getDefaultMiddleware) =>\r\n\t\tgetDefaultMiddleware({\r\n\t\t\tserializableCheck: false,\r\n\t\t}),\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport default store;\r\n","import axios from 'axios';\r\n\r\nexport const setAuthToken = (token: string) => {\r\n\tif (token) {\r\n\t\taxios.defaults.headers.common['x-auth-token'] = token;\r\n\t\tlocalStorage.setItem('token', token);\r\n\t} else {\r\n\t\tdelete axios.defaults.headers.common['x-auth-token'];\r\n\t\tlocalStorage.removeItem('token');\r\n\t}\r\n};\r\n\r\nexport const setResetPwToken = (token: string) => {\r\n\tif (token) {\r\n\t\taxios.defaults.headers.common['x-auth-token'] = token;\r\n\t\tlocalStorage.setItem('resetPwToken', token);\r\n\t} else {\r\n\t\tdelete axios.defaults.headers.common['x-auth-token'];\r\n\t\tlocalStorage.removeItem('resetPwToken');\r\n\t}\r\n};\r\n\r\nexport default setAuthToken;\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport type { RootState, AppDispatch } from '../store';\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import React from 'react';\r\n\r\ninterface ButtonProps {\r\n\twidth: string | null;\r\n\tmargin: boolean;\r\n\tsize: string | null;\r\n\ttext: string;\r\n\tonClick(arg: any): any;\r\n\tcta: boolean;\r\n\tpath: any;\r\n\tconditional: any;\r\n\tconditionalDisplay: any;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps> = ({\r\n\ttext,\r\n\tonClick,\r\n\twidth,\r\n\tmargin,\r\n\tsize,\r\n\tcta,\r\n\tpath,\r\n\tconditional,\r\n\tconditionalDisplay,\r\n}) => {\r\n\treturn (\r\n\t\t<button\r\n\t\t\tonClick={onClick}\r\n\t\t\tclassName={`${width || 'w-auto'} ${\r\n\t\t\t\tmargin ? 'ml-4' : ''\r\n\t\t\t} flex items-center relative py-2 px-3 rounded-lg shadow-sm hover:shadow-md border-main ${\r\n\t\t\t\tsize === 'sm' ? 'text-sm' : 'text-xs'\r\n\t\t\t} font-semibold ${\r\n\t\t\t\tcta\r\n\t\t\t\t\t? 'bg-purple-500 hover:bg-purple-600 text-white'\r\n\t\t\t\t\t: 'text-gray-600 hover:text-gray-700'\r\n\t\t\t} transition-main ring-purple`}\r\n\t\t>\r\n\t\t\t{path && (\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\tclassName='svg-sm'\r\n\t\t\t\t>\r\n\t\t\t\t\t{path}\r\n\t\t\t\t</svg>\r\n\t\t\t)}\r\n\t\t\t<span\r\n\t\t\t\tclassName={`${path ? 'ml-2' : ''} ${\r\n\t\t\t\t\tcta ? '' : 'text-gray-600'\r\n\t\t\t\t} mx-auto`}\r\n\t\t\t>\r\n\t\t\t\t{text}\r\n\t\t\t</span>\r\n\t\t\t{conditional && conditionalDisplay}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nexport default Button;\r\n","import React from 'react';\r\n\r\nconst DefaultFooter = () => {\r\n\treturn (\r\n\t\t<div className='mt-6 xl:mt-0 mb-6 container'>\r\n\t\t\t&copy; 2020 - {new Date().getFullYear()} LeadGeek, Inc. All rights\r\n\t\t\treserved.\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default DefaultFooter;\r\n","import React, { useEffect } from 'react';\r\n\r\nimport { useAppDispatch } from '@utils/hooks';\r\nimport { removeAlert } from '@features/alert/alertSlice';\r\n\r\ninterface AlertProps {\r\n\tid: string;\r\n\ttitle: string;\r\n\tmessage: string;\r\n\talertType: 'success' | 'warning' | 'danger';\r\n}\r\n\r\nconst Alert: React.FC<AlertProps> = ({ id, title, message, alertType }) => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\tconst setIcon = (alertType: string) => {\r\n\t\tconst foundIcon = alertIcons.find(\r\n\t\t\t(alertIcon) => alertIcon.title === alertType\r\n\t\t);\r\n\t\tif (foundIcon) {\r\n\t\t\treturn foundIcon.path;\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\t// remove alert after specified times\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tdispatch(removeAlert(id));\r\n\t\t}, 6000);\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tkey={id}\r\n\t\t\tclassName={`h-full w-full max-h-32 max-w-xs fixed bottom-0 left-0 z-40 p-4 rounded-lg shadow-md bg-white border border-t-4 ${\r\n\t\t\t\talertType === 'success'\r\n\t\t\t\t\t? 'border-teal-500'\r\n\t\t\t\t\t: alertType === 'warning'\r\n\t\t\t\t\t? 'border-purple-500'\r\n\t\t\t\t\t: alertType === 'danger'\r\n\t\t\t\t\t? 'border-red-300'\r\n\t\t\t\t\t: 'border-gray-700'\r\n\t\t\t} transform -translate-y-12 translate-x-24`}\r\n\t\t>\r\n\t\t\t<div className='w-full flex items-start justify-between'>\r\n\t\t\t\t<div className='flex'>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\talertType === 'success'\r\n\t\t\t\t\t\t\t\t? 'text-teal-500'\r\n\t\t\t\t\t\t\t\t: alertType === 'warning'\r\n\t\t\t\t\t\t\t\t? 'text-purple-500'\r\n\t\t\t\t\t\t\t\t: alertType === 'danger'\r\n\t\t\t\t\t\t\t\t? 'text-red-300'\r\n\t\t\t\t\t\t\t\t: 'text-gray-700'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\tclassName='mt-1 h-5 w-5'\r\n\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{setIcon(alertType)}\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='ml-2'>\r\n\t\t\t\t\t\t<h4 className='font-semibold text-gray-900'>{title}</h4>\r\n\t\t\t\t\t\t<p className='mt-2 text-sm text-gray-600'>{message}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => dispatch(removeAlert(id))}\r\n\t\t\t\t\tclassName={`text-gray-400 rounded-md ring-gray`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName='svg-sm'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\td='M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z'\r\n\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst alertIcons = [\r\n\t{\r\n\t\ttitle: 'danger',\r\n\t\tpath: (\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\ttitle: 'warning',\r\n\t\tpath: (\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\ttitle: 'success',\r\n\t\tpath: (\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t),\r\n\t},\r\n];\r\n\r\nexport default Alert;\r\n","import React, { Fragment } from 'react';\r\n\r\nimport { useAppSelector } from '@utils/hooks';\r\n\r\nimport Alert from '@features/alert/Alert';\r\n\r\nconst Alerts = () => {\r\n\tconst alerts = useAppSelector((state) => state.alert);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{alerts.length > 0 &&\r\n\t\t\t\talerts.map((alert, i) => (\r\n\t\t\t\t\t<Alert\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\tid={alert.id}\r\n\t\t\t\t\t\ttitle={alert.title}\r\n\t\t\t\t\t\tmessage={alert.message}\r\n\t\t\t\t\t\talertType={alert.alertType}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default Alerts;\r\n","import React, { Fragment } from 'react';\r\n\r\n// redux\r\nimport Alert from '@components/features/alert/Alerts';\r\n\r\ninterface DefaultLayoutProps {\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nconst DefaultLayout: React.FC<DefaultLayoutProps> = ({ children }) => {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Alert />\r\n\t\t\t<main className='relative flex flex-col h-screen'>{children}</main>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default DefaultLayout;\r\n","import React from 'react';\r\n\r\ninterface FormFieldProps {\r\n\tlabel: string;\r\n\ttype: string;\r\n\tname: string;\r\n\tplaceholder: string;\r\n\tvalue?: string | number;\r\n\tonChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n\trequired: boolean;\r\n\tstyles: string | null;\r\n}\r\n\r\nconst FormField: React.FC<FormFieldProps> = ({\r\n\tlabel,\r\n\ttype,\r\n\tname,\r\n\tplaceholder,\r\n\tvalue,\r\n\tonChange,\r\n\trequired,\r\n\tstyles,\r\n}) => {\r\n\treturn (\r\n\t\t<div className={`pt-4 ${styles ? styles : ''} flex-col items-center`}>\r\n\t\t\t<label htmlFor={name} className='form-field-label'>\r\n\t\t\t\t{label}\r\n\t\t\t</label>\r\n\t\t\t<input\r\n\t\t\t\tid={name}\r\n\t\t\t\tname={name}\r\n\t\t\t\ttype={type}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\trequired={required}\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t\tclassName='mt-1 form-field'\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default FormField;\r\n","import React, { Fragment } from 'react';\r\n\r\n// redux\r\nimport { useAppSelector } from '@utils/hooks';\r\n\r\nconst LoginImage = () => {\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{!isAuthenticated && (\r\n\t\t\t\t<aside\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundImage: `url(${\r\n\t\t\t\t\t\t\tprocess.env.PUBLIC_URL + '/img/login-image.png'\r\n\t\t\t\t\t\t})`,\r\n\t\t\t\t\t\tbackgroundRepeat: 'no-repeat',\r\n\t\t\t\t\t\tbackgroundSize: 'cover',\r\n\t\t\t\t\t\tposition: 'relative',\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='py-12 hidden xl:block h-screen xl:w-3/5'\r\n\t\t\t\t>\r\n\t\t\t\t\t<header className='absolute top-0 left-0 h-screen container bg-gray-800 opacity-75 text-gray-200'>\r\n\t\t\t\t\t\t<h2 className='mt-16 text-4xl font-black'>\r\n\t\t\t\t\t\t\tLeadGeek beta now open.\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<h3 className='mt-4 text-xl font-semibold'>\r\n\t\t\t\t\t\t\tTest out our new software with features that help you source leads\r\n\t\t\t\t\t\t\tbetter than ever.\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t</aside>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default LoginImage;\r\n","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEyeClosed(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z\",\n    clipRule: \"evenodd\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEyeClosed);\nexport default __webpack_public_path__ + \"static/media/eye-closed.86dcd3d3.svg\";\nexport { ForwardRef as ReactComponent };","var _defs, _path, _path2, _rect, _rect2, _path3, _path4, _path5;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLeadgeekLogoLight(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 256 256\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".cls-1{fill:#5d55fa;}.cls-2,.cls-3{fill:none;stroke:#5d55fa;stroke-linecap:round;stroke-miterlimit:10;}.cls-2{stroke-width:12px;}.cls-3{stroke-width:8px;}\"))), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"cls-1\",\n    d: \"M103.46,107.44V197.9H13V107.44h90.46m7.63-12H5.37A4.37,4.37,0,0,0,1,99.81V205.53a4.37,4.37,0,0,0,4.37,4.37H111.09a4.37,4.37,0,0,0,4.37-4.37V99.81a4.37,4.37,0,0,0-4.37-4.37Z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"cls-1\",\n    d: \"M243,107.44V197.9H152.54V107.44H243m7.63-12H144.91a4.37,4.37,0,0,0-4.37,4.37V205.53a4.37,4.37,0,0,0,4.37,4.37H250.63a4.37,4.37,0,0,0,4.37-4.37V99.81a4.37,4.37,0,0,0-4.37-4.37Z\"\n  })), _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    className: \"cls-1\",\n    x: 23.89,\n    y: 132.5,\n    width: 32.7,\n    height: 4.36,\n    rx: 1.5,\n    transform: \"translate(-83.45 67.9) rotate(-45)\"\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    className: \"cls-1\",\n    x: 22.1,\n    y: 139.31,\n    width: 53.19,\n    height: 4.36,\n    rx: 1.5,\n    transform: \"translate(-85.79 75.87) rotate(-45)\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"cls-2\",\n    d: \"M8.71,100.89l53.4-50.44A15.92,15.92,0,0,1,75,46.22l27.44,3.43\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"cls-2\",\n    d: \"M247.29,100.89l-53.4-50.44A15.92,15.92,0,0,0,181,46.22l-27.44,3.43\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"cls-3\",\n    d: \"M108.92,157.57c-2.36-14,8.29-25.93,19.63-26.16s21.23,11.09,19.62,25.07\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLeadgeekLogoLight);\nexport default __webpack_public_path__ + \"static/media/leadgeek-logo-light.acf236b6.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react';\r\n\r\nimport { ReactComponent as EyeOpen } from '@assets/images/svgs/eye-open.svg';\r\nimport { ReactComponent as EyeClosed } from '@assets/images/svgs/eye-closed.svg';\r\n\r\ninterface PasswordFormFieldProps {\r\n\tlabel: string;\r\n\tplaceholder: string;\r\n\tvalue: string;\r\n\tonChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n\trequired: boolean;\r\n\tstyles: string | null;\r\n}\r\n\r\nconst PasswordFormField: React.FC<PasswordFormFieldProps> = ({\r\n\tlabel,\r\n\tplaceholder,\r\n\tvalue,\r\n\tonChange,\r\n\trequired,\r\n\tstyles,\r\n}) => {\r\n\tconst [passwordShown, setPasswordShown] = useState(false);\r\n\tconst togglePasswordVisibility = () => {\r\n\t\tsetPasswordShown(passwordShown ? false : true);\r\n\t};\r\n\treturn (\r\n\t\t<div className={`pt-4 ${styles ? styles : ''} flex-col items-center`}>\r\n\t\t\t<label htmlFor='password' className='form-field-label'>\r\n\t\t\t\t{label}\r\n\t\t\t</label>\r\n\t\t\t<div className='relative'>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid={'password'}\r\n\t\t\t\t\tname='password'\r\n\t\t\t\t\ttype={passwordShown ? 'text' : 'password'}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\trequired={required}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tclassName='mt-1 form-field'\r\n\t\t\t\t/>\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={togglePasswordVisibility}\r\n\t\t\t\t\ttype='button'\r\n\t\t\t\t\tclassName='mt-3 mr-4 absolute right-0 rounded-md text-gray-400 focus:outline-none focus:shadow-outline'\r\n\t\t\t\t>\r\n\t\t\t\t\t{passwordShown ? (\r\n\t\t\t\t\t\t<EyeClosed className='mt-2 h-4' />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<EyeOpen className='mt-2 h-4' />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PasswordFormField;\r\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCheck(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M5 13l4 4L19 7\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCheck);\nexport default __webpack_public_path__ + \"static/media/check.e3ff18b6.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react';\r\n\r\n// packages\r\nimport { Redirect, Link } from 'react-router-dom';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@utils/hooks';\r\nimport {\r\n\tauthenticateUser,\r\n\tgetUserData,\r\n} from '@components/features/auth/authSlice';\r\n\r\n// components\r\nimport Button from '@components/utils/Button';\r\nimport DefaultFooter from '@components/layout/navigation/DefaultFooter';\r\nimport DefaultLayout from '@components/layout/DefaultLayout';\r\nimport FormField from '@components/utils/FormField';\r\nimport LoginImage from '@components/auth/login/LoginImage';\r\nimport PasswordFormField from '@components/utils/PasswordFormField';\r\nimport { ReactComponent as LeadGeekLogo } from '@assets/images/svgs/leadgeek-logo-light.svg';\r\n\r\n// utils\r\nimport setAuthToken from '@utils/authTokens';\r\n\r\nconst Login: React.FC = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst token = useAppSelector((state) => state.auth.token);\r\n\r\n\tconst [formData, setFormData] = useState({\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t});\r\n\tconst { email, password } = formData;\r\n\r\n\tconst onChange = (e: React.ChangeEvent<HTMLInputElement>) =>\r\n\t\tsetFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n\tconst onSubmit = async (e: React.FormEvent) => {\r\n\t\te.preventDefault();\r\n\t\tconst res = await dispatch(authenticateUser({ email, password }));\r\n\t\tif (res.meta.requestStatus !== 'rejected' && status === 'idle') {\r\n\t\t\tsetAuthToken(res.payload);\r\n\t\t\treturn dispatch(getUserData());\r\n\t\t}\r\n\t};\r\n\r\n\tif (isAuthenticated && token) {\r\n\t\treturn <Redirect to='/leads' />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<DefaultLayout>\r\n\t\t\t<section className={classes.wrapper}>\r\n\t\t\t\t<div className={classes.border} />\r\n\t\t\t\t<div className={classes.content}>\r\n\t\t\t\t\t<header className={classes.contentHeader}>\r\n\t\t\t\t\t\t<a href='https://leadgeek.io/'>\r\n\t\t\t\t\t\t\t<LeadGeekLogo className={classes.logoLg} />\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<section className='container'>\r\n\t\t\t\t\t\t<article className={classes.card}>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<LeadGeekLogo className={classes.logoSm} />\r\n\t\t\t\t\t\t\t\t<h1 className={classes.title}>Log in</h1>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t\t<FormField\r\n\t\t\t\t\t\t\t\t\tlabel={'Email'}\r\n\t\t\t\t\t\t\t\t\ttype={'email'}\r\n\t\t\t\t\t\t\t\t\tname={'email'}\r\n\t\t\t\t\t\t\t\t\tplaceholder={'dsaunders@gmail.com'}\r\n\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\t\tstyles={null}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<PasswordFormField\r\n\t\t\t\t\t\t\t\t\tlabel={'Password'}\r\n\t\t\t\t\t\t\t\t\tplaceholder={'Password'}\r\n\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\t\tstyles={null}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div className='mt-2'>\r\n\t\t\t\t\t\t\t\t\t<Link to={'/reset/forgot-password/'} className='link'>\r\n\t\t\t\t\t\t\t\t\t\tForgot password?\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttext={'Log in'}\r\n\t\t\t\t\t\t\t\t\t\tonClick={onSubmit}\r\n\t\t\t\t\t\t\t\t\t\twidth={'w-full'}\r\n\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\tsize={'sm'}\r\n\t\t\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t<aside className={classes.signup}>\r\n\t\t\t\t\t\t\t\t<p className='inline-block'>Need a LeadGeek account?</p>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref='https://leadgeek.io/pricing/'\r\n\t\t\t\t\t\t\t\t\tclassName={classes.subheaderLink}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tJoin now\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</aside>\r\n\t\t\t\t\t\t</article>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t\t<DefaultFooter />\r\n\t\t\t\t</div>\r\n\t\t\t\t<LoginImage />\r\n\t\t\t</section>\r\n\t\t</DefaultLayout>\r\n\t);\r\n};\r\n\r\nconst classes = {\r\n\twrapper: 'min-h-screen relative flex justify-center bg-gray-100',\r\n\tborder: 'h-2 absolute z-10 inset-x-0 top-0 bg-purple-500',\r\n\tcontent:\r\n\t\t'xl:h-screen w-full xl:w-3/5 md:flex md:flex-col md:justify-between bg-gray-100',\r\n\tcontentHeader: 'mt-6 hidden md:block container',\r\n\tlogoLg: 'default-logo-lg',\r\n\tlogoSm: 'default-logo-sm',\r\n\tcard: 'mt-12 md:mt-0 max-w-md card',\r\n\ttitle:\r\n\t\t'pb-2 text-xl md:text-2xl lg:text-3xl font-black text-gray-900 border-b border-gray-200',\r\n\tsignup: 'mt-4 flex items-center mt-2 text-sm',\r\n\tsubheaderLink: 'ml-2 block md:inline-block link',\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from 'react';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport { setAlert } from '@features/alert/alertSlice';\r\n\r\nimport DefaultLayout from '@components/layout/DefaultLayout';\r\nimport FormField from '@components/utils/FormField';\r\n// import LoginImage from '@components/auth/login/LoginImage';\r\nimport DefaultFooter from '@components/layout/navigation/DefaultFooter';\r\nimport { ReactComponent as LeadGeekLogo } from '@assets/images/svgs/leadgeek-logo-light.svg';\r\nimport Button from '@components/utils/Button';\r\n\r\nimport { setResetPwToken } from '@utils/authTokens';\r\nimport { config } from '@utils/utils';\r\nimport { useAppDispatch } from '@utils/hooks';\r\n\r\nconst ForgotPassword = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\tconst [formData, setFormData] = useState({\r\n\t\temail: '',\r\n\t});\r\n\tconst { email } = formData;\r\n\tconst onChange = (e: React.ChangeEvent<HTMLInputElement>) =>\r\n\t\tsetFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n\tconst forgotPassword = async (email: string) => {\r\n\t\tconst emailToLowerCase = email.toLowerCase();\r\n\t\tconst body = JSON.stringify({ email: emailToLowerCase });\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/auth/forgot-password',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\tif (data.message === 'Password recovery email sent successfully') {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\t\ttitle: 'Email sent',\r\n\t\t\t\t\t\t\tmessage: `An email has been sent to ${email} if an account is associated.`,\r\n\t\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t\tconst { token } = data;\r\n\t\t\t\tsetResetPwToken(token);\r\n\t\t\t}\r\n\t\t} catch (error: any) {\r\n\t\t\t// make sure people can't guess user's password by trial and error\r\n\t\t\tconst errorMsg = error?.response.data;\r\n\t\t\tif (errorMsg === 'Email not found in database') {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Email sent',\r\n\t\t\t\t\t\tmessage: `An email has been sent to ${email} if an account is associated.`,\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Error sending email',\r\n\t\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\t'Email could not be sent. Please contact LeadGeek support.',\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\tif (email === '') {\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Please enter your email',\r\n\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t'The email field is required. Please enter one and try again.',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tforgotPassword(email);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<DefaultLayout>\r\n\t\t\t<section className='h-screen relative flex justify-center bg-gray-100'>\r\n\t\t\t\t<div className='h-2 absolute z-10 inset-x-0 top-0 bg-purple-300' />\r\n\t\t\t\t<div className='xl:h-screen w-full xl:w-3/5 md:flex md:flex-col md:justify-between bg-gray-100'>\r\n\t\t\t\t\t<div className='mt-6 hidden md:block container'>\r\n\t\t\t\t\t\t<a href='https://leadgeek.io'>\r\n\t\t\t\t\t\t\t<LeadGeekLogo className='inline-block w-12' />\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className='mt-12 md:mt-0 mx-auto py-4 lg:py-6 px-6 md:px-8 lg:px-12 w-full max-w-md bg-white rounded-md shadow-lg'>\r\n\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t<LeadGeekLogo className='md:hidden w-12' />\r\n\t\t\t\t\t\t\t\t<h1 className='pb-2 text-xl md:text-2xl lg:text-3xl font-black text-gray-900 border-b border-gray-100'>\r\n\t\t\t\t\t\t\t\t\tReset password\r\n\t\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t\t<div className='mt-2'>\r\n\t\t\t\t\t\t\t\t\t<p className='inline-block'>\r\n\t\t\t\t\t\t\t\t\t\tDon't worry, it happens to the best of us.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p className='mt-2 inline-block'>\r\n\t\t\t\t\t\t\t\t\t\tWe'll send password reset instructions to the email below.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t<form className='my-3' onSubmit={(e) => onSubmit(e)}>\r\n\t\t\t\t\t\t\t\t<FormField\r\n\t\t\t\t\t\t\t\t\tlabel='Email'\r\n\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\tplaceholder='dsaunders@gmail.com'\r\n\t\t\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\t\tstyles={null}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttext={'Send email'}\r\n\t\t\t\t\t\t\t\t\t\tonClick={onSubmit}\r\n\t\t\t\t\t\t\t\t\t\twidth={'w-full'}\r\n\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\tsize={'sm'}\r\n\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='mt-4 text-sm text-gray-400'>\r\n\t\t\t\t\t\t\t\t\t<NavLink exact to={'/login'} className='link'>\r\n\t\t\t\t\t\t\t\t\t\tBack to log in\r\n\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<DefaultFooter />\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* <LoginImage /> */}\r\n\t\t\t</section>\r\n\t\t</DefaultLayout>\r\n\t);\r\n};\r\n\r\nexport default ForgotPassword;\r\n","import React from 'react';\r\n\r\nimport { Preloader, Oval } from 'react-preloader-icon';\r\n\r\ninterface SpinnerProps {\r\n\tdivWidth: string | null;\r\n\tcenter: boolean;\r\n\tspinnerWidth: string | null;\r\n\tmargin: boolean;\r\n\ttext: string | null;\r\n}\r\n\r\nconst Spinner: React.FC<SpinnerProps> = ({\r\n\tdivWidth,\r\n\tcenter,\r\n\tspinnerWidth,\r\n\tmargin,\r\n\ttext,\r\n}) => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`${divWidth ? divWidth : ''} ${\r\n\t\t\t\tcenter\r\n\t\t\t\t\t? 'absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2'\r\n\t\t\t\t\t: ''\r\n\t\t\t} flex flex-col items-center justify-center ${margin ? 'mt-16' : ''}`}\r\n\t\t>\r\n\t\t\t<Preloader\r\n\t\t\t\tuse={Oval}\r\n\t\t\t\tsize={spinnerWidth === 'sm' ? 20 : spinnerWidth === 'md' ? 35 : 45}\r\n\t\t\t\tstrokeWidth={6}\r\n\t\t\t\tstrokeColor='#5d55fa'\r\n\t\t\t\tduration={500}\r\n\t\t\t/>\r\n\t\t\t{text && (\r\n\t\t\t\t<div className='mt-8 font-semibold text-gray-600'>\r\n\t\t\t\t\t{text || 'Loading results...'}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Spinner;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport { Redirect, NavLink } from 'react-router-dom';\r\nimport { validateResetPwToken } from '@features/auth/authSlice';\r\n\r\nimport DefaultLayout from '@components/layout/DefaultLayout';\r\n// import ResetPassword from '@components/auth/login/password/ResetPassword';\r\n// import LoginImage from '@components/auth/login/LoginImage';\r\nimport Spinner from '@components/utils/Spinner';\r\nimport DefaultFooter from '@components/layout/navigation/DefaultFooter';\r\nimport { ReactComponent as LeadGeekLogo } from '@assets/images/svgs/leadgeek-logo-light.svg';\r\nimport { useAppDispatch, useAppSelector } from '@utils/hooks';\r\n\r\nconst ResetPasswordPage = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst validatedResetPwToken = useAppSelector(\r\n\t\t(state) => state.auth.validatedResetPwToken\r\n\t);\r\n\t// const userEmail = useAppSelector((state) => state.auth.user?.email);\r\n\tconst [resetPwToken] = useState<string>(localStorage.resetPwToken);\r\n\t// check for valid token\r\n\tuseEffect(() => {\r\n\t\tdispatch(validateResetPwToken({ resetPwToken }));\r\n\t}, []);\r\n\tif (isAuthenticated) {\r\n\t\treturn <Redirect to='/leads' />;\r\n\t}\r\n\r\n\treturn status === 'idle' ? (\r\n\t\t<DefaultLayout>\r\n\t\t\t{validatedResetPwToken ? (\r\n\t\t\t\t<section className='h-screen relative flex justify-center bg-gray-100'>\r\n\t\t\t\t\t<div className='lg:hidden h-2 absolute inset-x-0 top-0 bg-purple-300' />\r\n\t\t\t\t\t<div className='xl:h-screen w-full xl:w-3/5 md:flex md:flex-col md:justify-between bg-gray-100'>\r\n\t\t\t\t\t\t<div className='mt-6 hidden md:block container'>\r\n\t\t\t\t\t\t\t<a href='https://leadgeek.io'>\r\n\t\t\t\t\t\t\t\t<LeadGeekLogo className='inline-block w-12' />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='container'>\r\n\t\t\t\t\t\t\t<div className='mt-12 md:mt-0 mx-auto py-4 lg:py-6 px-6 md:px-8 lg:px-12 w-full max-w-md bg-white rounded-md shadow-lg'>\r\n\t\t\t\t\t\t\t\t<h1 className='text-xl md:text-2xl lg:text-3xl font-black text-gray-900'>\r\n\t\t\t\t\t\t\t\t\tReset password\r\n\t\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t\t{/* <ResetPassword\r\n\t\t\t\t\t\t\t\t\temail={userEmail}\r\n\t\t\t\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\t\t\t\tfullWidthButton={true}\r\n\t\t\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='mt-6 xl:mt-0 mb-6 container'>\r\n\t\t\t\t\t\t\t&copy; 2020 - {new Date().getFullYear()} LeadGeek, Inc. All rights\r\n\t\t\t\t\t\t\treserved.\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <LoginImage /> */}\r\n\t\t\t\t</section>\r\n\t\t\t) : (\r\n\t\t\t\t<section className='h-screen relative flex justify-center bg-gray-100'>\r\n\t\t\t\t\t<div className='lg:hidden h-2 absolute inset-x-0 top-0 bg-purple-300' />\r\n\t\t\t\t\t<div className='xl:h-screen w-full xl:w-3/5 md:flex md:flex-col md:justify-between bg-gray-100'>\r\n\t\t\t\t\t\t<div className='mt-6 hidden md:block container'>\r\n\t\t\t\t\t\t\t<a href='https://leadgeek.io'>\r\n\t\t\t\t\t\t\t\t<LeadGeekLogo className='inline-block w-12' />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='container'>\r\n\t\t\t\t\t\t\t<div className='mt-12 md:mt-0 mx-auto py-4 lg:py-6 px-6 md:px-8 lg:px-12 w-full max-w-md bg-white rounded-md shadow-lg'>\r\n\t\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t\t<LeadGeekLogo className='md:hidden w-16' />\r\n\t\t\t\t\t\t\t\t\t<h1 className='text-2xl md:text-3xl lg:text-4xl font-black text-gray-900'>\r\n\t\t\t\t\t\t\t\t\t\tUh-oh!\r\n\t\t\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t\t\t<div className='my-3 inline-block'>\r\n\t\t\t\t\t\t\t\t\t\tYour password could not be reset. Please try to{' '}\r\n\t\t\t\t\t\t\t\t\t\t<NavLink to='/reset/forgot-password' className='link'>\r\n\t\t\t\t\t\t\t\t\t\t\tget a new password reset link\r\n\t\t\t\t\t\t\t\t\t\t</NavLink>{' '}\r\n\t\t\t\t\t\t\t\t\t\tor{' '}\r\n\t\t\t\t\t\t\t\t\t\t<a href='https://leadgeek.io/contact' className='link'>\r\n\t\t\t\t\t\t\t\t\t\t\tcontact support\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t.\r\n\t\t\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\tto='/login'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='block bg-purple-600 mt-4 py-2 w-full rounded-md text-white text-center shadow-md hover:bg-purple-500 transition-colors duration-200 ring-purple'\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tReturn to log in\r\n\t\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<DefaultFooter />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <LoginImage /> */}\r\n\t\t\t\t</section>\r\n\t\t\t)}\r\n\t\t</DefaultLayout>\r\n\t) : (\r\n\t\t<Spinner\r\n\t\t\tdivWidth={null}\r\n\t\t\tcenter={true}\r\n\t\t\tspinnerWidth={null}\r\n\t\t\tmargin={false}\r\n\t\t\ttext={null}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default ResetPasswordPage;\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\n\r\n// packages\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@utils/hooks';\r\nimport { removeUserData } from '@components/features/auth/authSlice';\r\n\r\n// components\r\nimport { ReactComponent as LeadGeekLogo } from '@assets/images/svgs/leadgeek-logo-light.svg';\r\n\r\n// utils\r\nimport { useOutsideMouseup } from '@utils/utils';\r\ninterface NavbarLinkProps {\r\n\tlink: {\r\n\t\ttitle: string;\r\n\t\tlink: string;\r\n\t\tpath: JSX.Element;\r\n\t};\r\n}\r\n\r\nconst NavbarLink: React.FC<NavbarLinkProps> = ({ link }) => {\r\n\t// local state\r\n\tconst [hover, setHover] = useState(false);\r\n\r\n\treturn (\r\n\t\t<div v-for='item in items'>\r\n\t\t\t<NavLink\r\n\t\t\t\tclassName='p-2 relative flex items-center justify-between rounded-lg group text-gray-300 hover:text-gray-200 hover:bg-gray-800 hover:shadow-md transition duration-100 ease-in-out ring-purple'\r\n\t\t\t\tonMouseEnter={() => setHover(!hover)}\r\n\t\t\t\tonMouseLeave={() => setHover(false)}\r\n\t\t\t\tto={link.link}\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\tclassName='h-6 w-6'\r\n\t\t\t\t>\r\n\t\t\t\t\t{link.path}\r\n\t\t\t\t</svg>\r\n\t\t\t\t{hover && (\r\n\t\t\t\t\t<div className='mt-2 p-2 absolute left-0 z-40 transform -translate-y-1 translate-x-14 rounded-lg bg-gray-900 shadow-md text-white text-sm whitespace-nowrap'>\r\n\t\t\t\t\t\t{link.title}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</NavLink>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Navbar = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst role = useAppSelector((state) => state.auth.user?.role);\r\n\tconst name = useAppSelector((state) => state.auth.user?.name);\r\n\t// local state & local storage\r\n\tconst [hover, setHover] = useState(false);\r\n\tconst [userDropdown, setUserDropdown] = useState(false);\r\n\r\n\t// modal handlers\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMouseup(wrapperRef, setUserDropdown, null);\r\n\t// close modal on esc key\r\n\tconst keyPress = useCallback(\r\n\t\t(e) => {\r\n\t\t\tif (e.key === 'Escape') {\r\n\t\t\t\tsetUserDropdown(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[setUserDropdown]\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('keydown', keyPress);\r\n\t\treturn () => document.removeEventListener('keydown', keyPress);\r\n\t}, [keyPress]);\r\n\r\n\t// clear user data on logout\r\n\tconst logoutUser = () => {\r\n\t\tdispatch(removeUserData());\r\n\t\tsetUserDropdown(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<nav className='fixed top-0 left-0 z-20 h-full min-h-screen w-16 py-6 px-3 flex flex-col justify-between bg-gray-900 text-gray-400'>\r\n\t\t\t<aside>\r\n\t\t\t\t{navLinks.primaryLinks.map((link, i) => (\r\n\t\t\t\t\t<div key={i} className='first:mt-0 mt-6'>\r\n\t\t\t\t\t\t<NavbarLink link={link} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</aside>\r\n\t\t\t<article>\r\n\t\t\t\t{role === 'admin' ||\r\n\t\t\t\t\t(role === 'master' && (\r\n\t\t\t\t\t\t<nav className='mt-4 flex flex-col'>\r\n\t\t\t\t\t\t\t{navLinks.adminLinks.map((link, i) => (\r\n\t\t\t\t\t\t\t\t<div key={i} className='first:mt-0 mt-6'>\r\n\t\t\t\t\t\t\t\t\t<NavbarLink link={link} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t))}\r\n\t\t\t\t<nav className='mt-4 flex flex-col'>\r\n\t\t\t\t\t{navLinks.secondaryLinks.map((link, i) => (\r\n\t\t\t\t\t\t<div key={i} className='first:mt-0 mt-6'>\r\n\t\t\t\t\t\t\t<NavbarLink link={link} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</nav>\r\n\t\t\t\t<aside className='relative mt-16 text-gray-400'>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetHover(false);\r\n\t\t\t\t\t\t\tsetUserDropdown(!userDropdown ? true : false);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMouseEnter={() => setHover(!userDropdown && true)}\r\n\t\t\t\t\t\tonMouseLeave={() => setHover(false)}\r\n\t\t\t\t\t\tclassName='p-2 h-10 flex items-center justify-center rounded-full bg-purple-100 text-purple-600 shadow-sm hover:shadow-md transition duration-100 ease-in-out ring-purple'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span className='h-6 w-6 text-xl font-bold'>\r\n\t\t\t\t\t\t\t<LeadGeekLogo />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t{hover && (\r\n\t\t\t\t\t\t\t<div className='w-auto mt-2 p-2 absolute left-0 z-40 transform -translate-y-1 translate-x-14 rounded-lg bg-gray-900 shadow-md text-white text-sm text-left whitespace-nowrap'>\r\n\t\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t{userDropdown && (\r\n\t\t\t\t\t\t<div className='relative'>\r\n\t\t\t\t\t\t\t<article\r\n\t\t\t\t\t\t\t\tref={wrapperRef}\r\n\t\t\t\t\t\t\t\tclassName='absolute bottom-0 left-0 z-30 w-64 transform translate-x-16 pt-4 pb-2 rounded-lg bg-white shadow-lg border border-gray-200 text-gray-900'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className='relative'>\r\n\t\t\t\t\t\t\t\t\t<header className='pb-2 px-4 flex items-center justify-between border-b border-gray-200'>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<h5 className='inline-block font-bold text-lg'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trole='img'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label='Waving emoji'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='mr-1'\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t👋\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\tHi, {name?.split(' ')[0] || 'Account'}\r\n\t\t\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t{navLinks.dropdownItems.map((item, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\t\tto={`/${item.link}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='w-full py-2 px-4 flex items-center justify-between hover:bg-gray-100 transition-colors duration-100 ease-in-out focus:outline-none'\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className='font-semibold text-sm text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tkey={'logout'}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => logoutUser()}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='w-full py-2 px-4 flex items-center justify-between hover:bg-gray-100 transition-colors duration-100 ease-in-out focus:outline-none'\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='font-semibold text-sm text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</aside>\r\n\t\t\t</article>\r\n\t\t</nav>\r\n\t);\r\n};\r\n\r\n// primary links\r\nconst navLinks = {\r\n\tprimaryLinks: [\r\n\t\t{\r\n\t\t\ttitle: 'Leads',\r\n\t\t\tlink: '/leads',\r\n\t\t\tpath: (\r\n\t\t\t\t<path d='M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z' />\r\n\t\t\t),\r\n\t\t},\r\n\t],\r\n\tsecondaryLinks: [\r\n\t\t{\r\n\t\t\ttitle: 'Help',\r\n\t\t\tlink: '/help',\r\n\t\t\tpath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t},\r\n\t],\r\n\tadminLinks: [\r\n\t\t{\r\n\t\t\ttitle: 'Admin',\r\n\t\t\tlink: '/admin/',\r\n\t\t\tpath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t},\r\n\t],\r\n\tdropdownItems: [\r\n\t\t{\r\n\t\t\ttitle: 'Settings',\r\n\t\t\tlink: 'settings/security/',\r\n\t\t\tpath: null,\r\n\t\t},\r\n\t],\r\n};\r\n\r\nexport default Navbar;\r\n","import React, { Fragment } from 'react';\r\n\r\n// redux\r\nimport { useAppSelector } from '@utils/hooks';\r\nimport Alert from '@components/features/alert/Alerts';\r\n\r\n// components\r\nimport Navbar from '@components/layout/navigation/Navbar';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\ninterface AuthLayoutProps {\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nconst AuthLayout: React.FC<AuthLayoutProps> = ({ children }) => {\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Alert />\r\n\t\t\t{status === 'idle' && isAuthenticated && user ? (\r\n\t\t\t\t<div className='min-h-screen relative flex'>\r\n\t\t\t\t\t<Navbar />\r\n\t\t\t\t\t<main className='h-full w-full content'>{children}</main>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<Spinner\r\n\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\tcenter={true}\r\n\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\tmargin={false}\r\n\t\t\t\t\ttext={'Loading account...'}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default AuthLayout;\r\n","import React, { useEffect, useRef, useCallback } from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon-business-days';\r\n\r\n// redux\r\nimport { useAppDispatch } from '@utils/hooks';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\nimport { setDateLimit } from '@features/filters/filtersSlice';\r\nimport { setPage } from '@features/leads/leadsSlice';\r\n\r\n// utils\r\nimport { useOutsideMousedown } from '@utils/utils';\r\n\r\ninterface DatePickerProps {\r\n\ttype: string;\r\n\tdate: boolean;\r\n\tsetDate: React.Dispatch<React.SetStateAction<boolean>>;\r\n\tdateCreated: string;\r\n\tlastUpdated: string | null;\r\n}\r\n\r\nconst DatePicker: React.FC<DatePickerProps> = ({\r\n\ttype,\r\n\tdate,\r\n\tsetDate,\r\n\tdateCreated,\r\n\tlastUpdated,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// modal close handlers\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMousedown(wrapperRef, setDate, null);\r\n\t// close modal on esc key\r\n\tconst keyPress = useCallback(\r\n\t\t(e) => {\r\n\t\t\tif (e.key === 'Escape' && date) {\r\n\t\t\t\tsetDate(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[setDate, date]\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('keydown', keyPress);\r\n\t\treturn () => document.removeEventListener('keydown', keyPress);\r\n\t}, [keyPress]);\r\n\r\n\t// set dates\r\n\tconst mostRecentDay = DateTime.fromISO(lastUpdated || DateTime.now());\r\n\tconst previousDay = mostRecentDay.minusBusiness({ days: 1 });\r\n\tconst lastFiveStart = mostRecentDay.minusBusiness({ days: 5 });\r\n\tconst lastFourteenStart = mostRecentDay.minusBusiness({ days: 10 });\r\n\tconst last30Start = mostRecentDay.minusBusiness({ days: 30 });\r\n\tconst lastDay = DateTime.fromISO(dateCreated);\r\n\r\n\t// date options in picker\r\n\tconst dateOptions = [\r\n\t\t{\r\n\t\t\ttitle:\r\n\t\t\t\tmostRecentDay.startOf('day') <= DateTime.now().startOf('day')\r\n\t\t\t\t\t? 'Today'\r\n\t\t\t\t\t: 'Most recent day',\r\n\t\t\tdateString: mostRecentDay.toFormat('LLL dd'),\r\n\t\t\tmin: mostRecentDay,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: mostRecentDay.toISODate(),\r\n\t\t\t\t\t\tmax: null,\r\n\t\t\t\t\t\tselected: mostRecentDay.toFormat('LLL dd, yyyy'),\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle:\r\n\t\t\t\tpreviousDay.startOf('day') <=\r\n\t\t\t\tDateTime.now().minusBusiness({ days: 1 }).startOf('day')\r\n\t\t\t\t\t? 'Yesterday'\r\n\t\t\t\t\t: 'Previous day',\r\n\t\t\tdateString: previousDay.toFormat('LLL dd'),\r\n\t\t\tmin: previousDay,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: previousDay.startOf('day'),\r\n\t\t\t\t\t\tmax: previousDay.endOf('day'),\r\n\t\t\t\t\t\tselected: previousDay.toFormat('LLL dd, yyyy'),\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Last 7 days',\r\n\t\t\tdateString: `${lastFiveStart.toFormat(\r\n\t\t\t\t'LLL dd'\r\n\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\tmin: lastFiveStart,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: lastFiveStart.toISODate(),\r\n\t\t\t\t\t\tmax: null,\r\n\t\t\t\t\t\tselected: `${lastFiveStart.toFormat(\r\n\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Last 14 days',\r\n\t\t\tdateString: `${lastFourteenStart.toFormat(\r\n\t\t\t\t'LLL dd'\r\n\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\tmin: lastFourteenStart,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: lastFourteenStart.toISODate(),\r\n\t\t\t\t\t\tmax: null,\r\n\t\t\t\t\t\tselected: `${lastFourteenStart.toFormat(\r\n\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Last 30 days',\r\n\t\t\tdateString: `${last30Start.toFormat('LLL dd')} - ${mostRecentDay.toFormat(\r\n\t\t\t\t'LLL dd'\r\n\t\t\t)}`,\r\n\t\t\tmin: last30Start,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: last30Start.toISODate(),\r\n\t\t\t\t\t\tmax: mostRecentDay.toISO(),\r\n\t\t\t\t\t\tselected: `${last30Start.toFormat(\r\n\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'All time',\r\n\t\t\tdateString: `${lastDay.toFormat(\r\n\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\tmin: lastDay,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: lastDay.toISODate(),\r\n\t\t\t\t\t\tmax: mostRecentDay.toISO(),\r\n\t\t\t\t\t\tselected: `${lastDay.toFormat(\r\n\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\r\n\tconst validateDateRange = (dateCreated: string, minDate: string) => {\r\n\t\tif (\r\n\t\t\tDateTime.fromISO(dateCreated).startOf('day') <=\r\n\t\t\tDateTime.fromISO(minDate).startOf('day')\r\n\t\t) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSetDate = (\r\n\t\tdateCreated: string,\r\n\t\tminDate: string,\r\n\t\tcb: () => void\r\n\t) => {\r\n\t\tlet validDate = validateDateRange(dateCreated, minDate);\r\n\t\tconsole.log(validDate);\r\n\t\tif (validDate) {\r\n\t\t\tcb();\r\n\t\t\tsetPage({ page: 1, type });\r\n\t\t\treturn setDate(false);\r\n\t\t} else {\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Invalid date range',\r\n\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t'This date range is older than your Leadgeek account. Please select a valid date range.',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<article\r\n\t\t\tref={wrapperRef}\r\n\t\t\tclassName='absolute top-0 right-0 z-10 w-64 transform translate-y-12 -translate-x-72 pt-4 pb-2 rounded-lg bg-white shadow-lg border border-gray-200 text-gray-900'\r\n\t\t>\r\n\t\t\t<div className='relative'>\r\n\t\t\t\t<header className='pb-2 px-4 flex items-center justify-between border-b border-gray-200'>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h5 className='inline-block font-bold text-lg'>Date picker</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t{dateOptions.map((dateOption, i) => (\r\n\t\t\t\t\t\t<li key={i} className='list-none'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\thandleSetDate(\r\n\t\t\t\t\t\t\t\t\t\tdateCreated,\r\n\t\t\t\t\t\t\t\t\t\tdateOption.min,\r\n\t\t\t\t\t\t\t\t\t\tdateOption.onClick\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={`${\r\n\t\t\t\t\t\t\t\t\tvalidateDateRange(dateCreated, dateOption.min)\r\n\t\t\t\t\t\t\t\t\t\t? 'hover:bg-gray-100'\r\n\t\t\t\t\t\t\t\t\t\t: 'opacity-25 cursor-default'\r\n\t\t\t\t\t\t\t\t} w-full py-2 px-4 flex items-center justify-between transition-colors duration-100 ease-in-out focus:outline-none`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span className='font-semibold text-sm text-gray-700'>\r\n\t\t\t\t\t\t\t\t\t{dateOption.title}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className='text-sm text-gray-600'>\r\n\t\t\t\t\t\t\t\t\t{dateOption.dateString}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t);\r\n};\r\n\r\nexport default DatePicker;\r\n","import React, {\r\n\tFragment,\r\n\tuseRef,\r\n\tuseEffect,\r\n\tuseCallback,\r\n\tuseState,\r\n} from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon';\r\nimport ReactImageMagnify from 'react-image-magnify';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@utils/hooks';\r\nimport {\r\n\tclearCurrentLead,\r\n\thandleLikeLead,\r\n\thandleArchiveLead,\r\n\taddComment,\r\n} from '@features/leads/leadsSlice';\r\n\r\n// components\r\nimport Button from '@components/utils/Button';\r\n\r\n// utils\r\nimport {\r\n\tcalculateBSR,\r\n\tnumberWithCommas,\r\n\topenLinkHandler,\r\n\treturnDomainFromUrl,\r\n\ttruncate,\r\n} from '@utils/utils';\r\nimport { Lead } from '@utils/interfaces/leads/Lead';\r\n\r\ninterface DetailsProps {\r\n\tcurrentLead: Lead;\r\n\tuserId: string;\r\n\tliked: Lead[];\r\n\tarchived: Lead[];\r\n\tcomments: {\r\n\t\tdate: string;\r\n\t\tleadId: string;\r\n\t\tcomment: string;\r\n\t}[];\r\n\tshowDetails: boolean;\r\n\tsetShowDetails: React.Dispatch<boolean>;\r\n}\r\n\r\nconst Details: React.FC<DetailsProps> = ({\r\n\tcurrentLead,\r\n\tuserId,\r\n\tliked,\r\n\tarchived,\r\n\tcomments,\r\n\tshowDetails,\r\n\tsetShowDetails,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// redux selectors\r\n\tconst unitFee = useAppSelector((state) => state.filters.prep.unit);\r\n\tconst lbFee = useAppSelector((state) => state.filters.prep.lb);\r\n\r\n\t// local state\r\n\tconst [comment, setComment] = useState('');\r\n\tconst [copiedText, setCopiedText] = useState(false);\r\n\tconst [copyText, setCopyText] = useState(false);\r\n\tconst [fullTitle, toggleFullTitle] = useState(false);\r\n\tconst [identifyingText, setIdentifyingText] = useState('');\r\n\tconst [noteCount, setNoteCount] = useState(0);\r\n\tconst [overviewActive, setOverviewActive] = useState(true);\r\n\r\n\t// descructure necessary items\r\n\tconst { data } = currentLead;\r\n\r\n\t// prevent scroll while active\r\n\tuseEffect(() => {\r\n\t\tdocument.body.style.overflow = 'hidden';\r\n\t\treturn () => {\r\n\t\t\tdocument.body.style.overflow = 'unset';\r\n\t\t};\r\n\t}, []);\r\n\r\n\t// close modal on click outside\r\n\tconst modalRef = useRef();\r\n\tconst closeModal = (e: React.MouseEvent<HTMLDivElement>) => {\r\n\t\tif (modalRef.current === e.target) {\r\n\t\t\tsetShowDetails(false);\r\n\t\t}\r\n\t};\r\n\t// close modal on esc key\r\n\tconst keyPress = useCallback(\r\n\t\t(e) => {\r\n\t\t\tif (e.key === 'Escape' && showDetails) {\r\n\t\t\t\tsetShowDetails(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[setShowDetails, showDetails]\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('keydown', keyPress);\r\n\t\treturn () => document.removeEventListener('keydown', keyPress);\r\n\t}, [keyPress]);\r\n\r\n\t// like/archive/comment handlers\r\n\tconst [like, setLike] = useState(\r\n\t\tliked.some((lead) => lead._id === currentLead._id) ? true : false\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tif (liked.some((lead) => lead._id === currentLead._id)) {\r\n\t\t\tsetLike(true);\r\n\t\t} else {\r\n\t\t\tsetLike(false);\r\n\t\t}\r\n\t}, [liked, currentLead._id]);\r\n\tconst [archive, setArchive] = useState(\r\n\t\tarchived.some((lead) => lead._id === currentLead._id) ? true : false\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tif (archived.some((lead) => lead._id === currentLead._id)) {\r\n\t\t\tsetArchive(true);\r\n\t\t} else {\r\n\t\t\tsetArchive(false);\r\n\t\t}\r\n\t}, [archived, currentLead._id]);\r\n\tuseEffect(() => {\r\n\t\tconst hasComment = comments.filter(\r\n\t\t\t(comment) => comment.leadId === currentLead._id\r\n\t\t);\r\n\t\tif (hasComment.length > 0) {\r\n\t\t\tsetComment(hasComment[0].comment);\r\n\t\t} else {\r\n\t\t\tsetComment('');\r\n\t\t}\r\n\t}, [liked]);\r\n\r\n\t// primary links in details header\r\n\tconst primaryLinks = [\r\n\t\t{ title: 'Overview', onClick: () => setOverviewActive(true) },\r\n\t];\r\n\r\n\t// buttons in details header\r\n\tconst primaryButtons = [\r\n\t\t{\r\n\t\t\tactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tdisabledPath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tonClick: () =>\r\n\t\t\t\tdispatch(handleLikeLead({ userId, leadId: currentLead._id })),\r\n\t\t\tstate: like,\r\n\t\t\tdescription: <span>{like ? 'Unlike this lead' : 'Like this lead'}</span>,\r\n\t\t\tlast: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\tactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\td='M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tdisabledPath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\td='M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tonClick: () =>\r\n\t\t\t\tdispatch(handleArchiveLead({ userId, leadId: currentLead._id })),\r\n\t\t\tstate: archive,\r\n\t\t\tdescription: (\r\n\t\t\t\t<span>{archive ? 'Unarchive this lead' : 'Archive this lead'}</span>\r\n\t\t\t),\r\n\t\t\tlast: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\tactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tdisabledPath: null,\r\n\t\t\tonClick: () => openLinkHandler(data.retailerLink, data.amzLink),\r\n\t\t\tstate: null,\r\n\t\t\tdescription: <span>Open both links</span>,\r\n\t\t\tlast: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\tactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tdisabledPath: null,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(clearCurrentLead());\r\n\t\t\t\tsetShowDetails(false);\r\n\t\t\t},\r\n\t\t\tstate: null,\r\n\t\t\tdescription: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<span>Close details</span>\r\n\t\t\t\t\t<span className='ml-2 p-0.5 bg-gray-100 rounded-md font-semibold text-gray-600 text-xs'>\r\n\t\t\t\t\t\tEsc\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t\tlast: true,\r\n\t\t},\r\n\t];\r\n\r\n\t// primary metrics on right side of details popup\r\n\tconst primaryMetrics = [\r\n\t\t{\r\n\t\t\ttitle: 'Net profit',\r\n\t\t\tvalue: `$${(\r\n\t\t\t\tdata.netProfit - (unitFee || (lbFee ? lbFee * data.weight : 0))\r\n\t\t\t).toFixed(2)}`,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Return on investment',\r\n\t\t\tvalue: `${(\r\n\t\t\t\t((+data.netProfit.toFixed(2) -\r\n\t\t\t\t\t(unitFee || (lbFee ? lbFee * data.weight : 0))) /\r\n\t\t\t\t\t+data.buyPrice.toFixed(2)) *\r\n\t\t\t\t100\r\n\t\t\t).toFixed(0)}%`,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Estimated sales',\r\n\t\t\tvalue: `${numberWithCommas(data.monthlySales)} /mo.`,\r\n\t\t},\r\n\t];\r\n\r\n\t// set date\r\n\tconst date = DateTime.fromISO(data.date).toFormat('LLL dd, H:mm');\r\n\r\n\t// set notes & handlers\r\n\tconst notes: (string | null)[] = [\r\n\t\tdata.promo,\r\n\t\tdata.cashback,\r\n\t\tdata.variations,\r\n\t\tdata.shipping,\r\n\t];\r\n\tconst checkNotes = () => {\r\n\t\tsetNoteCount(notes.filter((note) => note !== '').length);\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tif (currentLead) {\r\n\t\t\tcheckNotes();\r\n\t\t}\r\n\t}, [currentLead]);\r\n\r\n\t// set ASIN/ISBN identifying text\r\n\tuseEffect(() => {\r\n\t\tif (data.asin.startsWith('B', 0)) {\r\n\t\t\tsetIdentifyingText('ASIN');\r\n\t\t} else {\r\n\t\t\tsetIdentifyingText('ISBN');\r\n\t\t}\r\n\t}, [identifyingText, data.asin]);\r\n\r\n\t// change handler for comments\r\n\tconst onChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n\t\tsetComment(e.target.value);\r\n\t};\r\n\r\n\tconst descriptorClasses = 'flex justify-between';\r\n\tconst linkClasses = 'font-semibold text-purple-600 hover:text-gray-700';\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<div\r\n\t\t\t\t// ref={modalRef}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\tcloseModal(e);\r\n\t\t\t\t\tdispatch(clearCurrentLead());\r\n\t\t\t\t\tsetShowDetails(false);\r\n\t\t\t\t}}\r\n\t\t\t\tclassName='absolute inset-0 z-10 h-full w-full bg-gray-900 opacity-25'\r\n\t\t\t/>\r\n\t\t\t<div className='fixed top-0 right-0 z-20 w-full max-w-2xl transform translate-y-16 -translate-x-32'>\r\n\t\t\t\t<div className='relative z-40 p-6 rounded-lg shadow-xl bg-white opacity-100'>\r\n\t\t\t\t\t<header className='flex items-center justify-between border-b border-gray-200'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{primaryLinks.map((link, i) => (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\tonClick={link.onClick}\r\n\t\t\t\t\t\t\t\t\tclassName={`${\r\n\t\t\t\t\t\t\t\t\t\toverviewActive &&\r\n\t\t\t\t\t\t\t\t\t\t'text-purple-500 hover:text-purple-500 border-b-2 border-purple-600'\r\n\t\t\t\t\t\t\t\t\t} pb-2 first:ml-0 ml-10 font-semibold text-lg text-gray-600 hover:text-gray-700 transition-colors duration-100 ease-in-out`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{link.title}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='flex items-center justify-between'>\r\n\t\t\t\t\t\t\t<div className='flex items-center text-gray-400'>\r\n\t\t\t\t\t\t\t\t{primaryButtons.map((button, i) => (\r\n\t\t\t\t\t\t\t\t\t<HeaderButton\r\n\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\tactivePath={button.activePath}\r\n\t\t\t\t\t\t\t\t\t\tdisabledPath={button.disabledPath}\r\n\t\t\t\t\t\t\t\t\t\tonClick={button.onClick}\r\n\t\t\t\t\t\t\t\t\t\tstate={button.state}\r\n\t\t\t\t\t\t\t\t\t\tdescription={button.description}\r\n\t\t\t\t\t\t\t\t\t\tlast={button.last}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t{/* overview page */}\r\n\t\t\t\t\t{overviewActive && (\r\n\t\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className='flex justify-between'>\r\n\t\t\t\t\t\t\t\t\t<div className='w-1/3 z-40 bg-white'>\r\n\t\t\t\t\t\t\t\t\t\t<ReactImageMagnify\r\n\t\t\t\t\t\t\t\t\t\t\t{...{\r\n\t\t\t\t\t\t\t\t\t\t\t\tsmallImage: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\talt: data.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tisFluidWidth: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc: data.img,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: 200,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tlargeImage: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\talt: data.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc: data.img,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 600,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: 600,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tenlargedImageContainerDimensions: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '200%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: '200%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'bg-white',\r\n\t\t\t\t\t\t\t\t\t\t\t\tenlargedImageContainerClassName:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'bg-white rounded-lg shadow-xl border border-gray-200',\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<header className='relative w-2/3 ml-8'>\r\n\t\t\t\t\t\t\t\t\t\t<h3\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => toggleFullTitle(true)}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={() => toggleFullTitle(false)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='inline-block font-bold text-lg text-gray-900'\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{truncate(data.title, 40)}\r\n\t\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t\t{fullTitle && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='absolute top-0 mt-2 mr-6 p-2 transform translate-y-6 rounded-md shadow-md bg-gray-900 text-white text-xs'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{data.title}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t<div className='flex items-center mt-2 text-sm text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>{date}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='h-1 w-1 ml-2 rounded-full bg-gray-400' />\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='ml-2'>{data.brand}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='h-1 w-1 ml-2 rounded-full bg-gray-400' />\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='ml-2'>{truncate(data.category, 21)}</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t\t\t\t\t\t<header className='mt-4 pb-2 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h4 className='font-semibold text-gray-900'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tPrimary metrics\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t{primaryMetrics.map((metric, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<PrimaryMetric\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={metric.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={metric.value}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<article className='mt-4'>\r\n\t\t\t\t\t\t\t\t\t<header className='mt-4 pb-2 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t\t\t\t<h4 className='font-semibold text-gray-900'>\r\n\t\t\t\t\t\t\t\t\t\t\tDetailed metrics\r\n\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t<div className='grid grid-cols-2 grid-rows-4 gap-y-2 gap-x-6 mt-4 text-sm text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\t<div className={descriptorClasses}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>Source</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={data.retailerLink}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={linkClasses}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{data.source || '-'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className={descriptorClasses}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>Buy price</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>{`$${data.buyPrice.toFixed(2) || '-'}`}</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className={`${descriptorClasses} relative`}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>{identifyingText}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{data.asin ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`https://sellercentral.amazon.com/product-search/search?q=${data.asin}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`${data.asin && linkClasses}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{data.asin}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>-</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{data.asin && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='relative'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex items-center justify-center'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => setCopyText(true)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={() => setCopyText(false)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigator.clipboard.writeText(data.asin);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCopiedText(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCopiedText(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='ml-2 text-gray-400 hover:text-gray-600 rounded-sm transition duration-100 ease-in-out ring-gray'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='h-4 w-4'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path d='M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path d='M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t{(copyText || copiedText) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='absolute right-0 flex items-center p-2 transform -translate-y-10 translate-x-5 rounded-lg shadow-md bg-gray-900 text-white text-xs'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{copiedText && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='h-4 w-4 text-teal-300'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={copiedText ? 'ml-1' : ''}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{copiedText\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? `${identifyingText} copied`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: `Copy ${identifyingText}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className={descriptorClasses}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>Sell price</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>{`$${data.sellPrice.toFixed(2) || '-'}`}</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className={descriptorClasses}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>Competiton</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className='text-gray-500'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{data.competitorCount > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`(${data.competitorCount})`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className='ml-1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{data.competitorType || '-'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className={descriptorClasses}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>Current BSR</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>{numberWithCommas(data.bsrCurrent) || '-'}</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className={descriptorClasses}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>Weight</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{data.weight ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{data.weight.toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='ml-1 text-gray-500'>lb</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>-</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className={descriptorClasses}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>BSR %</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{data.bsrCurrent && data.category && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{calculateBSR(data.bsrCurrent, data.category)}%\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t\t<section className='flex justify-between mt-4'>\r\n\t\t\t\t\t\t\t\t\t{/* Notes section */}\r\n\t\t\t\t\t\t\t\t\t<article className='w-1/3 text-gray-900'>\r\n\t\t\t\t\t\t\t\t\t\t<header className='flex items-center pb-2 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t<h4 className='font-semibold'>Notes</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`${'bg-gray-100 border border-gray-200 text-gray-600  ml-2 py-1 px-2 rounded-lg shadow-sm text-xs'}`}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{noteCount}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t<div className='grid grid-flow-row gap-x-4 mt-3 text-sm'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Note\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription={data.cashback}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlink={returnDomainFromUrl(data.retailerLink)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tnullState={'No applicable cashback'}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Note\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription={data.promo}\r\n\t\t\t\t\t\t\t\t\t\t\t\tnullState={'No applicable promos'}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Note\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription={data.shipping}\r\n\t\t\t\t\t\t\t\t\t\t\t\tnullState={'No shipping notes'}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Note\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription={data.notes}\r\n\t\t\t\t\t\t\t\t\t\t\t\tnullState={'No seller notes'}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Note\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription={data.variations}\r\n\t\t\t\t\t\t\t\t\t\t\t\tnullState={'No variation notes'}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t\t\t{/* comment section */}\r\n\t\t\t\t\t\t\t\t\t<article className='ml-8 w-2/3 text-gray-900'>\r\n\t\t\t\t\t\t\t\t\t\t<header className='flex items-center pb-2 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t<h4 className='font-semibold border border-transparent'>\r\n\t\t\t\t\t\t\t\t\t\t\t\tComments\r\n\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t<form className='mt-3 text-sm'>\r\n\t\t\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\t\t\tname='comment'\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Add a comment to this lead...'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={comment}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='h-20 w-full rounded-lg border border-gray-200 text-sm ring-purple'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='flex items-center justify-end'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext={'Comment'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taddComment({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomment,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tleadId: currentLead._id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcta={comment ? true : false}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\ninterface HeaderButtonProps {\r\n\tactivePath: JSX.Element;\r\n\tdisabledPath: JSX.Element | null;\r\n\tonClick: () => void;\r\n\tstate: boolean | null;\r\n\tdescription: JSX.Element;\r\n\tlast: boolean;\r\n}\r\n\r\nconst HeaderButton: React.FC<HeaderButtonProps> = ({\r\n\tactivePath,\r\n\tdisabledPath,\r\n\tonClick,\r\n\tstate,\r\n\tdescription,\r\n\tlast,\r\n}) => {\r\n\t// local state\r\n\tconst [hover, setHover] = useState(false);\r\n\r\n\treturn (\r\n\t\t<button\r\n\t\t\tonMouseEnter={() => setHover(true)}\r\n\t\t\tonMouseLeave={() => setHover(false)}\r\n\t\t\tonClick={() => onClick()}\r\n\t\t\tclassName={`relative ml-2 p-1 hover:bg-gray-100 rounded-md ${\r\n\t\t\t\tstate && 'text-purple-600'\r\n\t\t\t} hover:text-gray-700 ring-gray transition duration-100 ease-in-out`}\r\n\t\t>\r\n\t\t\t{state || !disabledPath ? (\r\n\t\t\t\t<div className='flex items-center justify-center'>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\tstroke={state ? 'currentColor' : ''}\r\n\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{activePath}\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className='flex items-center justify-center'>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tfill='none'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tstroke='currentColor'\r\n\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{disabledPath}\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{hover && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={`absolute top-0 ${\r\n\t\t\t\t\t\tlast ? 'right-0 translate-x-6' : 'left-1/2 -translate-x-1/2'\r\n\t\t\t\t\t}  z-10 min-w-max mt-2 mr-6 p-2 transform translate-y-6 rounded-md shadow-md bg-gray-900 text-left text-white text-xs`}\r\n\t\t\t\t>\r\n\t\t\t\t\t{description}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\ninterface PrimaryMetricProps {\r\n\ttitle: string;\r\n\tvalue: string;\r\n}\r\n\r\nconst PrimaryMetric: React.FC<PrimaryMetricProps> = ({ title, value }) => {\r\n\treturn (\r\n\t\t<div className='first:mt-0 mt-1 flex items-end justify-between'>\r\n\t\t\t<div className='text-sm text-gray-800'>{title}</div>\r\n\t\t\t<div className='py-1 px-2 rounded-lg bg-gray-900 font-semibold text-xs text-white shadow-sm hover:shadow-md transition duration-100 ease-in-out'>\r\n\t\t\t\t{value}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ninterface NoteProps {\r\n\tdescription: string;\r\n\tnullState: string;\r\n\tlink?: string;\r\n}\r\n\r\nconst Note: React.FC<NoteProps> = ({ description, nullState, link }) => {\r\n\treturn (\r\n\t\t<div className='py-1'>\r\n\t\t\t{description && link ? (\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={`https://www.rakuten.com/${link}`}\r\n\t\t\t\t\ttarget='__blank'\r\n\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\tclassName='py-1 px-2 rounded-lg bg-purple-500 border border-purple-500 text-xs text-white shadow-sm hover:bg-purple-600 hover:shadow-md transition duration-100 ease-in-out'\r\n\t\t\t\t>\r\n\t\t\t\t\t{description}\r\n\t\t\t\t</a>\r\n\t\t\t) : description ? (\r\n\t\t\t\t<div className='inline-block py-1 px-2 rounded-lg bg-gray-900 border border-gray-900 text-xs text-white shadow-sm'>\r\n\t\t\t\t\t{description}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className='inline-block py-1 px-2 rounded-lg bg-gray-100 border border-gray-200 text-xs text-gray-600'>\r\n\t\t\t\t\t{nullState}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Details;\r\n","import React from 'react';\r\n\r\nimport { DateTime } from 'luxon';\r\nimport { CSVLink } from 'react-csv';\r\n\r\nimport { User } from '@utils/interfaces/User';\r\nimport { Lead } from '@utils/interfaces/leads/Lead';\r\n\r\ninterface ExportButtonProps {\r\n\tuser: User;\r\n\tleads: Lead[];\r\n\tsetExportLeads: any;\r\n}\r\n\r\nconst ExportButton: React.FC<ExportButtonProps> = ({\r\n\tuser,\r\n\tleads,\r\n\tsetExportLeads,\r\n}) => {\r\n\tconst currentLocalDate = DateTime.now().setLocale('el').toLocaleString();\r\n\tconst headers = [\r\n\t\t{ label: 'Source', key: 'data.source' },\r\n\t\t{ label: 'Title', key: 'data.title' },\r\n\t\t{ label: 'Brand', key: 'data.brand' },\r\n\t\t{ label: 'Category', key: 'data.category' },\r\n\t\t{ label: 'Retailer Source', key: 'data.retailerLink' },\r\n\t\t{ label: 'Amazon Link', key: 'data.amzLink' },\r\n\t\t{ label: 'Promo Code', key: 'data.promo' },\r\n\t\t{ label: 'Buy Price', key: 'data.buyPrice' },\r\n\t\t{ label: 'Sell Price', key: 'data.sellPrice' },\r\n\t\t{ label: 'Profit', key: 'data.netProfit' },\r\n\t\t{ label: 'ROI', key: 'data.roi' },\r\n\t\t{ label: 'Current BSR', key: 'data.bsrCurrent' },\r\n\t\t{ label: 'Avg Mo. Sales', key: 'data.monthlySales' },\r\n\t\t{ label: '30 Day BSR', key: 'data.bsr30' },\r\n\t\t{ label: '90 Day BSR', key: 'data.bsr90' },\r\n\t\t{ label: 'Seller competition', key: 'data.competitorType' },\r\n\t\t{ label: 'Seller count', key: 'data.competitorCount' },\r\n\t\t{ label: '30 Day Price', key: 'data.price30' },\r\n\t\t{ label: '90 Day Price', key: 'data.price90' },\r\n\t\t{ label: 'Variation Suggestions', key: 'data.variations' },\r\n\t\t{ label: 'Cashback Discounts', key: 'data.cashback' },\r\n\t\t{ label: 'Item Weight (lb)', key: 'data.weight' },\r\n\t\t{ label: 'ASIN', key: 'data.asin' },\r\n\t\t{ label: 'Shipping Notes', key: 'data.shipping' },\r\n\t\t{ label: 'Seller Notes', key: 'data.notes' },\r\n\t\t{ label: 'Date', key: 'data.date' },\r\n\t];\r\n\treturn (\r\n\t\t<CSVLink\r\n\t\t\tdata={leads}\r\n\t\t\theaders={headers}\r\n\t\t\tonClick={() => setExportLeads(false)}\r\n\t\t\tfilename={`${user.role || 'leadgeek'}_plan_leads_${currentLocalDate}.csv`}\r\n\t\t\ttarget='_blank'\r\n\t\t\tclassName='ml-4 py-2 px-3 flex items-center rounded-lg bg-purple-500 text-white shadow-sm hover:shadow-md text-sm font-semibold hover:bg-purple-600 transition duration-100 ease-in-out ring-purple'\r\n\t\t>\r\n\t\t\t<span>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tfill='none'\r\n\t\t\t\t\tviewBox='0 0 24 24'\r\n\t\t\t\t\tstroke='currentColor'\r\n\t\t\t\t\tclassName='h-4 w-4'\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\td='M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</span>\r\n\t\t\t<span className='ml-2'>Confirm</span>\r\n\t\t</CSVLink>\r\n\t);\r\n};\r\n\r\nexport default ExportButton;\r\n","import React, { useRef } from 'react';\r\n\r\n// utils\r\nimport { useOutsideMousedown } from '@utils/utils';\r\n\r\ntype GenericObject = { [key: string]: any };\r\n\r\ninterface Option {\r\n\ttype?: string;\r\n\ttitle: string;\r\n\tvalue?: string;\r\n}\r\n\r\ninterface SelectComponentProps {\r\n\ttitle: string;\r\n\toptions: Option[];\r\n\tselectedOption: string | number;\r\n\topenState: boolean;\r\n\tsetOpenState: React.Dispatch<React.SetStateAction<boolean>>;\r\n\thandleClick(obj: GenericObject | string): void;\r\n}\r\n\r\nconst SelectComponent: React.FC<SelectComponentProps> = ({\r\n\ttitle,\r\n\toptions,\r\n\tselectedOption,\r\n\topenState,\r\n\tsetOpenState,\r\n\thandleClick,\r\n}) => {\r\n\t// close select handlers\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMousedown(wrapperRef, setOpenState, null);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={wrapperRef}\r\n\t\t\tclassName='relative flex items-center shadow-sm rounded-lg text-sm'\r\n\t\t>\r\n\t\t\t<div className='w-16 py-2 px-2 bg-gray-100 rounded-l-lg font-semibold text-center text-gray-700 border border-gray-200'>\r\n\t\t\t\t{title}\r\n\t\t\t</div>\r\n\t\t\t<button\r\n\t\t\t\ttype='button'\r\n\t\t\t\tclassName='relative w-full pl-2 pr-10 py-2 bg-white border-t border-b border-r border-gray-200 rounded-r-lg text-left cursor-default ring-purple ring-inset'\r\n\t\t\t\taria-haspopup='listbox'\r\n\t\t\t\taria-expanded='true'\r\n\t\t\t\taria-labelledby='listbox-label'\r\n\t\t\t\tonClick={() => (openState ? setOpenState(false) : setOpenState(true))}\r\n\t\t\t>\r\n\t\t\t\t<span className='flex items-center'>\r\n\t\t\t\t\t<span className='ml-2 block truncate'>{selectedOption}</span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className='ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none'>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\tclassName='h-4 w-4 text-gray-400'\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\taria-hidden='true'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\td='M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z'\r\n\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t\t{openState && (\r\n\t\t\t\t<ul\r\n\t\t\t\t\tclassName='absolute top-0 right-0 z-10 max-h-56 w-full mt-1 py-1 bg-white border border-gray-200 shadow-md rounded-lg text-sm overflow-auto focus:outline-none transform translate-y-10 minimal-scrollbar'\r\n\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\trole='listbox'\r\n\t\t\t\t\taria-labelledby='listbox-label'\r\n\t\t\t\t\taria-activedescendant='listbox-option-3'\r\n\t\t\t\t>\r\n\t\t\t\t\t{options.map((option, i) => (\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\tclassName={`py-2 pl-3 pr-9 cursor-default select-none relative ${\r\n\t\t\t\t\t\t\t\tselectedOption === option.title\r\n\t\t\t\t\t\t\t\t\t? 'bg-purple-500 hover:bg-purple-600 text-white'\r\n\t\t\t\t\t\t\t\t\t: 'bg-white hover:bg-gray-100 text-gray-900'\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\tid={`listbox-option-${i}`}\r\n\t\t\t\t\t\t\trole='option'\r\n\t\t\t\t\t\t\taria-selected='true'\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\thandleClick(option);\r\n\t\t\t\t\t\t\t\tsetOpenState(false);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{option.title}\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ul>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SelectComponent;\r\n","import React, { useState, useRef, useEffect, useCallback } from 'react';\r\n\r\n// redux\r\nimport { useAppSelector, useAppDispatch } from '@utils/hooks';\r\nimport { removeAllAlerts, setAlert } from '@features/alert/alertSlice';\r\nimport {\r\n\tclearFilter,\r\n\tclearFilters,\r\n\tcreateFilter,\r\n} from '@features/filters/filtersSlice';\r\nimport { getFeedLeads } from '@features/leads/leadsSlice';\r\n\r\n// components\r\nimport Button from '@components/utils/Button';\r\nimport SelectComponent from '@components/utils/Select';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport { numberWithCommas, useOutsideMousedown } from '@utils/utils';\r\nimport {\r\n\tFilter,\r\n\tFilterOperators,\r\n\tFilterTitles,\r\n\tFilterTypes,\r\n} from '@utils/interfaces/Filter';\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ntype NumericOrTextStrings = 'numeric' | 'text';\r\n\r\ninterface FilterComponentProps {\r\n\tfilterActive: boolean;\r\n\tsetFilterActive: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst FilterComponent: React.FC<FilterComponentProps> = ({\r\n\tfilterActive,\r\n\tsetFilterActive,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// alert state\r\n\tconst alert = useAppSelector((state) => state.alert);\r\n\t// auth state\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\t// local state\r\n\tconst [addFilter, setAddFilter] = useState(false);\r\n\tconst [categoryActive, setCategoryActive] = useState(false);\r\n\tconst [filter, setFilter] = useState<{\r\n\t\ttypeIs: {\r\n\t\t\ttype: 'numeric' | 'text';\r\n\t\t\ttitle: FilterTitles;\r\n\t\t\tvalue: FilterTypes;\r\n\t\t};\r\n\t\tvalueIs: {\r\n\t\t\ttype: string;\r\n\t\t\ttitle: string;\r\n\t\t\tvalue: FilterOperators;\r\n\t\t};\r\n\t\tvalue: string | number;\r\n\t}>({\r\n\t\ttypeIs: {\r\n\t\t\ttype: typeOptions[0].type,\r\n\t\t\ttitle: typeOptions[0].title,\r\n\t\t\tvalue: typeOptions[0].value,\r\n\t\t},\r\n\t\tvalueIs: {\r\n\t\t\ttype: '',\r\n\t\t\ttitle:\r\n\t\t\t\ttypeOptions[0].type === 'numeric'\r\n\t\t\t\t\t? numericValueOptions[0].title\r\n\t\t\t\t\t: textValueOptions[0].title,\r\n\t\t\tvalue:\r\n\t\t\t\ttypeOptions[0].type === 'numeric'\r\n\t\t\t\t\t? numericValueOptions[0].value\r\n\t\t\t\t\t: textValueOptions[0].value,\r\n\t\t},\r\n\t\tvalue: '',\r\n\t});\r\n\tconst [filterDescription, setFilterDescription] = useState(false);\r\n\tconst [typeActive, setTypeActive] = useState(false);\r\n\tconst [valueActive, setValueActive] = useState(false);\r\n\r\n\t// close modal handlers\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMousedown(wrapperRef, setFilterActive, null);\r\n\t// close modal on esc key\r\n\tconst keyPress = useCallback(\r\n\t\t(e) => {\r\n\t\t\tif (e.key === 'Escape' && filterActive) {\r\n\t\t\t\tsetFilterActive(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[setFilterActive, filterActive]\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('keydown', keyPress);\r\n\t\treturn () => document.removeEventListener('keydown', keyPress);\r\n\t}, [keyPress]);\r\n\r\n\tconst handleClearFilters = () => {\r\n\t\tlet keysToRemove = [\r\n\t\t\t'netProfitMin',\r\n\t\t\t'netProfitMax',\r\n\t\t\t'buyPriceMin',\r\n\t\t\t'buyPriceMax',\r\n\t\t\t'sellPriceMin',\r\n\t\t\t'sellPriceMax',\r\n\t\t\t'roiMin',\r\n\t\t\t'roiMax',\r\n\t\t\t'bsrMin',\r\n\t\t\t'bsrMax',\r\n\t\t\t'monthlySalesMin',\r\n\t\t\t'monthlySalesMax',\r\n\t\t\t'weightMin',\r\n\t\t\t'weightMax',\r\n\t\t\t'filterCount',\r\n\t\t];\r\n\t\tkeysToRemove.forEach((key) => localStorage.removeItem(key));\r\n\t\tdispatch(clearFilters());\r\n\t\tsetFilterActive(false);\r\n\t\tuser &&\r\n\t\t\tdispatch(\r\n\t\t\t\tgetFeedLeads({\r\n\t\t\t\t\tuser: {\r\n\t\t\t\t\t\tid: user._id,\r\n\t\t\t\t\t\trole: user.role,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tfilters: {\r\n\t\t\t\t\t\t...filters,\r\n\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\tfilters: [],\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\treturn dispatch(\r\n\t\t\tsetAlert({\r\n\t\t\t\ttitle: 'All filters were removed',\r\n\t\t\t\tmessage: 'Unfiltered leads are now showing.',\r\n\t\t\t\talertType: 'success',\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleFilterSubmit = (user: User) => {\r\n\t\t// make sure an empty string isn't being passed as a value\r\n\t\tif (!filter.value) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Error creating filter',\r\n\t\t\t\t\tmessage: 'Please enter a valid number',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// fn returns the current min or max value of a specified filter if it exists\r\n\t\tconst getFilterValue = (type: string, operator: 'gte' | 'lte') => {\r\n\t\t\tconst maxFilter = filters.filters.filter(\r\n\t\t\t\t(filter: Filter) => filter.type === type && filter.operator === operator\r\n\t\t\t)[0];\r\n\r\n\t\t\tif (maxFilter) {\r\n\t\t\t\treturn maxFilter.value;\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// validation for all numeric filters\r\n\t\tif (filter.typeIs.type === 'numeric') {\r\n\t\t\t// check for creating a new max/lte filter\r\n\t\t\tif (filter.valueIs.value === 'lte') {\r\n\t\t\t\t// get the current minimum filter if one exists\r\n\t\t\t\tconst minFilter = getFilterValue(filter.typeIs.value, 'gte');\r\n\t\t\t\t// make sure the min filter isn't larger than the max filter trying to be applied\r\n\t\t\t\tif (minFilter && minFilter >= filter.value) {\r\n\t\t\t\t\treturn dispatch(\r\n\t\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\t\ttitle: 'Error creating filter',\r\n\t\t\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\t\t\"The maximum filter can't be smaller than the current minimum filter\",\r\n\t\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// check for creating a new min/gte filter\r\n\t\t\t\t// get the current maximum filter if one exists\r\n\t\t\t\tconst maxFilter = getFilterValue(filter.typeIs.value, 'lte');\r\n\t\t\t\t// make sure the max filter isn't smaller than the current min filter trying to be applied\r\n\t\t\t\tif (maxFilter && maxFilter <= filter.value) {\r\n\t\t\t\t\treturn dispatch(\r\n\t\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\t\ttitle: 'Error creating filter',\r\n\t\t\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\t\t\"The minimum filter can't be larger than the current maximum filter\",\r\n\t\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// check if there's an alert\r\n\t\tif (alert.length > 0) {\r\n\t\t\t// clear all alerts if we've made it past the checks\r\n\t\t\tdispatch(removeAllAlerts());\r\n\t\t}\r\n\r\n\t\t// create the filter\r\n\t\tdispatch(\r\n\t\t\tcreateFilter(\r\n\t\t\t\tfilter.typeIs.value,\r\n\t\t\t\tfilter.typeIs.title,\r\n\t\t\t\tfilter.valueIs.value,\r\n\t\t\t\tfilter.value\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t\t// reset local filter state\r\n\t\tsetFilter({\r\n\t\t\t...filter,\r\n\t\t\ttypeIs: {\r\n\t\t\t\ttype: typeOptions[0].type,\r\n\t\t\t\ttitle: typeOptions[0].title,\r\n\t\t\t\tvalue: typeOptions[0].value,\r\n\t\t\t},\r\n\t\t\tvalueIs: {\r\n\t\t\t\ttype: '',\r\n\t\t\t\ttitle:\r\n\t\t\t\t\ttypeOptions[0].type === 'numeric'\r\n\t\t\t\t\t\t? numericValueOptions[0].title\r\n\t\t\t\t\t\t: textValueOptions[0].title,\r\n\t\t\t\tvalue:\r\n\t\t\t\t\ttypeOptions[0].type === 'numeric'\r\n\t\t\t\t\t\t? numericValueOptions[0].value\r\n\t\t\t\t\t\t: textValueOptions[0].value,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\t// get the newly filtered leads\r\n\t\treturn getFeedLeads({\r\n\t\t\tuser: {\r\n\t\t\t\tid: user._id,\r\n\t\t\t\trole: user.role,\r\n\t\t\t},\r\n\t\t\tpage: 1,\r\n\t\t\tfilters,\r\n\t\t});\r\n\t};\r\n\r\n\t// console.log(filter.typeIs, filter.valueIs, filter.value);\r\n\r\n\treturn user ? (\r\n\t\t<article\r\n\t\t\tref={wrapperRef}\r\n\t\t\tclassName='absolute top-0 right-0 z-10 w-80 transform translate-y-12 -translate-x-48 pt-4 pb-1 rounded-lg bg-white shadow-lg border border-gray-200 text-gray-900'\r\n\t\t>\r\n\t\t\t<div className='relative'>\r\n\t\t\t\t<header className='pb-2 px-4 flex items-center justify-between border-b border-gray-200'>\r\n\t\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t\t<h5 className='inline-block font-bold text-lg'>Filters</h5>\r\n\t\t\t\t\t\t{filters.count > 0 && (\r\n\t\t\t\t\t\t\t<div className='ml-2 py-1 px-2 bg-teal-200 text-xs font-semibold text-teal-600 rounded-lg'>\r\n\t\t\t\t\t\t\t\t<span>{filters.count}</span>\r\n\t\t\t\t\t\t\t\t<span className='ml-1'>active</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tsetAddFilter(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMouseEnter={() => setFilterDescription(true)}\r\n\t\t\t\t\t\tonMouseLeave={() => setFilterDescription(false)}\r\n\t\t\t\t\t\tclassName='relative p-1 rounded-md hover:bg-purple-500 text-gray-500 hover:text-white transition duration-100 ease-in-out ring-gray'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\tclassName='h-4 w-4'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\td='M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z'\r\n\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t{filterDescription && (\r\n\t\t\t\t\t\t\t<div className='absolute top-0 right-0 z-10 min-w-max p-2 transform -translate-y-1.5 -translate-x-8 rounded-md shadow-md bg-gray-900 text-left text-white text-xs'>\r\n\t\t\t\t\t\t\t\tAdd filter\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</header>\r\n\t\t\t\t{filters.filters.length > 0 || addFilter ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{addFilter && (\r\n\t\t\t\t\t\t\t<div className='pt-6 pb-2 px-4'>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<SelectComponent\r\n\t\t\t\t\t\t\t\t\t\ttitle={'Type'}\r\n\t\t\t\t\t\t\t\t\t\toptions={typeOptions}\r\n\t\t\t\t\t\t\t\t\t\tselectedOption={filter.typeIs.title}\r\n\t\t\t\t\t\t\t\t\t\topenState={typeActive}\r\n\t\t\t\t\t\t\t\t\t\tsetOpenState={setTypeActive}\r\n\t\t\t\t\t\t\t\t\t\thandleClick={(option: {\r\n\t\t\t\t\t\t\t\t\t\t\ttype: string;\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: string;\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: string;\r\n\t\t\t\t\t\t\t\t\t\t}) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetFilter({\r\n\t\t\t\t\t\t\t\t\t\t\t\t...filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttypeIs: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: option.type as NumericOrTextStrings,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: option.title as FilterTitles,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: option.value as FilterTypes,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalueIs: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: option.type,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toption.type === 'numeric'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? numericValueOptions[0].title\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: textValueOptions[0].title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toption.type === 'numeric'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? numericValueOptions[0].value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: textValueOptions[0].value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toption.value === 'category'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'Appliances'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: typeof filter.value === 'number'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? filter.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='mt-2'>\r\n\t\t\t\t\t\t\t\t\t<SelectComponent\r\n\t\t\t\t\t\t\t\t\t\ttitle={'Value'}\r\n\t\t\t\t\t\t\t\t\t\toptions={\r\n\t\t\t\t\t\t\t\t\t\t\tfilter.typeIs.type === 'numeric'\r\n\t\t\t\t\t\t\t\t\t\t\t\t? numericValueOptions\r\n\t\t\t\t\t\t\t\t\t\t\t\t: textValueOptions\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tselectedOption={filter.valueIs.title}\r\n\t\t\t\t\t\t\t\t\t\topenState={valueActive}\r\n\t\t\t\t\t\t\t\t\t\tsetOpenState={setValueActive}\r\n\t\t\t\t\t\t\t\t\t\thandleClick={(option: {\r\n\t\t\t\t\t\t\t\t\t\t\ttype: string;\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: string;\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: string;\r\n\t\t\t\t\t\t\t\t\t\t}) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetFilter({\r\n\t\t\t\t\t\t\t\t\t\t\t\t...filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalueIs: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: option.type,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: option.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: option.value as FilterOperators,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{filter.typeIs.value === 'category' ? (\r\n\t\t\t\t\t\t\t\t\t<div className='mt-2'>\r\n\t\t\t\t\t\t\t\t\t\t<SelectComponent\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={'Item'}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={categoryOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tselectedOption={filter.value}\r\n\t\t\t\t\t\t\t\t\t\t\topenState={categoryActive}\r\n\t\t\t\t\t\t\t\t\t\t\tsetOpenState={setCategoryActive}\r\n\t\t\t\t\t\t\t\t\t\t\thandleClick={(option: { title: string }) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetFilter({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t...filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: option.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mt-2 form-field'\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetFilter({\r\n\t\t\t\t\t\t\t\t\t\t\t\t...filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: +e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter an amount...'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<div className='flex items-center justify-end'>\r\n\t\t\t\t\t\t\t\t\t<div className='mt-2'>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Cancel'}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetAddFilter(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\twidth={'w-20'}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\t\tsize={'xs'}\r\n\t\t\t\t\t\t\t\t\t\t\tcta={false}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className='mt-2 ml-4'>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Apply'}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\thandleFilterSubmit(user);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\twidth={'w-20'}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\t\tsize={'xs'}\r\n\t\t\t\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{filters.filters.length > 0 && (\r\n\t\t\t\t\t\t\t<div className='font-semibold text-sm text-gray-700'>\r\n\t\t\t\t\t\t\t\t<ul className='py-2 px-4'>\r\n\t\t\t\t\t\t\t\t\t{filters.filters.map((filter: Filter, i: number) => (\r\n\t\t\t\t\t\t\t\t\t\t<ActiveFilter key={i} filter={filter} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div className='border-t border-gray-200'>\r\n\t\t\t\t\t\t\t<div className='flex justify-end py-2 px-4'>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\thandleClearFilters();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='py-1 px-2 font-semibold text-sm hover:bg-red-100 text-red-500 hover:text-red-600 rounded-lg transition-main duration-100 ease-in-out ring-red'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tClear all\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className='py-6 px-4 font-semibold text-sm text-gray-700'>\r\n\t\t\t\t\t\tYou haven't added any filters. Click the \"+\" in the top right corner\r\n\t\t\t\t\t\tto get started.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t) : (\r\n\t\t<Spinner\r\n\t\t\tdivWidth={null}\r\n\t\t\tcenter={false}\r\n\t\t\tspinnerWidth={null}\r\n\t\t\tmargin={false}\r\n\t\t\ttext={''}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\ninterface ActiveFilterProps {\r\n\tfilter: Filter;\r\n}\r\n\r\nconst ActiveFilter: React.FC<ActiveFilterProps> = ({ filter }) => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// local state\r\n\tconst [filterDescription, setFilterDescription] = useState(false);\r\n\r\n\t// return appropriate indicator before the value\r\n\tconst valuePreproccesor = (type: FilterTypes) => {\r\n\t\tif (type === 'netProfit' || type === 'buyPrice' || type === 'sellPrice') {\r\n\t\t\treturn '$';\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t};\r\n\r\n\t// return appropriate value\r\n\tconst valueProcessor = (type: FilterTypes, value: string | number) => {\r\n\t\tif (type === 'roi') {\r\n\t\t\treturn numberWithCommas(100 * +value);\r\n\t\t} else if (type === 'bsr') {\r\n\t\t\treturn numberWithCommas(+value);\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t};\r\n\r\n\t// return appropriate indicator after the value\r\n\tconst valuePostproccesor = (type: FilterTypes) => {\r\n\t\tif (type === 'roi') {\r\n\t\t\treturn '%';\r\n\t\t} else if (type === 'weight') {\r\n\t\t\treturn ' lb';\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<li className='first:mt-0 mt-2 w-full py-2 px-4 flex items-center justify-between bg-gray-100 rounded-lg transition-colors-main focus:outline-none'>\r\n\t\t\t<div className='flex items-center pr-2'>\r\n\t\t\t\t<span className='truncate'>{filter.title}</span>\r\n\t\t\t\t<span className='ml-1'>\r\n\t\t\t\t\t{filter.operator === 'gte'\r\n\t\t\t\t\t\t? '>'\r\n\t\t\t\t\t\t: filter.operator === 'lte'\r\n\t\t\t\t\t\t? '<'\r\n\t\t\t\t\t\t: filter.operator === 'eq'\r\n\t\t\t\t\t\t? '='\r\n\t\t\t\t\t\t: 'is'}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className='ml-1'>\r\n\t\t\t\t\t{`${valuePreproccesor(filter.type)}${valueProcessor(\r\n\t\t\t\t\t\tfilter.type,\r\n\t\t\t\t\t\tfilter.value\r\n\t\t\t\t\t)}${valuePostproccesor(filter.type)}`}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<button\r\n\t\t\t\tonClick={() => dispatch(clearFilter({ id: filter.id }))}\r\n\t\t\t\tonMouseEnter={() => setFilterDescription(true)}\r\n\t\t\t\tonMouseLeave={() => setFilterDescription(false)}\r\n\t\t\t\tclassName='relative p-1 rounded-md hover:bg-purple-500 text-gray-500 hover:text-white transition duration-100 ease-in-out ring-gray'\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\tclassName='h-4 w-4'\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\td='M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z'\r\n\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t\t{filterDescription && (\r\n\t\t\t\t\t<div className='absolute top-0 right-0 z-10 min-w-max p-2 transform -translate-y-1 -translate-x-8 rounded-md shadow-md bg-gray-900 text-left text-white text-xs'>\r\n\t\t\t\t\t\tClear filter\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</button>\r\n\t\t</li>\r\n\t);\r\n};\r\n\r\ninterface TypeOption {\r\n\ttype: 'numeric' | 'text';\r\n\ttitle: FilterTitles;\r\n\tvalue: FilterTypes;\r\n}\r\n\r\nconst typeOptions: TypeOption[] = [\r\n\t{ type: 'numeric', title: 'Profit', value: 'netProfit' },\r\n\t{ type: 'numeric', title: 'Buy price', value: 'buyPrice' },\r\n\t{ type: 'numeric', title: 'Sell price', value: 'sellPrice' },\r\n\t{ type: 'numeric', title: 'Return on investment', value: 'roi' },\r\n\t{ type: 'numeric', title: \"Best seller's rank\", value: 'bsr' },\r\n\t{ type: 'numeric', title: 'Monthly sales', value: 'monthlySales' },\r\n\t{ type: 'numeric', title: 'Weight', value: 'weight' },\r\n\t{ type: 'text', title: 'Category', value: 'category' },\r\n];\r\n\r\ninterface NumericOption {\r\n\ttype: 'numeric';\r\n\ttitle: string;\r\n\tvalue: 'gte' | 'lte';\r\n}\r\n\r\nconst numericValueOptions: NumericOption[] = [\r\n\t{\r\n\t\ttype: 'numeric',\r\n\t\ttitle: 'Greater than',\r\n\t\tvalue: 'gte',\r\n\t},\r\n\t{\r\n\t\ttype: 'numeric',\r\n\t\ttitle: 'Less than',\r\n\t\tvalue: 'lte',\r\n\t},\r\n];\r\n\r\ninterface TextOption {\r\n\ttype: 'text';\r\n\ttitle: string;\r\n\tvalue: 'eq';\r\n}\r\n\r\nconst textValueOptions: TextOption[] = [\r\n\t{\r\n\t\ttype: 'text',\r\n\t\ttitle: 'Equals',\r\n\t\tvalue: 'eq',\r\n\t},\r\n];\r\n\r\nconst categoryOptions = [\r\n\t{ title: 'Appliances' },\r\n\t{ title: 'Arts, Crafts, & Sewing' },\r\n\t{ title: 'Automotive Parts & Accessories' },\r\n\t{ title: 'Baby' },\r\n\t{ title: 'Beauty & Personal Care' },\r\n\t{ title: 'Books' },\r\n\t{ title: 'CDs & Vinyl' },\r\n\t{ title: 'Cell Phones & Accessories' },\r\n\t{ title: 'Clothing, Shoes & Jewelry' },\r\n\t{ title: 'Computers' },\r\n\t{ title: 'Electronics' },\r\n\t{ title: 'Garden & Outdoor' },\r\n\t{ title: 'Grocery & Gourmet Food' },\r\n\t{ title: 'Handmade' },\r\n\t{ title: 'Health, Household & Baby Care' },\r\n\t{ title: 'Home & Kitchen' },\r\n\t{ title: 'Industrial & Scientific' },\r\n\t{ title: 'Luggage & Travel Gear' },\r\n\t{ title: 'Movies & TV' },\r\n\t{ title: 'Musical Instruments' },\r\n\t{ title: 'Office Products' },\r\n\t{ title: 'Pet Supplies' },\r\n\t{ title: 'Sports & Outdoors' },\r\n\t{ title: 'Tools & Home Improvement' },\r\n\t{ title: 'Toys & Games' },\r\n\t{ title: 'Video Games' },\r\n];\r\n\r\nexport default FilterComponent;\r\n","import React from 'react';\r\n\r\ninterface SearchBarProps {\r\n\tplaceholder: string | null;\r\n\tonSearchChange: any;\r\n\thandleSearchSubmit: any;\r\n}\r\n\r\nconst SearchBar: React.FC<SearchBarProps> = ({\r\n\tplaceholder,\r\n\tonSearchChange,\r\n\thandleSearchSubmit,\r\n}) => {\r\n\treturn (\r\n\t\t<div className='flex items-center justify-end text-gray-300'>\r\n\t\t\t<div className='w-72 relative z-0 text-gray-600'>\r\n\t\t\t\t<form\r\n\t\t\t\t\taction='/search'\r\n\t\t\t\t\tmethod='GET'\r\n\t\t\t\t\tonSubmit={(e) => handleSearchSubmit(e)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tname='q'\r\n\t\t\t\t\t\tplaceholder={placeholder || 'Enter a search...'}\r\n\t\t\t\t\t\tonChange={onSearchChange}\r\n\t\t\t\t\t\tclassName='py-2 pl-8 w-full rounded-lg border-none text-sm placeholder-gray-600 transition duration-100 ease-in-out ring-purple'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName='mt-2.5 ml-2 absolute top-0 left-0 h-4 w-4'\r\n\t\t\t\t\t\tfill='none'\r\n\t\t\t\t\t\tviewBox='0 0 24 24'\r\n\t\t\t\t\t\tstroke='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\td='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SearchBar;\r\n","import React, { useState } from 'react';\r\n\r\nimport { Redirect, useLocation } from 'react-router-dom';\r\n\r\nimport { useAppDispatch } from '@utils/hooks';\r\nimport { getSearchResults } from '@features/leads/leadsSlice';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\n\r\nimport SearchBar from '@components/layout/navigation/SearchBar';\r\n\r\ninterface HeaderProps {\r\n\ttitle: string | null;\r\n\trole: string;\r\n\tdateCreated: string;\r\n\tsearchActive: boolean;\r\n}\r\n\r\nconst Header: React.FC<HeaderProps> = ({\r\n\ttitle,\r\n\trole,\r\n\tdateCreated,\r\n\tsearchActive,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\tconst location = useLocation();\r\n\r\n\t// local state\r\n\tconst [redirectToSearch, setRedirectToSearch] = useState(false);\r\n\tconst [query, setQuery] = useState('');\r\n\r\n\t// search helpers\r\n\tconst onSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetQuery(e.target.value);\r\n\t};\r\n\r\n\t// handle search submit\r\n\tconst handleSearchSubmit = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\te.preventDefault();\r\n\t\tif (query) {\r\n\t\t\tif (location.pathname !== '/search') {\r\n\t\t\t\tsetRedirectToSearch(true);\r\n\t\t\t}\r\n\t\t\treturn dispatch(\r\n\t\t\t\tgetSearchResults({\r\n\t\t\t\t\tquery,\r\n\t\t\t\t\trole,\r\n\t\t\t\t\tdateCreated,\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tnewSearch: true,\r\n\t\t\t\t\titemLimit: 15,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'No value was entered',\r\n\t\t\t\t\tmessage: 'Please enter a search value and try again.',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tif (redirectToSearch) {\r\n\t\treturn <Redirect to={{ pathname: '/search' }} />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<header className='pt-4 pb-2 border-b border-gray-200'>\r\n\t\t\t<div className='flex items-center justify-between container'>\r\n\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t<h1 className='text-3xl text-gray-900 font-bold'>\r\n\t\t\t\t\t\t{title || 'Leads'}\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t{searchActive && (\r\n\t\t\t\t\t<SearchBar\r\n\t\t\t\t\t\tplaceholder={'Search by title, source, brand, or ASIN'}\r\n\t\t\t\t\t\tonSearchChange={onSearchChange}\r\n\t\t\t\t\t\thandleSearchSubmit={handleSearchSubmit}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon';\r\n\r\n// redux\r\nimport { useAppDispatch } from '@utils/hooks';\r\nimport {\r\n\thandleArchiveLead,\r\n\thandleLikeLead,\r\n\tsetCurrentLead,\r\n} from '@features/leads/leadsSlice';\r\n\r\n// utils\r\nimport {\r\n\tcalculateBSR,\r\n\tnumberWithCommas,\r\n\topenLinkHandler,\r\n\ttruncate,\r\n\tuseOutsideMousedown,\r\n} from '@utils/utils';\r\nimport { Lead } from '@utils/interfaces/leads/Lead';\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ninterface LeadRowProps {\r\n\tlead: Lead;\r\n\tuser: User;\r\n\tliked: Lead[];\r\n\tarchived: Lead[];\r\n\tshowDetails: boolean;\r\n\tsetShowDetails: React.Dispatch<React.SetStateAction<boolean>>;\r\n\tunitFee: number;\r\n\tlbFee: number;\r\n}\r\n\r\nconst LeadRow: React.FC<LeadRowProps> = ({\r\n\tlead,\r\n\tuser,\r\n\tliked,\r\n\tarchived,\r\n\tshowDetails,\r\n\tsetShowDetails,\r\n\tunitFee,\r\n\tlbFee,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// local state\r\n\tconst [expandedView, setExpandedView] = useState(false);\r\n\tconst [eyeDesc, setEyeDesc] = useState(false);\r\n\tconst [linkDesc, setLinkDesc] = useState(false);\r\n\tconst [rowHover, setRowHover] = useState(false);\r\n\tconst [titleHover, setTitleHover] = useState(false);\r\n\tconst [quickView, setQuickView] = useState(false);\r\n\tconst [viewCompetition, setViewCompetition] = useState(false);\r\n\tconst [viewImage, setViewImage] = useState(false);\r\n\r\n\t// destructure necessary items\r\n\tconst { data } = lead;\r\n\r\n\t// disable active states on mousedown\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMousedown(wrapperRef, setQuickView, setExpandedView);\r\n\r\n\t// set like status & handlers\r\n\tconst [like, setLike] = useState(\r\n\t\tliked.some((l) => l._id === lead._id) ? true : false\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tfor (let i = 0; i < user.likedLeads.length; i++) {\r\n\t\t\tif (user.likedLeads[i]._id === lead._id) {\r\n\t\t\t\tsetLike(true);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}, [user, lead._id]);\r\n\tuseEffect(() => {\r\n\t\tif (liked.some((l) => l._id === lead._id)) {\r\n\t\t\tsetLike(true);\r\n\t\t} else {\r\n\t\t\tsetLike(false);\r\n\t\t}\r\n\t}, [liked, lead._id]);\r\n\r\n\t// set archive status & handler\r\n\tconst [archive, setArchive] = useState(\r\n\t\tarchived.some((l) => l._id === lead._id) ? true : false\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tif (archived.some((l) => l._id === lead._id)) {\r\n\t\t\tsetArchive(true);\r\n\t\t} else {\r\n\t\t\tsetArchive(false);\r\n\t\t}\r\n\t}, [archived, lead._id]);\r\n\r\n\t// set date\r\n\tconst datePosted = DateTime.fromISO(data.date).toFormat('LLL dd');\r\n\r\n\t// handle details on view\r\n\tconst viewDetailsHandler = () => {\r\n\t\tsetShowDetails(!showDetails);\r\n\t\tdispatch(setCurrentLead(lead));\r\n\t\tsetQuickView(false);\r\n\t\tsetExpandedView(false);\r\n\t};\r\n\r\n\t// handle liking leads\r\n\tconst favoriteHandler = (e: any) => {\r\n\t\te.stopPropagation();\r\n\t\tsetLike((prev) => !prev);\r\n\t\tdispatch(handleLikeLead({ userId: user._id, leadId: lead._id }));\r\n\t};\r\n\t// handle archiving leads\r\n\tconst archiveHandler = (e: any) => {\r\n\t\te.stopPropagation();\r\n\t\tsetArchive((prev) => !prev);\r\n\t\tdispatch(handleArchiveLead({ userId: user._id, leadId: lead._id }));\r\n\t};\r\n\r\n\t// classes for component\r\n\tconst classes = {\r\n\t\trowWrapper:\r\n\t\t\t'relative px-1 border-b border-gray-200 hover:bg-gray-100 cursor-pointer',\r\n\t\tlikeCellWrapper: 'p-2 pl-0 text-center text-gray-400',\r\n\t\tlikeCellButton: 'p-1 rounded-md ring-purple align-middle',\r\n\t\tlikeCellActive: 'svg-base hover:text-purple-400 transition-colors-main',\r\n\t\tlikeCellNull: 'p-2 px-4 svg-base',\r\n\t\ttitleCellWrapper:\r\n\t\t\t'p-2 md:w-64 lg:w-72 xl:w-auto font-semibold overflow-ellipsis',\r\n\t\tdetailsCellWrapper: 'relative p-2 flex items-center text-gray-400',\r\n\t\tdetailsCellSvg: 'svg-base',\r\n\t\tdetailsCellButton:\r\n\t\t\t'p-1 rounded-md hover:text-gray-600 transition-main ring-gray',\r\n\t\tdetailsCellImageWrapper:\r\n\t\t\t'absolute z-10 p-2 transform lg:-translate-y-12 xl:-translate-y-16 translate-x-24 bg-white shadow-xl rounded-lg border border-gray-200',\r\n\t\tdetailsCellImage: 'max-h-56 max-w-xs',\r\n\t\tcompetitionWrapper:\r\n\t\t\t'w-36 absolute bottom-0 z-10 p-2 transform -translate-y-12 translate-x-8 rounded-md shadow-md bg-gray-900 text-white text-sm',\r\n\t\tcompetitionRow: 'center-between',\r\n\t\tcompetitorType: 'font-semibold text-purple-300',\r\n\t\tcompetitorCount: 'font-semibold',\r\n\t\tprofitCellWrapper: 'p-2 uppercase',\r\n\t\ttitleHover:\r\n\t\t\t'absolute z-10 left-0 p-2 transform -translate-y-10 lg:translate-x-12 rounded-md shadow-md bg-gray-900 text-white text-sm',\r\n\t\tquickViewCellWrapper: quickView ? 'p-4' : 'p-2',\r\n\t\tquickViewWrapper:\r\n\t\t\t'all-center rounded-r-lg text-gray-500 hover:text-gray-700',\r\n\t\tquickViewMenu: quickView\r\n\t\t\t? 'absolute z-10 p-2 bg-white shadow-sm rounded-r-lg ring-gray'\r\n\t\t\t: 'rounded-lg ring-gray',\r\n\t\tquickViewExpandedWrapper:\r\n\t\t\t'absolute transform -translate-x-14 bg-white rounded-l-lg shadow-sm text-gray-500',\r\n\t\teyeIconWrapper:\r\n\t\t\t'relative p-2 rounded-l-lg border-r border-gray-200 hover:text-gray-700 transition-main ring-gray',\r\n\t\tlinkIconWrapper:\r\n\t\t\t'relative p-2 border-r border-gray-200 hover:text-gray-700 transition-main ring-gray',\r\n\t\tquickViewMenuHover:\r\n\t\t\t'w-24 mt-2 p-2 absolute top-0 left-0 z-20 transform -translate-y-12 rounded-lg bg-gray-900 shadow-md text-white text-sm',\r\n\t\tquickViewNull: 'p-2 svg-base',\r\n\t\texpandedViewWrapper:\r\n\t\t\t'absolute right-0 z-20 w-40 transform translate-y-6 bg-white rounded-lg shadow-md border border-gray-200',\r\n\t\texpandedViewMenuTop: 'py-2 border-b border-gray-200',\r\n\t\texpandedViewMenuBottom: 'py-2',\r\n\t\texpandedViewMenuSvg: 'ml-2 svg-sm',\r\n\t\texpandedViewMenuButton:\r\n\t\t\t'py-1 px-3 w-full text-left font-semibold text-purple-500 hover:bg-gray-100 hover:text-gray-800 transition-colors duration-100 ease-in-out ring-gray',\r\n\t\texpandedViewMenuButtonSvg: function () {\r\n\t\t\treturn this.expandedViewMenuButton + ' flex items-center';\r\n\t\t},\r\n\t\tdefaultCellWrapper: 'p-2',\r\n\t\tdefaultSvg: 'svg-base',\r\n\t\tvalueIndicator: 'ml-1 text-gray-400 font-semibold',\r\n\t};\r\n\r\n\treturn (\r\n\t\t<tr\r\n\t\t\tclassName={classes.rowWrapper}\r\n\t\t\tonMouseEnter={() => setRowHover(true)}\r\n\t\t\tonMouseLeave={() => setRowHover(false)}\r\n\t\t\tonClick={() => {\r\n\t\t\t\tviewDetailsHandler();\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{/* like/unlike */}\r\n\t\t\t<td className={classes.likeCellWrapper}>\r\n\t\t\t\t{rowHover || like ? (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\tfavoriteHandler(e);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName={classes.likeCellButton}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\tfill={`${like ? '#7069FA' : 'none'}`}\r\n\t\t\t\t\t\t\tviewBox='0 0 24 24'\r\n\t\t\t\t\t\t\tstroke={`${like ? '#7069FA' : 'currentColor'}`}\r\n\t\t\t\t\t\t\tclassName={classes.likeCellActive}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{svgList.heart}\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className={classes.likeCellNull} />\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t\t{/* title */}\r\n\t\t\t<td\r\n\t\t\t\tonMouseEnter={() => setTitleHover(true)}\r\n\t\t\t\tonMouseLeave={() => setTitleHover(false)}\r\n\t\t\t\tclassName={classes.titleCellWrapper}\r\n\t\t\t>\r\n\t\t\t\t<div>{truncate(data.title, 60)}</div>\r\n\t\t\t</td>\r\n\t\t\t{/* category */}\r\n\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t{truncate(data.category, 28)}\r\n\t\t\t</td>\r\n\t\t\t{/* details */}\r\n\t\t\t<td className={classes.detailsCellWrapper}>\r\n\t\t\t\t{/* image */}\r\n\t\t\t\t<button\r\n\t\t\t\t\tonMouseEnter={() => setViewImage(true)}\r\n\t\t\t\t\tonMouseLeave={() => setViewImage(false)}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tsetViewImage((prev) => !prev);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName={classes.detailsCellButton}\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName={classes.detailsCellSvg}\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{svgList.image}\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t\t{/* competitors */}\r\n\t\t\t\t<button\r\n\t\t\t\t\tonMouseEnter={() => setViewCompetition(true)}\r\n\t\t\t\t\tonMouseLeave={() => setViewCompetition(false)}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tsetViewCompetition((prev) => !prev);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName={classes.detailsCellButton}\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName={classes.detailsCellSvg}\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{svgList.competition}\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t\t{viewImage && (\r\n\t\t\t\t\t<div className={classes.detailsCellImageWrapper}>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={data.img}\r\n\t\t\t\t\t\t\talt={data.title}\r\n\t\t\t\t\t\t\tclassName={classes.detailsCellImage}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{viewCompetition && (\r\n\t\t\t\t\t<div className={classes.competitionWrapper}>\r\n\t\t\t\t\t\t<div className={classes.competitionRow}>\r\n\t\t\t\t\t\t\t<span>Buy box</span>\r\n\t\t\t\t\t\t\t<span className={classes.competitorType}>\r\n\t\t\t\t\t\t\t\t{data.competitorType}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{data.competitorCount > 0 && (\r\n\t\t\t\t\t\t\t<div className={classes.competitionRow}>\r\n\t\t\t\t\t\t\t\t<span># Competitors</span>\r\n\t\t\t\t\t\t\t\t<span className={classes.competitorCount}>\r\n\t\t\t\t\t\t\t\t\t{data.competitorCount}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t\t{/* profit */}\r\n\t\t\t<td className={classes.profitCellWrapper}>\r\n\t\t\t\t<span>$</span>\r\n\t\t\t\t{(data.netProfit - (unitFee || lbFee * data.weight || 0)).toFixed(2)}\r\n\t\t\t\t<span className={classes.valueIndicator}>USD</span>\r\n\t\t\t</td>\r\n\t\t\t{/* roi */}\r\n\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t{(\r\n\t\t\t\t\t((+data.netProfit?.toFixed(2) -\r\n\t\t\t\t\t\t(unitFee || lbFee * data.weight || 0)) /\r\n\t\t\t\t\t\t+data.buyPrice?.toFixed(2)) *\r\n\t\t\t\t\t100\r\n\t\t\t\t).toFixed(0)}\r\n\t\t\t\t<span className={classes.valueIndicator}>%</span>\r\n\t\t\t</td>\r\n\t\t\t{/* bsr */}\r\n\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t{numberWithCommas(data.bsrCurrent)}\r\n\t\t\t\t<span className={classes.valueIndicator}>\r\n\t\t\t\t\t({calculateBSR(data.bsrCurrent, data.category)})\r\n\t\t\t\t\t<span className={classes.valueIndicator}>%</span>\r\n\t\t\t\t</span>\r\n\t\t\t</td>\r\n\t\t\t{/* monthly sales */}\r\n\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t{numberWithCommas(data.monthlySales)}\r\n\t\t\t</td>\r\n\t\t\t{/* date */}\r\n\t\t\t<td className={classes.defaultCellWrapper}>{datePosted}</td>\r\n\t\t\t{/* quick menu */}\r\n\t\t\t<td className={classes.quickViewCellWrapper}>\r\n\t\t\t\t<div ref={wrapperRef}>\r\n\t\t\t\t\t{rowHover || expandedView ? (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonMouseEnter={() => setQuickView(true)}\r\n\t\t\t\t\t\t\tonMouseLeave={() => !expandedView && setQuickView(false)}\r\n\t\t\t\t\t\t\tclassName={classes.quickViewWrapper}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\tsetExpandedView(!expandedView);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={classes.quickViewMenu}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\tclassName={classes.defaultSvg}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{svgList.dots}\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t{quickView && (\r\n\t\t\t\t\t\t\t\t<div className={classes.quickViewExpandedWrapper}>\r\n\t\t\t\t\t\t\t\t\t<div className='all-center'>\r\n\t\t\t\t\t\t\t\t\t\t{/* eye */}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowDetails(!showDetails);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentLead(lead);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetExpandedView(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => setEyeDesc(true)}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={() => setEyeDesc(false)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.eyeIconWrapper}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.defaultSvg}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{svgList.eye}\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t{eyeDesc && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.quickViewMenuHover}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tView details\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t{/* link */}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLinkHandler(data.retailerLink, data.amzLink);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetExpandedView(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => setLinkDesc(true)}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={() => setLinkDesc(false)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.linkIconWrapper}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.defaultSvg}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{svgList.link}\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t{linkDesc && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.quickViewMenuHover}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tOpen links\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className={classes.quickViewNull} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{/* horiztonal dots */}\r\n\t\t\t\t\t{expandedView && (\r\n\t\t\t\t\t\t<div className={classes.expandedViewWrapper}>\r\n\t\t\t\t\t\t\t<div className={classes.expandedViewMenuTop}>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tfavoriteHandler(e);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuButton}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{!like ? 'Like lead' : 'Unlike lead'}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tarchiveHandler(e);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuButton}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{!archive ? 'Archive lead' : 'Unarchive lead'}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className={classes.expandedViewMenuBottom}>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\topenLinkHandler(data.retailerLink, data.amzLink)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuButtonSvg()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span>Open links</span>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuSvg}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{svgList.link}\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() => viewDetailsHandler()}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuButtonSvg()}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span>View details</span>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuSvg}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{svgList.eye}\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</td>\r\n\t\t\t{/* title hover */}\r\n\t\t\t{titleHover && (\r\n\t\t\t\t<td\r\n\t\t\t\t\tonMouseEnter={(prev) => setRowHover(!prev)}\r\n\t\t\t\t\tclassName={classes.titleHover}\r\n\t\t\t\t>\r\n\t\t\t\t\t{data.title}\r\n\t\t\t\t</td>\r\n\t\t\t)}\r\n\t\t</tr>\r\n\t);\r\n};\r\n\r\n// svg list for cells\r\nconst svgList = {\r\n\theart: (\r\n\t\t<path\r\n\t\t\tstrokeLinecap='round'\r\n\t\t\tstrokeLinejoin='round'\r\n\t\t\tstrokeWidth={2}\r\n\t\t\td='M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z'\r\n\t\t/>\r\n\t),\r\n\timage: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n\tcompetition: (\r\n\t\t<path d='M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z' />\r\n\t),\r\n\tdots: (\r\n\t\t<path d='M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z' />\r\n\t),\r\n\teye: (\r\n\t\t<g>\r\n\t\t\t<path d='M10 12a2 2 0 100-4 2 2 0 000 4z' />\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t</g>\r\n\t),\r\n\tlink: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n};\r\n\r\nexport default LeadRow;\r\n","import React from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Button from '@components/utils/Button';\r\n\r\ninterface NullStateProps {\r\n\theader: string;\r\n\ttext: string;\r\n\tpath: JSX.Element;\r\n\tlink: string;\r\n\tlinkText: string;\r\n}\r\n\r\nconst NullState: React.FC<NullStateProps> = ({\r\n\theader,\r\n\ttext,\r\n\tpath,\r\n\tlink,\r\n\tlinkText,\r\n}) => {\r\n\treturn (\r\n\t\t<div className={nullStateClasses.nullStateWrapper}>\r\n\t\t\t<div className={nullStateClasses.svgWrapper}>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\tclassName={nullStateClasses.svg}\r\n\t\t\t\t>\r\n\t\t\t\t\t{path}\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\t\t\t<h3 className='mt-4 font-bold text-lg text-gray-900'>{header}</h3>\r\n\t\t\t<p className='mt-2'>{text}</p>\r\n\t\t\t{link ? (\r\n\t\t\t\t<Link\r\n\t\t\t\t\tto={link}\r\n\t\t\t\t\tclassName='mt-4 inline-block py-2 px-3 rounded-lg shadow-sm hover:shadow-md text-sm font-semibold bg-purple-500 hover:bg-purple-600 text-white transition duration-100 ease-in-out ring-purple'\r\n\t\t\t\t>\r\n\t\t\t\t\t{linkText}\r\n\t\t\t\t</Link>\r\n\t\t\t) : (\r\n\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttext={'Reload the page'}\r\n\t\t\t\t\t\tonClick={() => window.location.reload()}\r\n\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\tsize={'sm'}\r\n\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst nullStateClasses = {\r\n\tnullStateWrapper: 'w-96 text-gray-600',\r\n\tsvgWrapper: 'h-10 w-10',\r\n\tsvg: 'p-2 bg-gray-100 rounded-lg text-gray-500 shadow-sm',\r\n};\r\n\r\nexport default NullState;\r\n","import React from 'react';\r\n\r\nimport LeadRow from './LeadRow';\r\nimport NullState from '@components/utils/NullState';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\nimport { Lead } from '@utils/interfaces/leads/Lead';\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ninterface LeadTableProps {\r\n\tleads: Lead[];\r\n\tuser: User;\r\n\tliked: Lead[];\r\n\tarchived: Lead[];\r\n\tstatus: 'idle' | 'loading' | 'failed';\r\n\tshowDetails: boolean;\r\n\tsetShowDetails: React.Dispatch<React.SetStateAction<boolean>>;\r\n\ttype: string;\r\n\tcurrentSearchParam: string | null;\r\n}\r\n\r\nconst LeadTable: React.FC<LeadTableProps> = ({\r\n\tleads,\r\n\tuser,\r\n\tliked,\r\n\tarchived,\r\n\tstatus,\r\n\tshowDetails,\r\n\tsetShowDetails,\r\n\ttype,\r\n\tcurrentSearchParam,\r\n}) => {\r\n\treturn (\r\n\t\t<section className={classes.tableWrapper}>\r\n\t\t\t{status === 'failed' ? (\r\n\t\t\t\t<div className='mt-6 container'>\r\n\t\t\t\t\tThere was an error making that request. If this issue persists, please{' '}\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref='mailto:support@leadgeek.io'\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\tclassName='link text-purple-500 hover:text-purple-600 rounded-lg transition-main ring-gray'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tcontact Leadgeek support\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t.\r\n\t\t\t\t</div>\r\n\t\t\t) : status === 'loading' ? (\r\n\t\t\t\t<Spinner\r\n\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\tcenter={false}\r\n\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\tmargin={false}\r\n\t\t\t\t\ttext={'Loading leads...'}\r\n\t\t\t\t/>\r\n\t\t\t) : leads.length > 0 ? (\r\n\t\t\t\t<table className={classes.table} id='leads'>\r\n\t\t\t\t\t<thead className={classes.tableHeadWrapper}>\r\n\t\t\t\t\t\t<tr className={classes.tableHead}>\r\n\t\t\t\t\t\t\t<th className={classes.tableHeadCell} />\r\n\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Title</th>\r\n\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Category</th>\r\n\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Details</th>\r\n\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Profit</th>\r\n\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>ROI</th>\r\n\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>BSR</th>\r\n\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Sales</th>\r\n\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Date</th>\r\n\t\t\t\t\t\t\t<th className={classes.tableHeadCell} />\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody className={classes.tableBody}>\r\n\t\t\t\t\t\t{leads.map((lead, i) => (\r\n\t\t\t\t\t\t\t<LeadRow\r\n\t\t\t\t\t\t\t\tkey={lead._id}\r\n\t\t\t\t\t\t\t\tlead={lead}\r\n\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\tliked={liked}\r\n\t\t\t\t\t\t\t\tarchived={archived}\r\n\t\t\t\t\t\t\t\tshowDetails={showDetails}\r\n\t\t\t\t\t\t\t\tsetShowDetails={setShowDetails}\r\n\t\t\t\t\t\t\t\tlbFee={1}\r\n\t\t\t\t\t\t\t\tunitFee={1}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t) : type === 'feed' ? (\r\n\t\t\t\t<NullState\r\n\t\t\t\t\theader={'Your Feed is empty'}\r\n\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\"No leads were found. Please check that your filters aren't too strict or try refreshing the page.\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpath={svgList.feed}\r\n\t\t\t\t\tlink={''}\r\n\t\t\t\t\tlinkText={''}\r\n\t\t\t\t/>\r\n\t\t\t) : type === 'liked' ? (\r\n\t\t\t\t<NullState\r\n\t\t\t\t\theader={'No liked leads were found'}\r\n\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\"You haven't liked any leads yet, but you can go to the Feed to check some products out.\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpath={svgList.liked}\r\n\t\t\t\t\tlink={'/leads'}\r\n\t\t\t\t\tlinkText={'Go to the Feed'}\r\n\t\t\t\t/>\r\n\t\t\t) : type === 'archived' ? (\r\n\t\t\t\t<NullState\r\n\t\t\t\t\theader={'No archived leads were found'}\r\n\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\"You haven't archived any leads yet, but you can go to the Feed to check some products out.\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpath={svgList.archived}\r\n\t\t\t\t\tlink={'/leads'}\r\n\t\t\t\t\tlinkText={'Go to the Feed'}\r\n\t\t\t\t/>\r\n\t\t\t) : type === 'search' && !currentSearchParam ? (\r\n\t\t\t\t<NullState\r\n\t\t\t\t\theader={'No search results found'}\r\n\t\t\t\t\ttext={'Please try a different search query'}\r\n\t\t\t\t\tpath={svgList.search}\r\n\t\t\t\t\tlink={'/leads'}\r\n\t\t\t\t\tlinkText={'Go to the Feed'}\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t<NullState\r\n\t\t\t\t\theader={'No results were found'}\r\n\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\"No results could be found. Please check that your filters aren't too strict or try refreshing the page.\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpath={svgList.search}\r\n\t\t\t\t\tlink={''}\r\n\t\t\t\t\tlinkText={''}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\n// svg paths for nullState\r\nconst svgList = {\r\n\tfeed: (\r\n\t\t<path d='M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z' />\r\n\t),\r\n\tliked: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n\tarchived: <path d='M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z' />,\r\n\tsearch: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n};\r\n\r\n// classes for component\r\nconst classes = {\r\n\ttableWrapper: 'relative mt-6 container',\r\n\ttable: 'w-full table-auto',\r\n\ttableHeadWrapper: 'border-b border-gray-200',\r\n\ttableHead:\r\n\t\t'text-left font-semibold text-xs text-gray-600 uppercase tracking-widest whitespace-no-wrap',\r\n\ttableHeadCell: 'p-2',\r\n\ttableBody: 'text-sm text-gray-800',\r\n};\r\n\r\nexport default LeadTable;\r\n","import React, { useState } from 'react';\r\n\r\n// packages\r\nimport { Link } from 'react-router-dom';\r\n\r\n// redux\r\nimport { useAppDispatch } from '@utils/hooks';\r\nimport { ActionCreatorWithPayload } from '@reduxjs/toolkit';\r\n\r\n// utils\r\nimport { numberWithCommas } from '@utils/utils';\r\nimport { Pagination } from '@utils/interfaces/leads/Pagination';\r\n\r\ninterface PaginationProps {\r\n\tpagination: Pagination;\r\n\ttype: string;\r\n\titemLimit: number;\r\n\tstatus: string;\r\n\tpadding: boolean;\r\n\tsetPage: any;\r\n\tsetItemLimit: ActionCreatorWithPayload<\r\n\t\t{ type: string; itemLimit: number },\r\n\t\tstring\r\n\t>;\r\n}\r\n\r\nconst PaginationComponent: React.FC<PaginationProps> = ({\r\n\tpagination,\r\n\ttype,\r\n\titemLimit,\r\n\tstatus,\r\n\tpadding,\r\n\tsetPage,\r\n\tsetItemLimit,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// local state\r\n\tconst [selectValue, setSelectValue] = useState(itemLimit || 15);\r\n\tconst pageLimits = [10, 15, 25, 50, 100];\r\n\tconst [filteredMessage, setFilteredMessage] = useState(false);\r\n\r\n\t// desctructure necessary items\r\n\tconst {\r\n\t\tpage,\r\n\t\thasNextPage,\r\n\t\thasPreviousPage,\r\n\t\tnextPage,\r\n\t\tpreviousPage,\r\n\t\ttotalItems,\r\n\t\tfilteredItems,\r\n\t} = pagination;\r\n\r\n\tconst itemsFrom =\r\n\t\tpreviousPage !== null\r\n\t\t\t? previousPage * (itemLimit || 15) + 1\r\n\t\t\t: previousPage && previousPage + 1;\r\n\tconst itemsTo =\r\n\t\tfilteredItems && filteredItems < page * (itemLimit || 15)\r\n\t\t\t? filteredItems\r\n\t\t\t: page * (itemLimit || 15);\r\n\r\n\treturn status === 'idle' ? (\r\n\t\t<article\r\n\t\t\tclassName={`flex items-center justify-between mt-4 ${\r\n\t\t\t\t!padding && 'container'\r\n\t\t\t} text-gray-600`}\r\n\t\t>\r\n\t\t\t{filteredItems && filteredItems > 0 ? (\r\n\t\t\t\t<div className='flex items-center text-sm'>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tvalue={selectValue}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\tsetItemLimit({ type, itemLimit: +e.currentTarget.value })\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tsetSelectValue(+e.currentTarget.value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName='w-16 mr-2 p-2 bg-white rounded-lg text-sm border border-gray-200 shadow-sm cursor-pointer ring-purple minimal-scrollbar'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{pageLimits.map((category, i) => (\r\n\t\t\t\t\t\t\t<option key={i} value={category} className='hover:bg-purple-500'>\r\n\t\t\t\t\t\t\t\t{category}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<span>results per page</span>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div />\r\n\t\t\t)}\r\n\t\t\t<div className='flex items-center justify-between text-sm'>\r\n\t\t\t\t{filteredItems ? (\r\n\t\t\t\t\t<div className='relative flex items-center'>\r\n\t\t\t\t\t\t{filteredItems > 0 && totalItems && totalItems > filteredItems && (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => setFilteredMessage((prev) => !prev)}\r\n\t\t\t\t\t\t\t\tonMouseEnter={() => setFilteredMessage(true)}\r\n\t\t\t\t\t\t\t\tonMouseLeave={() => setFilteredMessage(false)}\r\n\t\t\t\t\t\t\t\tclassName='mr-2 rounded-md text-gray-400 hover:text-gray-600 transition duration-100 ease-in-out ring-gray'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\td='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z'\r\n\t\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t{filteredMessage && totalItems && (\r\n\t\t\t\t\t\t\t\t\t<div className='absolute z-10 bottom-0 py-2 px-4 transform -translate-y-8 rounded-md shadow-md bg-gray-900 text-left text-white text-sm'>\r\n\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='font-semibold text-purple-300'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{numberWithCommas(totalItems - filteredItems)}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>{' '}\r\n\t\t\t\t\t\t\t\t\t\t\tleads aren't showing because of applied filters.\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{filteredItems && (\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\tShowing {itemsFrom} to {itemsTo} of {filteredItems} results\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div />\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{(hasPreviousPage || hasNextPage) && (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tto={`${hasPreviousPage && `?page=${previousPage}`}`}\r\n\t\t\t\t\t\t\tonClick={() => dispatch(setPage({ page: previousPage, type }))}\r\n\t\t\t\t\t\t\tclassName={`${\r\n\t\t\t\t\t\t\t\thasPreviousPage\r\n\t\t\t\t\t\t\t\t\t? 'hover:shadow-md hover:text-gray-700'\r\n\t\t\t\t\t\t\t\t\t: 'pointer-events-none bg-gray-200 opacity-50'\r\n\t\t\t\t\t\t\t} ${classes.button} ml-8`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPrevious\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tto={`?page=${nextPage}`}\r\n\t\t\t\t\t\t\tonClick={() => dispatch(setPage({ page: nextPage, type }))}\r\n\t\t\t\t\t\t\tclassName={`${\r\n\t\t\t\t\t\t\t\thasNextPage\r\n\t\t\t\t\t\t\t\t\t? 'hover:shadow-md hover:text-gray-700'\r\n\t\t\t\t\t\t\t\t\t: 'pointer-events-none bg-gray-200 opacity-50'\r\n\t\t\t\t\t\t\t} ${classes.button} ml-4`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tNext\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t) : (\r\n\t\t<div />\r\n\t);\r\n};\r\n\r\n// component classes\r\nconst classes = {\r\n\tbutton:\r\n\t\t'py-2 px-3 rounded-lg shadow-sm text-sm font-semibold border border-gray-200 text-gray-600 hover:text-gray-700 transition duration-100 ease-in-out ring-purple',\r\n};\r\n\r\nexport default PaginationComponent;\r\n","import React, { useRef, useCallback, useState, useEffect } from 'react';\r\n\r\nimport { getFeedLeads } from '@features/leads/leadsSlice';\r\nimport { setPrepFilter, clearPrepFilter } from '@features/filters/filtersSlice';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\nimport { useOutsideMousedown } from '@utils/utils';\r\nimport { useAppSelector, useAppDispatch } from '@utils/hooks';\r\n\r\ninterface PrepProps {\r\n\tprep: boolean;\r\n\tsetPrep: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst Prep: React.FC<PrepProps> = ({ prep, setPrep }) => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMousedown(wrapperRef, setPrep, null);\r\n\tconst keyPress = useCallback(\r\n\t\t(e) => {\r\n\t\t\tif (e.key === 'Escape' && prep) {\r\n\t\t\t\tsetPrep(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[setPrep, prep]\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('keydown', keyPress);\r\n\t\treturn () => document.removeEventListener('keydown', keyPress);\r\n\t}, [keyPress]);\r\n\tconst [prepFee, setPrepFee] = useState<boolean | object>(false);\r\n\tconst [checked, setChecked] = useState({\r\n\t\tunit: false,\r\n\t\tlb: false,\r\n\t});\r\n\r\n\tconst onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tif (e.target.value) {\r\n\t\t\t// if (e.target.value.match(/^\\d*\\.?\\d*$/) !== null) {\r\n\t\t\t// \tsetPrepFee({ ...prepFee, [e.target.name]: e.target.value });\r\n\t\t\t// } else {\r\n\t\t\t// \tsetAlert(\r\n\t\t\t// \t\t'Error creating the filter',\r\n\t\t\t// \t\t\"The filter can't contain letters or special characters.\",\r\n\t\t\t// \t\t'danger'\r\n\t\t\t// \t);\r\n\t\t\t// }\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\tuser && (\r\n\t\t\t<article\r\n\t\t\t\tref={wrapperRef}\r\n\t\t\t\tclassName='absolute top-0 right-0 z-10 w-64 transform translate-y-12 -translate-x-24 pt-4 pb-1 rounded-lg bg-white shadow-lg border border-gray-200 text-gray-900'\r\n\t\t\t>\r\n\t\t\t\t<div className='relative'>\r\n\t\t\t\t\t<header className='pb-2 px-4 flex items-center justify-between'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h5 className='inline-block font-bold text-lg'>Prep fees</h5>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t// setPrepFilter(prepFee);\r\n\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\tgetFeedLeads({\r\n\t\t\t\t\t\t\t\t\t\tuser: {\r\n\t\t\t\t\t\t\t\t\t\t\tid: user._id,\r\n\t\t\t\t\t\t\t\t\t\t\trole: user.role,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tpage: 1,\r\n\t\t\t\t\t\t\t\t\t\tfilters,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tsetPrep((prev) => !prev);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tclassName='font-semibold text-sm text-purple-500 rounded-sm hover:text-purple-600 transition-colors duration-100 ease-in-out ring-purple'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tApply\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<div className='py-2 px-4 bg-gray-100 font-semibold text-sm text-gray-700'>\r\n\t\t\t\t\t\t<div className='flex items-center justify-between'>\r\n\t\t\t\t\t\t\t<label className='flex items-center justify-between'>\r\n\t\t\t\t\t\t\t\tWeight-based prep fee?\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tname='checkbox'\r\n\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\tchecked={checked.unit || checked.lb}\r\n\t\t\t\t\t\t\t\t// onChange={() => setChecked((prev) => !prev)}\r\n\t\t\t\t\t\t\t\tclassName='w-4 p-2 bg-white rounded-md text-sm text-purple-600 ring-purple'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='mt-3'>\r\n\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t{`${checked ? 'Fee per lb' : 'Fee per unit'} ($)`}\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tname={checked ? 'lb' : 'unit'}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tplaceholder={checked ? 'eg. $0.10' : 'eg. $0.95'}\r\n\t\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\t\tclassName='w-full mt-2 p-2 bg-white rounded-lg text-sm border border-gray-200 shadow-sm placeholder-gray-300 ring-purple'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='border-t border-gray-200'>\r\n\t\t\t\t\t\t<div className='flex justify-end py-2 px-4'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(clearPrepFilter());\r\n\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\tgetFeedLeads({\r\n\t\t\t\t\t\t\t\t\t\t\tuser: {\r\n\t\t\t\t\t\t\t\t\t\t\t\tid: user._id,\r\n\t\t\t\t\t\t\t\t\t\t\t\trole: user.role,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tpage: 1,\r\n\t\t\t\t\t\t\t\t\t\t\tfilters,\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tsetPrep((prev) => !prev);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName='font-semibold text-sm text-red-500 rounded-sm ring-red'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tClear\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</article>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nexport default Prep;\r\n","import React, { Fragment, useState } from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@utils/hooks';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\nimport { setItemLimit } from '@features/filters/filtersSlice';\r\nimport {\r\n\tgetAllLeads,\r\n\tsetLeadLoading,\r\n\tsetPage,\r\n} from '@features/leads/leadsSlice';\r\n\r\n// components\r\nimport Button from '@components/utils/Button';\r\nimport DatePicker from '../filters/DatePicker';\r\nimport Details from './Details';\r\nimport ExportButton from './ExportButton';\r\nimport Filter from '../filters/Filter';\r\nimport Header from '@components/layout/navigation/Header';\r\nimport LeadTable from './LeadTable';\r\nimport PaginationComponent from '@components/layout/navigation/Pagination';\r\nimport Prep from '../filters/Prep';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport { Lead } from '@utils/interfaces/leads/Lead';\r\nimport { Pagination } from '@utils/interfaces/leads/Pagination';\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ninterface LeadsProps {\r\n\tleads: Lead[];\r\n\tpagination: Pagination;\r\n\ttype: string;\r\n\titemLimit: number;\r\n\theaderTitle: string | null;\r\n\tuser: User;\r\n\tstatus: 'idle' | 'loading' | 'failed';\r\n\tsearch: boolean;\r\n\tcurrentSearchParam: string | null;\r\n}\r\n\r\nconst Leads: React.FC<LeadsProps> = ({\r\n\tleads,\r\n\tpagination,\r\n\ttype,\r\n\titemLimit,\r\n\theaderTitle,\r\n\tuser,\r\n\tstatus: authStatus,\r\n\tsearch,\r\n\tcurrentSearchParam,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// lead state\r\n\tconst leadStatus = useAppSelector((state) => state.leads.status);\r\n\tconst feed = useAppSelector((state) => state.leads.feed);\r\n\tconst currentLead = useAppSelector((state) => state.leads.currentLead);\r\n\tconst lastUpdated = useAppSelector((state) => state.leads.lastUpdated);\r\n\t// filter state\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\r\n\t// local state\r\n\tconst [date, setDate] = useState(false);\r\n\tconst [exportLeads, setExportLeads] = useState(false);\r\n\tconst [filter, setFilter] = useState(false);\r\n\tconst [prep, setPrep] = useState(false);\r\n\tconst [showDetails, setShowDetails] = useState(false);\r\n\r\n\t// destructure necessary items\r\n\tconst {\r\n\t\t_id: userId,\r\n\t\trole,\r\n\t\tdateCreated,\r\n\t\tlikedLeads,\r\n\t\tarchivedLeads,\r\n\t\tcomments,\r\n\t} = user;\r\n\tconst {\r\n\t\tcount: filterCount,\r\n\t\tdateLimits: { selected: dateSelected },\r\n\t} = filters;\r\n\r\n\t// set counts for \"liked\" & \"archived\"\r\n\tconst likedCount = likedLeads?.length > 0 && likedLeads.length;\r\n\tconst archivedCount = archivedLeads?.length > 0 && archivedLeads.length;\r\n\r\n\t// navigation links in header\r\n\tconst primaryLinks = [\r\n\t\t{\r\n\t\t\ttitle: 'Feed',\r\n\t\t\tlink: '/',\r\n\t\t\tcount: null,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Liked',\r\n\t\t\tlink: '/liked/',\r\n\t\t\tcount: likedCount,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Archived',\r\n\t\t\tlink: '/archived/',\r\n\t\t\tcount: archivedCount,\r\n\t\t},\r\n\t];\r\n\r\n\t// tools in header\r\n\tconst tools = [\r\n\t\t{\r\n\t\t\ttext: 'Filters',\r\n\t\t\tpath: svgList.filters,\r\n\t\t\tonClick: () => setFilter((prev) => !prev),\r\n\t\t\tconditional: filterCount! > 0,\r\n\t\t\tconditionalDisplay: (\r\n\t\t\t\t<span className='h-4 w-4 absolute top-0 right-0 flex items-center justify-center py-2.5 px-3 rounded-full bg-purple-500 text-white transform -translate-y-2 translate-x-3'>\r\n\t\t\t\t\t{filterCount}\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: 'Prep',\r\n\t\t\tpath: svgList.prep,\r\n\t\t\tonClick: () => setPrep((prev) => !prev),\r\n\t\t\tconditional: filters.prep.unit || filters.prep.lb,\r\n\t\t\tconditionalDisplay: (\r\n\t\t\t\t// checkmark\r\n\t\t\t\t<span className='h-5 w-5 absolute top-0 right-0 flex items-center justify-center rounded-full bg-white text-purple-500 transform -translate-y-1 translate-x-3'>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\td='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\r\n\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\t// handler for exporting leads\r\n\tconst handleExport = async () => {\r\n\t\ttry {\r\n\t\t\tdispatch(getAllLeads({ role: user.role, dateCreated: user.dateCreated }));\r\n\t\t\tsetExportLeads(true);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Error exporting leads',\r\n\t\t\t\t\tmessage: 'Please try again or refresh the page.',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\treturn authStatus === 'idle' && user ? (\r\n\t\t<Fragment>\r\n\t\t\t<section className={classes.leadsWrapper}>\r\n\t\t\t\t<Header\r\n\t\t\t\t\ttitle={headerTitle}\r\n\t\t\t\t\trole={role}\r\n\t\t\t\t\tdateCreated={dateCreated}\r\n\t\t\t\t\tsearchActive={true}\r\n\t\t\t\t/>\r\n\t\t\t\t{/* show primary links & tools if not a search */}\r\n\t\t\t\t{!search && (\r\n\t\t\t\t\t<nav className={classes.navWrapper}>\r\n\t\t\t\t\t\t<div className={classes.nav}>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{primaryLinks.map((link, i) => (\r\n\t\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\t\t\t\tto={`/leads${link.link}`}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => dispatch(setLeadLoading())}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.navLink}\r\n\t\t\t\t\t\t\t\t\t\tactiveClassName={classes.navLinkActive}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span>{link.title}</span>\r\n\t\t\t\t\t\t\t\t\t\t{link.count && (\r\n\t\t\t\t\t\t\t\t\t\t\t<span className={classes.navLinkCounter}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{link.count}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className={classes.navToolsWrapper}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\t\t\t\tdateSelected\r\n\t\t\t\t\t\t\t\t\t\t\t? dateSelected!\r\n\t\t\t\t\t\t\t\t\t\t\t: `${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tDateTime.fromISO(user?.dateCreated).toFormat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) || 'Jan 1, 2021'\r\n\t\t\t\t\t\t\t\t\t\t\t  } - ${DateTime.now().toFormat('LLL dd, yyyy')}` ||\r\n\t\t\t\t\t\t\t\t\t\t\t  'All leads'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonClick={() => setDate((prev) => !prev)}\r\n\t\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\tsize={null}\r\n\t\t\t\t\t\t\t\t\tcta={false}\r\n\t\t\t\t\t\t\t\t\tpath={svgList.calendar}\r\n\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{tools.map((tool, i) => (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\ttext={tool.text}\r\n\t\t\t\t\t\t\t\t\t\tonClick={tool.onClick}\r\n\t\t\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\t\tsize={null}\r\n\t\t\t\t\t\t\t\t\t\tcta={false}\r\n\t\t\t\t\t\t\t\t\t\tpath={tool.path}\r\n\t\t\t\t\t\t\t\t\t\tconditional={tool.conditional}\r\n\t\t\t\t\t\t\t\t\t\tconditionalDisplay={tool.conditionalDisplay}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t{/* handle active or inactive states for tools */}\r\n\t\t\t\t\t\t\t\t{!exportLeads && (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttext='Export'\r\n\t\t\t\t\t\t\t\t\t\tonClick={handleExport}\r\n\t\t\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\t\tsize={null}\r\n\t\t\t\t\t\t\t\t\t\tcta={false}\r\n\t\t\t\t\t\t\t\t\t\tpath={svgList.export}\r\n\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{date && (\r\n\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\t\t\t\tdate={date}\r\n\t\t\t\t\t\t\t\t\t\tsetDate={setDate}\r\n\t\t\t\t\t\t\t\t\t\tdateCreated={user.dateCreated}\r\n\t\t\t\t\t\t\t\t\t\tlastUpdated={lastUpdated}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{filter && (\r\n\t\t\t\t\t\t\t\t\t<Filter filterActive={filter} setFilterActive={setFilter} />\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{prep && <Prep prep={prep} setPrep={setPrep} />}\r\n\t\t\t\t\t\t\t\t{exportLeads &&\r\n\t\t\t\t\t\t\t\t\t(feed.totalByIds.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t<ExportButton\r\n\t\t\t\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\t\t\t\tleads={feed.totalByIds}\r\n\t\t\t\t\t\t\t\t\t\t\tsetExportLeads={setExportLeads}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\t\tdivWidth={'w-28'}\r\n\t\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\t\tspinnerWidth={'sm'}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</nav>\r\n\t\t\t\t)}\r\n\t\t\t\t{leadStatus === 'idle' ? (\r\n\t\t\t\t\t<LeadTable\r\n\t\t\t\t\t\tleads={leads}\r\n\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\tliked={likedLeads}\r\n\t\t\t\t\t\tarchived={archivedLeads}\r\n\t\t\t\t\t\tstatus={leadStatus}\r\n\t\t\t\t\t\tshowDetails={showDetails}\r\n\t\t\t\t\t\tsetShowDetails={setShowDetails}\r\n\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\tcurrentSearchParam={currentSearchParam}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : leadStatus === 'failed' ? (\r\n\t\t\t\t\t<div className='mt-6 container'>\r\n\t\t\t\t\t\tThere was an error making that request. If this issue persists,\r\n\t\t\t\t\t\tplease{' '}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref='mailto:support@leadgeek.io'\r\n\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\tclassName='link text-purple-500 hover:text-purple-600 rounded-lg transition-main ring-gray'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tcontact Leadgeek support\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\ttext={'Loading leads...'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t\t{pagination && (\r\n\t\t\t\t\t<PaginationComponent\r\n\t\t\t\t\t\tstatus={leadStatus}\r\n\t\t\t\t\t\tpagination={pagination}\r\n\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\titemLimit={itemLimit}\r\n\t\t\t\t\t\tpadding={false}\r\n\t\t\t\t\t\tsetPage={setPage}\r\n\t\t\t\t\t\tsetItemLimit={setItemLimit}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</section>\r\n\t\t\t{showDetails && currentLead && (\r\n\t\t\t\t<Details\r\n\t\t\t\t\tcurrentLead={currentLead}\r\n\t\t\t\t\tuserId={userId}\r\n\t\t\t\t\tliked={likedLeads}\r\n\t\t\t\t\tarchived={archivedLeads}\r\n\t\t\t\t\tcomments={comments || []}\r\n\t\t\t\t\tshowDetails={showDetails}\r\n\t\t\t\t\tsetShowDetails={setShowDetails}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t) : authStatus === 'loading' ? (\r\n\t\t<Spinner\r\n\t\t\tdivWidth={null}\r\n\t\t\tcenter={true}\r\n\t\t\tspinnerWidth={null}\r\n\t\t\tmargin={false}\r\n\t\t\ttext={'Loading leads...'}\r\n\t\t/>\r\n\t) : (\r\n\t\t<div className='mt-6 container'>\r\n\t\t\tThere was an error making that request. If this issue persists, please{' '}\r\n\t\t\t<a\r\n\t\t\t\thref='mailto:support@leadgeek.io'\r\n\t\t\t\ttarget='_blank'\r\n\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\tclassName='link text-purple-500 hover:text-purple-600 rounded-lg transition-main ring-gray'\r\n\t\t\t>\r\n\t\t\t\tcontact Leadgeek support\r\n\t\t\t</a>\r\n\t\t\t.\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// svg paths for tools\r\nconst svgList = {\r\n\tcalendar: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n\tfilters: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n\tprep: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n\texport: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n};\r\n\r\n// classes for component\r\nconst classes = {\r\n\tleadsWrapper: 'relative mb-6',\r\n\tnavWrapper: 'mt-6 container',\r\n\tnav: 'relative flex items-end justify-between pb-2 border-b border-gray-200',\r\n\tnavLink:\r\n\t\t'relative first:ml-0 ml-8 pb-2 font-semibold text-gray-600 hover:text-purple-500 hover:border-b-2 hover:border-purple-600 group transition-colors-main',\r\n\tnavLinkActive:\r\n\t\t'text-purple-500 hover:text-purple-500 border-b-2 border-purple-600',\r\n\tnavLinkCounter:\r\n\t\t'h-4 w-4 absolute top-0 right-0 flex items-center justify-center py-2.5 px-3 rounded-full bg-purple-500 group-hover:bg-purple-600 text-xs text-white transform -translate-y-4 translate-x-7',\r\n\tnavToolsWrapper: 'flex items-center',\r\n};\r\n\r\nexport default Leads;\r\n","import React, { useEffect } from 'react';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@utils/hooks';\r\nimport { getFeedLeads } from '@features/leads/leadsSlice';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Leads from '@components/features/leads/Leads';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\nconst Feed = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// lead state\r\n\tconst feed = useAppSelector((state) => state.leads.feed);\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\t// destructure necessary items\r\n\tconst { page } = feed.pagination;\r\n\tconst { itemLimit } = filters;\r\n\r\n\t// call getFeedLeads\r\n\tuseEffect(() => {\r\n\t\tstatus === 'idle' &&\r\n\t\t\tisAuthenticated &&\r\n\t\t\tuser?._id &&\r\n\t\t\tdispatch(\r\n\t\t\t\tgetFeedLeads({ user: { id: user._id, role: user.role }, page, filters })\r\n\t\t\t);\r\n\t}, [status, isAuthenticated, user?._id, user?.role, page, filters, dispatch]);\r\n\r\n\treturn status === 'idle' && user ? (\r\n\t\t<AuthLayout>\r\n\t\t\t<Leads\r\n\t\t\t\tleads={feed.pageByIds}\r\n\t\t\t\tpagination={feed.pagination}\r\n\t\t\t\ttype={'feed'}\r\n\t\t\t\titemLimit={itemLimit}\r\n\t\t\t\theaderTitle={null}\r\n\t\t\t\tuser={user}\r\n\t\t\t\tstatus={status}\r\n\t\t\t\tsearch={false}\r\n\t\t\t\tcurrentSearchParam={null}\r\n\t\t\t/>\r\n\t\t</AuthLayout>\r\n\t) : (\r\n\t\t<div className='h-screen'>\r\n\t\t\t<Spinner\r\n\t\t\t\tdivWidth={null}\r\n\t\t\t\tcenter={true}\r\n\t\t\t\tspinnerWidth={null}\r\n\t\t\t\tmargin={false}\r\n\t\t\t\ttext={'Loading your Leadgeek profile...'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Feed;\r\n","import React, { useEffect } from 'react';\r\n\r\nimport { useAppSelector, useAppDispatch } from '@utils/hooks';\r\nimport { getLikedLeads } from '@features/leads/leadsSlice';\r\n\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Leads from '@components/features/leads/Leads';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\nconst LikedPage = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// lead state\r\n\tconst liked = useAppSelector((state) => state.leads.liked);\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\t// destructure necessary items\r\n\tconst { page } = liked.pagination;\r\n\tconst { itemLimit } = filters;\r\n\r\n\tuseEffect(() => {\r\n\t\tstatus === 'idle' &&\r\n\t\t\tisAuthenticated &&\r\n\t\t\tuser &&\r\n\t\t\tdispatch(getLikedLeads({ leads: user.likedLeads, page, itemLimit }));\r\n\t}, [status, isAuthenticated, user, page, itemLimit, dispatch]);\r\n\r\n\treturn status === 'idle' && user ? (\r\n\t\t<AuthLayout>\r\n\t\t\t<Leads\r\n\t\t\t\tleads={liked.pageByIds}\r\n\t\t\t\tpagination={liked.pagination}\r\n\t\t\t\ttype={'liked'}\r\n\t\t\t\titemLimit={itemLimit}\r\n\t\t\t\theaderTitle={null}\r\n\t\t\t\tuser={user}\r\n\t\t\t\tstatus={status}\r\n\t\t\t\tsearch={false}\r\n\t\t\t\tcurrentSearchParam={null}\r\n\t\t\t/>\r\n\t\t</AuthLayout>\r\n\t) : (\r\n\t\t<div className='h-screen'>\r\n\t\t\t<Spinner\r\n\t\t\t\tdivWidth={null}\r\n\t\t\t\tcenter={true}\r\n\t\t\t\tspinnerWidth={null}\r\n\t\t\t\tmargin={false}\r\n\t\t\t\ttext={'Loading your Leadgeek profile...'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default LikedPage;\r\n","import React, { useEffect } from 'react';\r\n\r\nimport { useAppSelector, useAppDispatch } from '@utils/hooks';\r\nimport { getArchivedLeads } from '@features/leads/leadsSlice';\r\n\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Leads from '@components/features/leads/Leads';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\nconst Archived = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// lead state\r\n\tconst archived = useAppSelector((state) => state.leads.archived);\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\t// destructure necessary items\r\n\tconst { page } = archived.pagination;\r\n\tconst { itemLimit } = filters;\r\n\r\n\tuseEffect(() => {\r\n\t\tstatus === 'idle' &&\r\n\t\t\tisAuthenticated &&\r\n\t\t\tuser &&\r\n\t\t\tdispatch(\r\n\t\t\t\tgetArchivedLeads({ leads: user.archivedLeads, page, itemLimit })\r\n\t\t\t);\r\n\t}, [status, isAuthenticated, user, page, itemLimit, dispatch]);\r\n\r\n\treturn status === 'idle' && user ? (\r\n\t\t<AuthLayout>\r\n\t\t\t<Leads\r\n\t\t\t\tleads={archived.pageByIds}\r\n\t\t\t\tpagination={archived.pagination}\r\n\t\t\t\ttype={'archived'}\r\n\t\t\t\titemLimit={itemLimit}\r\n\t\t\t\theaderTitle={null}\r\n\t\t\t\tuser={user}\r\n\t\t\t\tstatus={status}\r\n\t\t\t\tsearch={false}\r\n\t\t\t\tcurrentSearchParam={null}\r\n\t\t\t/>\r\n\t\t</AuthLayout>\r\n\t) : (\r\n\t\t<div className='h-screen'>\r\n\t\t\t<Spinner\r\n\t\t\t\tdivWidth={null}\r\n\t\t\t\tcenter={true}\r\n\t\t\t\tspinnerWidth={null}\r\n\t\t\t\tmargin={false}\r\n\t\t\t\ttext={'Loading your Leadgeek profile...'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Archived;\r\n","import React, { useEffect } from 'react';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@utils/hooks';\r\nimport { getSearchResults } from '@features/leads/leadsSlice';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Leads from '@components/features/leads/Leads';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\nconst Search = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// search state\r\n\tconst search = useAppSelector((state) => state.leads.search);\r\n\t// filters state\r\n\tconst itemLimit = useAppSelector((state) => state.filters.itemLimit);\r\n\t// destructure necessary items\r\n\tconst { page } = search.pagination;\r\n\tconst { searchValue } = search;\r\n\r\n\t// call getSearchResults\r\n\tuseEffect(() => {\r\n\t\tstatus === 'idle' &&\r\n\t\t\tisAuthenticated &&\r\n\t\t\tuser &&\r\n\t\t\tsearchValue &&\r\n\t\t\tdispatch(\r\n\t\t\t\tgetSearchResults({\r\n\t\t\t\t\tquery: searchValue,\r\n\t\t\t\t\trole: user.role,\r\n\t\t\t\t\tdateCreated: user.dateCreated,\r\n\t\t\t\t\tpage,\r\n\t\t\t\t\tnewSearch: false,\r\n\t\t\t\t\titemLimit,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t}, [status, isAuthenticated, user, searchValue, itemLimit, page, dispatch]);\r\n\r\n\treturn status === 'idle' && user ? (\r\n\t\t<AuthLayout>\r\n\t\t\t<Leads\r\n\t\t\t\tleads={search.pageByIds}\r\n\t\t\t\tpagination={search.pagination}\r\n\t\t\t\ttype={'search'}\r\n\t\t\t\titemLimit={itemLimit}\r\n\t\t\t\tuser={user}\r\n\t\t\t\tstatus={status}\r\n\t\t\t\theaderTitle={'Search results'}\r\n\t\t\t\tsearch={true}\r\n\t\t\t\tcurrentSearchParam={searchValue}\r\n\t\t\t/>\r\n\t\t</AuthLayout>\r\n\t) : (\r\n\t\t<div className='h-screen'>\r\n\t\t\t<Spinner\r\n\t\t\t\tdivWidth={null}\r\n\t\t\t\tcenter={true}\r\n\t\t\t\tspinnerWidth={null}\r\n\t\t\t\tmargin={false}\r\n\t\t\t\ttext={'Loading your Leadgeek profile...'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Search;\r\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgX(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M6 18L18 6M6 6l12 12\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgX);\nexport default __webpack_public_path__ + \"static/media/x.e41cb6e1.svg\";\nexport { ForwardRef as ReactComponent };","import React, {\r\n\tFragment,\r\n\tuseState,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseCallback,\r\n} from 'react';\r\n\r\n// packages\r\nimport { Redirect } from 'react-router';\r\nimport axios from 'axios';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@utils/hooks';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\nimport { surrogateUser } from '@features/auth/authSlice';\r\nimport { setItemLimit } from '@features/filters/filtersSlice';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Button from '@components/utils/Button';\r\nimport Header from '@components/layout/navigation/Header';\r\nimport PaginationComponent from '@components/layout/navigation/Pagination';\r\nimport Spinner from '@components/utils/Spinner';\r\nimport { ReactComponent as Check } from '@assets/images/svgs/check.svg';\r\nimport { ReactComponent as X } from '@assets/images/svgs/x.svg';\r\n\r\n// utils\r\nimport { capitalize, config, useOutsideMousedown } from '@utils/utils';\r\nimport { User } from '@utils/interfaces/User';\r\nimport { Pagination } from '@utils/interfaces/leads/Pagination';\r\n\r\ninterface UsersState {\r\n\tstatus: 'loading' | 'idle';\r\n\tallUsers: User[];\r\n\tpagination: Pagination;\r\n}\r\n\r\n// TODO!!\r\n// setPage crashes app in pagination component\r\n\r\nconst Admin = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// local state\r\n\tconst [usersState, setUsersState] = useState<UsersState>({\r\n\t\tallUsers: [],\r\n\t\tstatus: 'loading',\r\n\t\tpagination: {\r\n\t\t\tpage: 1,\r\n\t\t\thasNextPage: null,\r\n\t\t\thasPreviousPage: false,\r\n\t\t\tnextPage: null,\r\n\t\t\tpreviousPage: null,\r\n\t\t\tlastPage: null,\r\n\t\t\ttotalItems: null,\r\n\t\t\tfilteredItems: null,\r\n\t\t},\r\n\t});\r\n\r\n\t// upload leads from Google sheet to MongoDB\r\n\tconst handleExportLeads = async (e: React.MouseEvent<HTMLElement>) => {\r\n\t\te.stopPropagation();\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.get('/api/leads/export');\r\n\t\t\tconsole.log(data);\r\n\t\t\tif (data === 'Leads were added to the database.') {\r\n\t\t\t\t// redeploy Netlify site webhook\r\n\t\t\t\tawait axios.post(\r\n\t\t\t\t\t'https://api.netlify.com/build_hooks/60f1da8987d39d7d6bceae55'\r\n\t\t\t\t);\r\n\t\t\t\treturn dispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Upload success',\r\n\t\t\t\t\t\tmessage: data,\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\treturn dispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Error uploading leads',\r\n\t\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\t'See error code in the console or check Google Sheets for duplicate/missing attributes.',\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\t// get all users\r\n\tconst getAllUsers = async (page: number, itemLimit: number) => {\r\n\t\ttry {\r\n\t\t\tconst body = JSON.stringify({ page, itemLimit });\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/users/get-all-users',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\tif (data.users.length > 0) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tusers,\r\n\t\t\t\t\tpage,\r\n\t\t\t\t\thasNextPage,\r\n\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\tnextPage,\r\n\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\ttotalItems,\r\n\t\t\t\t} = data;\r\n\t\t\t\treturn setUsersState({\r\n\t\t\t\t\t...usersState,\r\n\t\t\t\t\tstatus: 'idle',\r\n\t\t\t\t\tallUsers: users,\r\n\t\t\t\t\tpagination: {\r\n\t\t\t\t\t\t...usersState.pagination,\r\n\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\thasNextPage,\r\n\t\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\t\tnextPage,\r\n\t\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\t\ttotalItems,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsetUsersState({ ...usersState, status: 'idle' });\r\n\t\t\t\treturn dispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Something went wrong',\r\n\t\t\t\t\t\tmessage: 'There was an error retreiving users.',\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\t// options in admin panel\r\n\tconst adminItems = [\r\n\t\t// export leads\r\n\t\t{\r\n\t\t\theight: 'h-auto',\r\n\t\t\twidth: null,\r\n\t\t\ttitle: 'Export leads',\r\n\t\t\tdescription: 'Export leads from the master spreadsheet.',\r\n\t\t\tadditionalFunction: null,\r\n\t\t\tpath: (\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path d='M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z' />\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\tstroke='#fff'\r\n\t\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\td='M8 11h4m-2-2v4'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</g>\r\n\t\t\t),\r\n\t\t\tbuttonText: 'Export all leads',\r\n\t\t\tbuttonPath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tcta: true,\r\n\t\t\tpopupHeading: 'Upload confirmation required',\r\n\t\t\tpopupContent: (\r\n\t\t\t\t<Fragment>\r\n\t\t\t\t\t<p className='pt-2 pb-6 text-gray-700'>\r\n\t\t\t\t\t\tPlease confirm the leads you're adding aren't duplicates and that\r\n\t\t\t\t\t\tall required information is present.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\tsize={null}\r\n\t\t\t\t\t\ttext='Confirm and export'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thandleExportLeads(e);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tpath={\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\td='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\r\n\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Fragment>\r\n\t\t\t),\r\n\t\t\tsearch: false,\r\n\t\t},\r\n\t\t// view members\r\n\t\t{\r\n\t\t\theight: 'h-auto',\r\n\t\t\twidth: 'w-full max-w-3xl',\r\n\t\t\ttitle: 'View members',\r\n\t\t\tadditionalFunction: () => getAllUsers(usersState.pagination.page, 15),\r\n\t\t\tdescription: 'See a list of all past and present LeadGeek members.',\r\n\t\t\tpath: (\r\n\t\t\t\t<path d='M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z' />\r\n\t\t\t),\r\n\t\t\tbuttonText: 'View all members',\r\n\t\t\tbuttonPath: (\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path d='M10 12a2 2 0 100-4 2 2 0 000 4z' />\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\td='M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z'\r\n\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</g>\r\n\t\t\t),\r\n\t\t\tcta: false,\r\n\t\t\tpopupHeading: 'Leadgeek members',\r\n\t\t\tpopupContent: (\r\n\t\t\t\t<UserTable\r\n\t\t\t\t\tstatus={status}\r\n\t\t\t\t\trole={user?.role}\r\n\t\t\t\t\tusersState={usersState}\r\n\t\t\t\t\tusersLimit={15}\r\n\t\t\t\t\tsetUsersState={setUsersState}\r\n\t\t\t\t\tgetAllUsers={getAllUsers}\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\t// redirect if user doesn't have permissions to view admin page\r\n\tif (user && user?.role !== 'master') {\r\n\t\tif (user && user?.role !== 'admin') {\r\n\t\t\treturn <Redirect to={{ pathname: '/leads' }} />;\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AuthLayout>\r\n\t\t\t{status === 'idle' && user ? (\r\n\t\t\t\t<section className='mb-6'>\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\ttitle={'Admin panel'}\r\n\t\t\t\t\t\trole={user.role}\r\n\t\t\t\t\t\tdateCreated={user.dateCreated}\r\n\t\t\t\t\t\tsearchActive={false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div className='mt-6 container'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h2 className='font-semibold text-xl text-gray-900'>Resources</h2>\r\n\t\t\t\t\t\t\t<p>Use these tools to prevent things from catching on fire.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='mt-6 grid grid-cols-3 border-t border-b border-gray-100'>\r\n\t\t\t\t\t\t\t{adminItems.map((item, i) => (\r\n\t\t\t\t\t\t\t\t<AdminItem\r\n\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\theight={item.height}\r\n\t\t\t\t\t\t\t\t\twidth={item.width}\r\n\t\t\t\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\t\t\t\tdescription={item.description}\r\n\t\t\t\t\t\t\t\t\tadditionalFunction={item.additionalFunction}\r\n\t\t\t\t\t\t\t\t\tpath={item.path}\r\n\t\t\t\t\t\t\t\t\tbuttonText={item.buttonText}\r\n\t\t\t\t\t\t\t\t\tpopupHeading={item.popupHeading}\r\n\t\t\t\t\t\t\t\t\tpopupContent={item.popupContent}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t) : (\r\n\t\t\t\t<div className='h-screen'>\r\n\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\tcenter={true}\r\n\t\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\ttext={'Loading admin settings...'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</AuthLayout>\r\n\t);\r\n};\r\n\r\ninterface AdminItemProps {\r\n\theight: string | null;\r\n\twidth: string | null;\r\n\ttitle: string;\r\n\tdescription: string;\r\n\tadditionalFunction: null | (() => void);\r\n\tpath: JSX.Element;\r\n\tbuttonText: string;\r\n\tpopupHeading: string;\r\n\tpopupContent: JSX.Element;\r\n}\r\n\r\nconst AdminItem: React.FC<AdminItemProps> = ({\r\n\theight,\r\n\twidth,\r\n\ttitle,\r\n\tdescription,\r\n\tadditionalFunction,\r\n\tpath,\r\n\tbuttonText,\r\n\tpopupHeading,\r\n\tpopupContent,\r\n}) => {\r\n\t// local state\r\n\tconst [popup, setPopup] = useState(false);\r\n\r\n\t// close popup on outside mousedown\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMousedown(wrapperRef, setPopup, null);\r\n\r\n\t// close modal on esc key\r\n\tconst keyPress = useCallback(\r\n\t\t(e) => {\r\n\t\t\tif (e.key === 'Escape' && popup) {\r\n\t\t\t\tsetPopup(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[setPopup, popup]\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('keydown', keyPress);\r\n\t\treturn () => document.removeEventListener('keydown', keyPress);\r\n\t}, [keyPress]);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<article\r\n\t\t\t\tv-for='item in items'\r\n\t\t\t\tclassName='even:border-r even:border-l border-gray-100'\r\n\t\t\t>\r\n\t\t\t\t{popup && (\r\n\t\t\t\t\t<div className='absolute z-10 top-0 right-0 h-screen w-full bg-gray-900 opacity-25' />\r\n\t\t\t\t)}\r\n\t\t\t\t<div className='h-full flex flex-col justify-between p-4'>\r\n\t\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t\t<span className='text-purple-500'>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{path}\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<h3 className='ml-2 font-semibold text-gray-900'>{title}</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p className='mt-2 text-sm text-gray-700'>{description}</p>\r\n\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetPopup((prev) => !prev);\r\n\t\t\t\t\t\t\t\tadditionalFunction && additionalFunction();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tclassName='link text-purple-500 hover:text-purple-600 rounded-lg transition duration-100 ease-in-out ring-purple'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{buttonText}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</article>\r\n\t\t\t{popup && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={wrapperRef}\r\n\t\t\t\t\tclassName={`absolute top-1/2 inset-x-0 z-20 ${\r\n\t\t\t\t\t\theight || 'h-1/2'\r\n\t\t\t\t\t} max-h-screen ${\r\n\t\t\t\t\t\twidth || 'max-w-lg'\r\n\t\t\t\t\t} mx-auto p-6 rounded-lg bg-white shadow-lg transform -translate-y-1/2`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className='relative pb-1 border-b border-gray-100'>\r\n\t\t\t\t\t\t<header className='flex items-center'>\r\n\t\t\t\t\t\t\t<h2 className='text-xl font-bold text-gray-800'>\r\n\t\t\t\t\t\t\t\t{popupHeading}\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => setPopup((prev) => !prev)}\r\n\t\t\t\t\t\t\tclassName='absolute top-0 right-0 p-1 hover:bg-gray-100 rounded-md hover:text-gray-700 ring-gray transition duration-100 ease-in-out'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\td='M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z'\r\n\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{popupContent}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\ninterface UserTableProps {\r\n\tstatus: 'idle' | 'loading' | 'failed';\r\n\trole?: 'user' | 'grow' | 'pro' | 'bundle' | 'affiliate' | 'admin' | 'master';\r\n\tusersState: UsersState;\r\n\tusersLimit: number;\r\n\tsetUsersState: any;\r\n\tgetAllUsers: (page: number, usersLimit: number) => void;\r\n}\r\n\r\nconst UserTable: React.FC<UserTableProps> = ({\r\n\tstatus,\r\n\trole,\r\n\tusersState,\r\n\tusersLimit,\r\n\tsetUsersState,\r\n\tgetAllUsers,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// get new users on page change\r\n\tuseEffect(() => {\r\n\t\tgetAllUsers(usersState.pagination.page, usersLimit);\r\n\t}, [usersState.pagination.page, usersLimit, getAllUsers]);\r\n\tconst type = 'users';\r\n\r\n\t// set page for pagination component\r\n\tconst setPage = (page: number, type: string) => {\r\n\t\tsetUsersState({\r\n\t\t\t...usersState,\r\n\t\t\tpagination: {\r\n\t\t\t\t...usersState.pagination,\r\n\t\t\t\tpage: page,\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{status === 'idle' ? (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<table className='w-full mt-4 table-auto'>\r\n\t\t\t\t\t\t<thead className='border-b border-gray-100'>\r\n\t\t\t\t\t\t\t<tr className='font-semibold text-left text-xs text-gray-600 uppercase tracking-widest whitespace-no-wrap'>\r\n\t\t\t\t\t\t\t\t<th className='p-2'>Name</th>\r\n\t\t\t\t\t\t\t\t<th className='p-2'>Email</th>\r\n\t\t\t\t\t\t\t\t<th className='p-2'>Plan</th>\r\n\t\t\t\t\t\t\t\t<th className='p-2'>Status</th>\r\n\t\t\t\t\t\t\t\t<th className='p-2'>Stripe</th>\r\n\t\t\t\t\t\t\t\t<th className='p-2'>Surrogate</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody className='mt-4 text-gray-700'>\r\n\t\t\t\t\t\t\t{usersState.allUsers.map((user) => (\r\n\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\tkey={user._id}\r\n\t\t\t\t\t\t\t\t\tclassName='text-sm border-b border-gray-100 hover:bg-gray-100'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>{user.name}</td>\r\n\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\thref={`mailto:${user.email}`}\r\n\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='link text-purple-500 hover:text-purple-600'\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{user.email}\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>{capitalize(user.role)}</td>\r\n\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>\r\n\t\t\t\t\t\t\t\t\t\t{user.subscription.subIds[0] &&\r\n\t\t\t\t\t\t\t\t\t\tuser.subscription.subIds[0].active ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<Check className='inline-block h-4 w-4 text-teal-500 bg-teal-200 rounded-full' />\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<X className='inline-block h-4 w-4 text-red-500 bg-red-200 rounded-full' />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\thref={`https://dashboard.stripe.com/customers/${user.subscription.cusId}`}\r\n\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='text-gray-500 hover:text-gray-600 transition-colors duration-100 ease-in-out'\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path d='M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\td='M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>\r\n\t\t\t\t\t\t\t\t\t\t{/* {user.lastLogin\r\n                                            ? DateTime.fromISO(user.lastLogin).toFormat('LLL dd, t')\r\n                                            : '-'} */}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\trole === 'master' &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(surrogateUser({ id: user._id }))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='py-1 px-2 bg-purple-500 hover:bg-purple-600 rounded-lg text-white shadow-sm hover:shadow-md transition-colors duration-100 ease-in-out ring-purple'\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>Login</div>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t\t{usersState.allUsers && (\r\n\t\t\t\t\t\t<PaginationComponent\r\n\t\t\t\t\t\t\tpagination={usersState.pagination}\r\n\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\titemLimit={usersLimit}\r\n\t\t\t\t\t\t\tstatus={status}\r\n\t\t\t\t\t\t\tpadding={false}\r\n\t\t\t\t\t\t\tsetPage={setPage}\r\n\t\t\t\t\t\t\tsetItemLimit={setItemLimit}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<Spinner\r\n\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\tcenter={false}\r\n\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\tmargin={false}\r\n\t\t\t\t\ttext={'Loading users...'}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default Admin;\r\n","import React, { Fragment, useEffect, useState } from 'react';\r\n\r\nimport { DateTime } from 'luxon';\r\n\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Header from '@components/layout/navigation/Header';\r\nimport Spinner from '@components/utils/Spinner';\r\nimport { useAppSelector } from '@utils/hooks';\r\n\r\ninterface HelpItemProps {\r\n\ttitle: string;\r\n\tdescription: string;\r\n\tpath: JSX.Element;\r\n\tcolor: string;\r\n\tactions: { title: string; link: string; external: boolean }[];\r\n}\r\n\r\nconst HelpItem: React.FC<HelpItemProps> = ({\r\n\ttitle,\r\n\tdescription,\r\n\tpath,\r\n\tcolor,\r\n\tactions,\r\n}) => {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<article\r\n\t\t\t\tv-for='item in items'\r\n\t\t\t\tclassName='even:border-r even:border-l border-gray-100'\r\n\t\t\t>\r\n\t\t\t\t<div className='p-4 '>\r\n\t\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t\t<span className={color}>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{path}\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<h3 className='ml-2 font-semibold text-gray-900'>{title}</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p className='mt-2 text-sm text-gray-700'>{description}</p>\r\n\t\t\t\t\t{actions.map((action, i) => (\r\n\t\t\t\t\t\t<div key={i} className='mt-2'>\r\n\t\t\t\t\t\t\t{action.external && (\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={action.link}\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\t\tclassName='link text-purple-500 hover:text-purple-600 rounded-lg transition duration-100 ease-in-out focus:outline-none focus:shadow-outline'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{action.title}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</article>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nconst Help: React.FC = () => {\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// local state\r\n\tconst [currentTime, setCurrentTime] = useState('');\r\n\r\n\t// set current time on mount (for email timestamp)\r\n\tuseEffect(() => {\r\n\t\tsetCurrentTime(DateTime.now().toLocaleString(DateTime.DATETIME_MED));\r\n\t}, []);\r\n\r\n\tconst helpItems = [\r\n\t\t{\r\n\t\t\ttitle: 'Support',\r\n\t\t\tdescription:\r\n\t\t\t\t'Have a question about selling on Amazon? Ask away! Please allow up to 24 hours for a response.',\r\n\t\t\tpath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-2 0c0 .993-.241 1.929-.668 2.754l-1.524-1.525a3.997 3.997 0 00.078-2.183l1.562-1.562C15.802 8.249 16 9.1 16 10zm-5.165 3.913l1.58 1.58A5.98 5.98 0 0110 16a5.976 5.976 0 01-2.516-.552l1.562-1.562a4.006 4.006 0 001.789.027zm-4.677-2.796a4.002 4.002 0 01-.041-2.08l-.08.08-1.53-1.533A5.98 5.98 0 004 10c0 .954.223 1.856.619 2.657l1.54-1.54zm1.088-6.45A5.974 5.974 0 0110 4c.954 0 1.856.223 2.657.619l-1.54 1.54a4.002 4.002 0 00-2.346.033L7.246 4.668zM12 10a2 2 0 11-4 0 2 2 0 014 0z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tcolor: 'text-purple-600',\r\n\t\t\tactions: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'Contact support',\r\n\t\t\t\t\tlink: 'mailto:support@leadgeek.io',\r\n\t\t\t\t\texternal: true,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Software',\r\n\t\t\tdescription:\r\n\t\t\t\t'This software is still in early-access, so we highly encourage you to report bugs or offer feature suggestions. Help us make this better for you!',\r\n\t\t\tpath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M7 2a1 1 0 00-.707 1.707L7 4.414v3.758a1 1 0 01-.293.707l-4 4C.817 14.769 2.156 18 4.828 18h10.343c2.673 0 4.012-3.231 2.122-5.121l-4-4A1 1 0 0113 8.172V4.414l.707-.707A1 1 0 0013 2H7zm2 6.172V4h2v4.172a3 3 0 00.879 2.12l1.027 1.028a4 4 0 00-2.171.102l-.47.156a4 4 0 01-2.53 0l-.563-.187a1.993 1.993 0 00-.114-.035l1.063-1.063A3 3 0 009 8.172z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tcolor: 'text-teal-600',\r\n\t\t\tactions: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'Report a bug',\r\n\t\t\t\t\tlink: `mailto:software@leadgeek.io?subject=LeadGeek%20Bug%20Report%20${currentTime}`,\r\n\t\t\t\t\texternal: true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'Suggest a feature',\r\n\t\t\t\t\tlink: `mailto:software@leadgeek.io?subject=LeadGeek%20Feature%20Suggestion%20${currentTime}`,\r\n\t\t\t\t\texternal: true,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<AuthLayout>\r\n\t\t\t{status === 'idle' && user ? (\r\n\t\t\t\t<section className='mb-6'>\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\ttitle={'Help panel'}\r\n\t\t\t\t\t\trole={user.role}\r\n\t\t\t\t\t\tdateCreated={user.dateCreated}\r\n\t\t\t\t\t\tsearchActive={false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div className='mt-6 container'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h2 className='font-semibold text-xl text-gray-900'>Resources</h2>\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\tUse these resources to get help or offer feedback on our\r\n\t\t\t\t\t\t\t\tsoftware.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='mt-6 grid grid-cols-3 border-t border-b border-gray-100'>\r\n\t\t\t\t\t\t\t{helpItems.map((item, i) => (\r\n\t\t\t\t\t\t\t\t<HelpItem\r\n\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\t\t\t\tdescription={item.description}\r\n\t\t\t\t\t\t\t\t\tpath={item.path}\r\n\t\t\t\t\t\t\t\t\tcolor={item.color}\r\n\t\t\t\t\t\t\t\t\tactions={item.actions}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t) : (\r\n\t\t\t\t<Spinner\r\n\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\tcenter={false}\r\n\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\tmargin={false}\r\n\t\t\t\t\ttext={'Loading Help panel...'}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</AuthLayout>\r\n\t);\r\n};\r\n\r\nexport default Help;\r\n","import React, { useState } from 'react';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\ninterface NavbarLinkProps {\r\n\tlink: {\r\n\t\ttitle: string;\r\n\t\tlink: string;\r\n\t\tdescription: string;\r\n\t\tnew: boolean;\r\n\t};\r\n}\r\n\r\nconst NavbarLink: React.FC<NavbarLinkProps> = ({ link }) => {\r\n\tconst [hover, setHover] = useState(false);\r\n\treturn (\r\n\t\t<div v-for='item in items'>\r\n\t\t\t<NavLink\r\n\t\t\t\tclassName='py-3 px-6 relative flex items-center justify-between group pb-2 font-semibold text-gray-700 hover:bg-gray-200 transition duration-100 ease-in-out ring-gray focus:ring-inset'\r\n\t\t\t\tactiveClassName='bg-gray-200'\r\n\t\t\t\tonMouseEnter={() => setHover(!hover)}\r\n\t\t\t\tonMouseLeave={() => setHover(false)}\r\n\t\t\t\tto={link.link}\r\n\t\t\t>\r\n\t\t\t\t{hover && (\r\n\t\t\t\t\t<div className='w-auto max-w-md mt-2 ml-2 p-2 absolute left-0 z-40 transform -translate-y-1 translate-x-56 rounded-lg bg-gray-900 shadow-md text-white text-sm whitespace-nowrap'>\r\n\t\t\t\t\t\t{link.description}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<span>{link.title}</span>\r\n\t\t\t\t{link.new && (\r\n\t\t\t\t\t<span className='p-1 rounded-lg bg-purple-500 text-white text-xs'>\r\n\t\t\t\t\t\tNew\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t</NavLink>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst SettingsNavbar = () => {\r\n\tconst primaryLinks = [\r\n\t\t{\r\n\t\t\ttitle: 'Security',\r\n\t\t\tlink: '/settings/security/',\r\n\t\t\tdescription: 'Change your password & security preferences',\r\n\t\t\tnew: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Billing',\r\n\t\t\tlink: '/settings/billing/',\r\n\t\t\tdescription: 'Manage your Leadgeek plans',\r\n\t\t\tnew: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Affiliates',\r\n\t\t\tlink: '/settings/affiliates/',\r\n\t\t\tdescription:\r\n\t\t\t\t'Generate your unique affiliate link and view earned commissions',\r\n\t\t\tnew: true,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<nav className='fixed top-0 left-15 z-10 h-full min-h-screen w-56 pt-8 pb-16 flex flex-col justify-between bg-gray-100 text-gray-600 border-r border-gray-400'>\r\n\t\t\t<aside>\r\n\t\t\t\t<h1 className='px-6 text-xl text-gray-900 font-bold'>Settings</h1>\r\n\t\t\t\t<ol className='pt-4'>\r\n\t\t\t\t\t{primaryLinks.map((link, i) => (\r\n\t\t\t\t\t\t<li key={i} className='first:mt-0'>\r\n\t\t\t\t\t\t\t<NavbarLink link={link} />\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ol>\r\n\t\t\t</aside>\r\n\t\t</nav>\r\n\t);\r\n};\r\n\r\nexport default SettingsNavbar;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\n// components\r\nimport SettingsNavbar from '@components/layout/navigation/SettingsNavbar';\r\n\r\n// utils\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ninterface SettingsLayoutProps {\r\n\tchildren: React.ReactNode;\r\n\tisAuthenticated: boolean;\r\n\tuser: User;\r\n\ttitle: string;\r\n\tdescription: string;\r\n\tpill: any;\r\n}\r\n\r\nconst SettingsLayout: React.FC<SettingsLayoutProps> = ({\r\n\tchildren,\r\n\tisAuthenticated,\r\n\tuser,\r\n\ttitle,\r\n\tdescription,\r\n\tpill,\r\n}) => {\r\n\tconst [initials, setInitials] = useState<string[]>([]);\r\n\tuseEffect(() => {\r\n\t\tif (isAuthenticated) {\r\n\t\t\tlet userInitials = user.name.split(' ').map((n) => n[0]);\r\n\t\t\tsetInitials(userInitials);\r\n\t\t}\r\n\t}, [isAuthenticated, user.name]);\r\n\r\n\treturn (\r\n\t\t<div className='flex flex-row'>\r\n\t\t\t<SettingsNavbar />\r\n\t\t\t<section className='mb-6 w-full'>\r\n\t\t\t\t<header className='py-6 bg-gray-100 border-b border-gray-300'>\r\n\t\t\t\t\t<h1 className='ml-72 text-3xl font-bold text-gray-900'>\r\n\t\t\t\t\t\t{title || 'Settings'}\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div className='ml-72 max-w-screen-2xl'>\r\n\t\t\t\t\t<div className='md:flex md:items-center mt-6 pb-2 mr-16 border-b border-gray-200'>\r\n\t\t\t\t\t\t<div className='p-3 h-10 w-10 flex items-center justify-center rounded-full bg-gray-100 shadow-sm focus:outline-none focus:shadow-outline'>\r\n\t\t\t\t\t\t\t<span className='text-gray-600 text-lg font-bold'>\r\n\t\t\t\t\t\t\t\t{initials}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='ml-6'>\r\n\t\t\t\t\t\t\t<div className='md:flex md:items-center text-lg font-semibold'>\r\n\t\t\t\t\t\t\t\t<h2 className='font-bold'>{user.name}</h2>\r\n\t\t\t\t\t\t\t\t{pill && pill.text && (\r\n\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\tclassName={`ml-2 py-1 px-2 ${\r\n\t\t\t\t\t\t\t\t\t\t\tpill.active\r\n\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-teal-200 text-teal-600 border border-teal-400'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-gray-100 text-gray-800 border border-gray-400'\r\n\t\t\t\t\t\t\t\t\t\t} rounded-lg text-xs`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{pill.text}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<p className='text-gray-800'>{description}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>{children}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SettingsLayout;\r\n","import React from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon';\r\n\r\n// redux\r\nimport { useAppSelector } from '@utils/hooks';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport SettingsLayout from '@components/layout/SettingsLayout';\r\nimport FormField from '@components/utils/FormField';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\nconst ProfilePage = () => {\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\treturn (\r\n\t\tuser && (\r\n\t\t\t<AuthLayout>\r\n\t\t\t\t<SettingsLayout\r\n\t\t\t\t\ttitle={'Profile'}\r\n\t\t\t\t\tdescription={'Edit your Leadgeek profile'}\r\n\t\t\t\t\tpill={{\r\n\t\t\t\t\t\tactive: true,\r\n\t\t\t\t\t\ttext:\r\n\t\t\t\t\t\t\tstatus === 'idle' &&\r\n\t\t\t\t\t\t\t`Member since ${DateTime.fromISO(user.dateCreated).toFormat(\r\n\t\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t\t)}`,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tisAuthenticated={isAuthenticated}\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t>\r\n\t\t\t\t\t<section>\r\n\t\t\t\t\t\t{status === 'loading' ? (\r\n\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\tspinnerWidth={'sm'}\r\n\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className='w-full max-w-3xl'>\r\n\t\t\t\t\t\t\t\t<article className='w-full max-w-md mt-6'>\r\n\t\t\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\t\tBasic information\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t\t\t\t\t<FormField\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={'Name'}\r\n\t\t\t\t\t\t\t\t\t\t\ttype={'text'}\r\n\t\t\t\t\t\t\t\t\t\t\tname={'name'}\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={user.name}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={user.name}\r\n\t\t\t\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\t\t\t\tstyles={null}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<FormField\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={'Email'}\r\n\t\t\t\t\t\t\t\t\t\t\ttype={'email'}\r\n\t\t\t\t\t\t\t\t\t\t\tname={'email'}\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={user.email}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={user.email}\r\n\t\t\t\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\t\t\t\tstyles={null}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</SettingsLayout>\r\n\t\t\t</AuthLayout>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nexport default ProfilePage;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { updatePassword } from '@features/auth/authSlice';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\n\r\nimport FormField from '@components/utils/FormField';\r\nimport { ReactComponent as Check } from '@assets/images/svgs/check.svg';\r\nimport { ReactComponent as X } from '@assets/images/svgs/x.svg';\r\n\r\nconst ResetPassword = ({\r\n\tloading,\r\n\temail,\r\n\tfullWidthButton,\r\n\tupdatePassword,\r\n\tsetAlert,\r\n}) => {\r\n\tconst [formData, setFormData] = useState({\r\n\t\tpassword_1: '',\r\n\t\tpassword_2: '',\r\n\t});\r\n\tconst { password_1, password_2 } = formData;\r\n\tconst [lengthValidated, setLengthValidated] = useState(false);\r\n\tconst [emailValidated, setEmailValidated] = useState(false);\r\n\tconst [commonPasswordValidated, setCommonPasswordValidated] = useState(false);\r\n\tconst checkSyles =\r\n\t\t'inline-block h-4 w-4 text-teal-500 bg-teal-200 rounded-full';\r\n\tconst xStyles = 'inline-block h-4 w-4 text-red-500 bg-red-200 rounded-full';\r\n\r\n\t// reset password validation\r\n\t// export const resetPwValidation = (resetPwToken) => async (dispatch) => {\r\n\t// \tconst body = JSON.stringify({ resetPwToken });\r\n\t// \ttry {\r\n\t// \t\tdispatch({\r\n\t// \t\t\ttype: CHECK_RESET_PASSWORD_TOKEN,\r\n\t// \t\t});\r\n\t// \t\tconst res = await axios.post(\r\n\t// \t\t\t'/api/users/reset-password-validation',\r\n\t// \t\t\tbody,\r\n\t// \t\t\tconfig\r\n\t// \t\t);\r\n\t// \t\tif (res.data.message === 'Password reset link was validated') {\r\n\t// \t\t\tdispatch({\r\n\t// \t\t\t\ttype: SET_RESET_PASSWORD_TOKEN,\r\n\t// \t\t\t\tpayload: res.data.user,\r\n\t// \t\t\t});\r\n\t// \t\t} else {\r\n\t// \t\t\treturn dispatch(\r\n\t// \t\t\t\tsetAlert(\r\n\t// \t\t\t\t\t'Error resetting password',\r\n\t// \t\t\t\t\t\"Your password couldn't be reset. Please request a new email link or contact support.\",\r\n\t// \t\t\t\t\t'danger'\r\n\t// \t\t\t\t)\r\n\t// \t\t\t);\r\n\t// \t\t}\r\n\t// \t} catch (error) {\r\n\t// \t\tconsole.log(error);\r\n\t// \t}\r\n\t// };\r\n\r\n\t// update password x\r\n\t// export const updatePassword = (email, password) => async (dispatch) => {\r\n\t// \tconst emailToLowerCase = email.toLowerCase();\r\n\t// \tconsole.log(emailToLowerCase);\r\n\t// \tconst body = JSON.stringify({ email: emailToLowerCase, password });\r\n\t// \ttry {\r\n\t// \t\taxios.put('/api/users/update-password', body, config).then((res) => {\r\n\t// \t\t\tif (res.data === 'Password was successfully updated') {\r\n\t// \t\t\t\tdispatch(\r\n\t// \t\t\t\t\tsetAlert(\r\n\t// \t\t\t\t\t\t'Reset success',\r\n\t// \t\t\t\t\t\t'Your password was successfully updated.',\r\n\t// \t\t\t\t\t\t'success'\r\n\t// \t\t\t\t\t)\r\n\t// \t\t\t\t);\r\n\t// \t\t\t\tdispatch({ type: REMOVE_RESET_PASSWORD_TOKEN });\r\n\t// \t\t\t\tdispatch(login(email, password));\r\n\t// \t\t\t\tdispatch({ type: LOGIN_SUCCESS });\r\n\t// \t\t\t\tlocalStorage.removeItem('resetPwToken');\r\n\t// \t\t\t} else {\r\n\t// \t\t\t\tdispatch(\r\n\t// \t\t\t\t\tsetAlert(\r\n\t// \t\t\t\t\t\t'Error resetting password',\r\n\t// \t\t\t\t\t\t\"Your password couldn't be updated. Please contact support.\",\r\n\t// \t\t\t\t\t\t'danger'\r\n\t// \t\t\t\t\t)\r\n\t// \t\t\t\t);\r\n\t// \t\t\t}\r\n\t// \t\t\treturn;\r\n\t// \t\t});\r\n\t// \t} catch (error) {\r\n\t// \t\tconst errors = error.response.data.errors;\r\n\t// \t\tif (errors) {\r\n\t// \t\t\terrors.forEach((error) => dispatch(setAlert(error.message, 'danger')));\r\n\t// \t\t}\r\n\t// \t}\r\n\t// };\r\n\r\n\tconst securityMeasureBullets = [\r\n\t\t{\r\n\t\t\tsvg: (\r\n\t\t\t\t<span>\r\n\t\t\t\t\t{lengthValidated ? (\r\n\t\t\t\t\t\t<Check className={checkSyles} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<X className={xStyles} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t\tcontent: 'Is 7 characters or longer',\r\n\t\t},\r\n\t\t{\r\n\t\t\tsvg: (\r\n\t\t\t\t<span>\r\n\t\t\t\t\t{emailValidated ? (\r\n\t\t\t\t\t\t<Check className={checkSyles} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<X className={xStyles} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t\tcontent: `Does not match or significantly contain your email, e.g. don't use \"email123\"`,\r\n\t\t},\r\n\t\t{\r\n\t\t\tsvg: (\r\n\t\t\t\t<span>\r\n\t\t\t\t\t{commonPasswordValidated ? (\r\n\t\t\t\t\t\t<Check className={checkSyles} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<X className={xStyles} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t\tcontent: (\r\n\t\t\t\t<span>\r\n\t\t\t\t\tIs not a member of this{' '}\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref='https://github.com/danielmiessler/SecLists/blob/master/Passwords/Common-Credentials/10-million-password-list-top-100.txt'\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\tclassName='link'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tlist of common passwords\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\tconst onChange = (e) => {\r\n\t\tsetFormData({ ...formData, [e.target.name]: e.target.value });\r\n\t};\r\n\tconst passwordList = [\r\n\t\t'123456',\r\n\t\t'password',\r\n\t\t'12345678',\r\n\t\t'qwerty',\r\n\t\t'123456789',\r\n\t\t'12345',\r\n\t\t'1234',\r\n\t\t'111111',\r\n\t\t'1234567',\r\n\t\t'dragon',\r\n\t\t'123123',\r\n\t\t'baseball',\r\n\t\t'abc123',\r\n\t\t'football',\r\n\t\t'monkey',\r\n\t\t'letmein',\r\n\t\t'696969',\r\n\t\t'shadow',\r\n\t\t'master',\r\n\t\t'666666',\r\n\t\t'qwertyuiop',\r\n\t\t'123321',\r\n\t\t'mustang',\r\n\t\t'1234567890',\r\n\t\t'michael',\r\n\t\t'654321',\r\n\t\t'pussy',\r\n\t\t'superman',\r\n\t\t'1qaz2wsx',\r\n\t\t'7777777',\r\n\t\t'fuckyou',\r\n\t\t'121212',\r\n\t\t'000000',\r\n\t\t'qazwsx',\r\n\t\t'123qwe',\r\n\t\t'killer',\r\n\t\t'trustno1',\r\n\t\t'jordan',\r\n\t\t'jennifer',\r\n\t\t'zxcvbnm',\r\n\t\t'asdfgh',\r\n\t\t'hunter',\r\n\t\t'buster',\r\n\t\t'soccer',\r\n\t\t'harley',\r\n\t\t'batman',\r\n\t\t'andrew',\r\n\t\t'tigger',\r\n\t\t'sunshine',\r\n\t\t'iloveyou',\r\n\t\t'fuckme',\r\n\t\t'2000',\r\n\t\t'charlie',\r\n\t\t'robert',\r\n\t\t'thomas',\r\n\t\t'hockey',\r\n\t\t'ranger',\r\n\t\t'daniel',\r\n\t\t'starwars',\r\n\t\t'klaster',\r\n\t\t'112233',\r\n\t\t'george',\r\n\t\t'asshole',\r\n\t\t'computer',\r\n\t\t'michelle',\r\n\t\t'jessica',\r\n\t\t'pepper',\r\n\t\t'1111',\r\n\t\t'zxcvbn',\r\n\t\t'555555',\r\n\t\t'11111111',\r\n\t\t'131313',\r\n\t\t'freedom',\r\n\t\t'777777',\r\n\t\t'pass',\r\n\t\t'fuck',\r\n\t\t'maggie',\r\n\t\t'159753',\r\n\t\t'aaaaaa',\r\n\t\t'ginger',\r\n\t\t'princess',\r\n\t\t'joshua',\r\n\t\t'cheese',\r\n\t\t'amanda',\r\n\t\t'summer',\r\n\t\t'love',\r\n\t\t'ashley',\r\n\t\t'6969',\r\n\t\t'nicole',\r\n\t\t'chelsea',\r\n\t\t'biteme',\r\n\t\t'matthew',\r\n\t\t'access',\r\n\t\t'yankees',\r\n\t\t'987654321',\r\n\t\t'dallas',\r\n\t\t'austin',\r\n\t\t'thunder',\r\n\t\t'taylor',\r\n\t\t'matrix',\r\n\t\t'minecraft',\r\n\t];\r\n\tconst [terriblePasswords] = useState(passwordList);\r\n\tuseEffect(() => {\r\n\t\tif (password_1 || password_2) {\r\n\t\t\tsetCommonPasswordValidated(false);\r\n\t\t\tconst stringBeforeAt = (string) => {\r\n\t\t\t\tlet splitString = string.split('@');\r\n\t\t\t\treturn splitString[0];\r\n\t\t\t};\r\n\t\t\tlet emailBeforeAt = stringBeforeAt(email);\r\n\t\t\tif (password_1.length >= 7 && password_2.length >= 7) {\r\n\t\t\t\tsetLengthValidated(true);\r\n\t\t\t\tif (\r\n\t\t\t\t\tpassword_1.includes(emailBeforeAt) ||\r\n\t\t\t\t\tpassword_2.includes(emailBeforeAt)\r\n\t\t\t\t) {\r\n\t\t\t\t\tsetEmailValidated(false);\r\n\t\t\t\t\tsetAlert(\r\n\t\t\t\t\t\t'Something went wrong',\r\n\t\t\t\t\t\t'The password is too similar to your email. Please choose another password.',\r\n\t\t\t\t\t\t'danger'\r\n\t\t\t\t\t);\r\n\t\t\t\t} else if (\r\n\t\t\t\t\t!terriblePasswords.includes(password_1) ||\r\n\t\t\t\t\t!terriblePasswords.includes(password_2)\r\n\t\t\t\t) {\r\n\t\t\t\t\tsetCommonPasswordValidated(true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetCommonPasswordValidated(false);\r\n\t\t\t\t\tsetAlert(\r\n\t\t\t\t\t\t'Something went wrong',\r\n\t\t\t\t\t\t'The provided password is too common. Please pick a more unique password.',\r\n\t\t\t\t\t\t'danger'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetEmailValidated(true);\r\n\t\t\t}\r\n\t\t\tif (password_1.length < 7 || password_2.length < 7) {\r\n\t\t\t\tsetLengthValidated(false);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}, [password_1, password_2, terriblePasswords, setAlert, email]);\r\n\tconst handleUpdatePassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!password_1 || !password_2) {\r\n\t\t\tsetAlert(\r\n\t\t\t\t'Please enter a password',\r\n\t\t\t\t\"The password field can't be empty. Please enter a password and try again.\",\r\n\t\t\t\t'danger'\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (password_1 !== password_2) {\r\n\t\t\tsetAlert(\r\n\t\t\t\t\"The passwords don't match\",\r\n\t\t\t\t\"The passwords don't match up. Please check spelling or case sensitivity and try again.\",\r\n\t\t\t\t'danger'\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tif (!lengthValidated) {\r\n\t\t\t\tsetAlert(\r\n\t\t\t\t\t'The password is too short',\r\n\t\t\t\t\t'The password needs to be at least 7 characters.',\r\n\t\t\t\t\t'danger'\r\n\t\t\t\t);\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tconst password = password_1;\r\n\t\t\t\tupdatePassword(email, password);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tconst onSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (setLengthValidated && setEmailValidated && setCommonPasswordValidated) {\r\n\t\t\thandleUpdatePassword(e);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t!loading && (\r\n\t\t\t<article className='pt-2'>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<div className='inline-block'>\r\n\t\t\t\t\t\tIn order to protect your account, please make sure your password:\r\n\t\t\t\t\t\t<ul className='mt-4'>\r\n\t\t\t\t\t\t\t{securityMeasureBullets.map((bullet, i) => (\r\n\t\t\t\t\t\t\t\t<li key={i} className='mt-1 flex'>\r\n\t\t\t\t\t\t\t\t\t<span>{bullet.svg}</span>\r\n\t\t\t\t\t\t\t\t\t<span className='ml-2'>{bullet.content}</span>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\t\t\t\t<form className='my-3' onSubmit={(e) => onSubmit(e)}>\r\n\t\t\t\t\t<FormField\r\n\t\t\t\t\t\tlabel='New Password'\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\tplaceholder='Create a new password'\r\n\t\t\t\t\t\tname='password_1'\r\n\t\t\t\t\t\tonChange={(e) => onChange(e)}\r\n\t\t\t\t\t\tminLength={7}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<FormField\r\n\t\t\t\t\t\tlabel='Confirm Password'\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\tplaceholder='Enter the password again'\r\n\t\t\t\t\t\tname='password_2'\r\n\t\t\t\t\t\tonChange={(e) => onChange(e)}\r\n\t\t\t\t\t\tminLength={7}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\tclassName={`mt-4 py-2 px-4 ${\r\n\t\t\t\t\t\t\tfullWidthButton && 'w-full'\r\n\t\t\t\t\t\t} rounded-md text-white shadow-md bg-purple-500 hover:bg-purple-600 transition-colors duration-200 focus:outline-none focus:shadow-outline`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tReset password\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</article>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nResetPassword.propTypes = {\r\n\tloading: PropTypes.bool.isRequired,\r\n\temail: PropTypes.string.isRequired,\r\n\tfullWidthButton: PropTypes.bool,\r\n\tupdatePassword: PropTypes.func.isRequired,\r\n\tsetAlert: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\tconst { setAlert } = state.alert;\r\n\tconst { loading, email, fullWidthButton } = ownProps;\r\n\treturn { loading, email, fullWidthButton, setAlert };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n\tupdatePassword,\r\n\tsetAlert,\r\n})(ResetPassword);\r\n","import React from 'react';\r\n\r\n// redux\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport SettingsLayout from '@components/layout/SettingsLayout';\r\nimport ResetPassword from '@components/auth/login/password/ResetPassword';\r\nimport Spinner from '@components/utils/Spinner';\r\nimport { useAppSelector } from '@utils/hooks';\r\n\r\nconst Dashboard = () => {\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\treturn (\r\n\t\tuser && (\r\n\t\t\t<AuthLayout>\r\n\t\t\t\t<SettingsLayout\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t\ttitle={'Security & password'}\r\n\t\t\t\t\tdescription={'Change your password & other security settings'}\r\n\t\t\t\t\tisAuthenticated={isAuthenticated}\r\n\t\t\t\t\tpill={null}\r\n\t\t\t\t>\r\n\t\t\t\t\t<section className='my-6'>\r\n\t\t\t\t\t\t{status === 'loading' ? (\r\n\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\tspinnerWidth={'sm'}\r\n\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className='w-full max-w-3xl'>\r\n\t\t\t\t\t\t\t\t<article>\r\n\t\t\t\t\t\t\t\t\t<h3 className='font-bold text-lg text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\tReset Password\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<div className='max-w-md'>\r\n\t\t\t\t\t\t\t\t\t\t<ResetPassword email={user && user.email} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</SettingsLayout>\r\n\t\t\t</AuthLayout>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nexport default Dashboard;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\n// packages\r\nimport axios from 'axios';\r\nimport { DateTime } from 'luxon';\r\n\r\n// redux\r\nimport { useAppSelector } from '@utils/hooks';\r\n// import { cancelStripeSub } from '@redux/actions/auth';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport NullState from '@components/utils/NullState';\r\nimport SettingsLayout from '@components/layout/SettingsLayout';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport {\r\n\tcapitalize,\r\n\tconfig,\r\n\tformatTimestamp,\r\n\tplanCheckerByPrice,\r\n\ttruncate,\r\n} from '@utils/utils';\r\n\r\ninterface BillingState {\r\n\tplan: {\r\n\t\tstatus: 'loading' | 'idle';\r\n\t\tid: string | null;\r\n\t\tcreated: string | null;\r\n\t\tcancelAt: string | null;\r\n\t\tcancelAtPeriod: boolean | null;\r\n\t\tcurrentPeriodEnd: string | null;\r\n\t\tplan: {\r\n\t\t\tid: string | null;\r\n\t\t\tamount: number | null;\r\n\t\t};\r\n\t};\r\n\r\n\tpaymentHistory: {\r\n\t\tstatus: 'loading' | 'idle';\r\n\t\tpayments: any;\r\n\t};\r\n}\r\n\r\nconst BillingPage = () => {\r\n\t// auth state\r\n\tconst authStatus = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// local state\r\n\tconst [billingState, setBillingState] = useState<BillingState>({\r\n\t\tplan: {\r\n\t\t\tstatus: 'loading',\r\n\t\t\tid: null,\r\n\t\t\tcreated: null,\r\n\t\t\tcancelAt: null,\r\n\t\t\tcancelAtPeriod: null,\r\n\t\t\tcurrentPeriodEnd: null,\r\n\t\t\tplan: {\r\n\t\t\t\tid: null,\r\n\t\t\t\tamount: null,\r\n\t\t\t},\r\n\t\t},\r\n\t\tpaymentHistory: {\r\n\t\t\tstatus: 'loading',\r\n\t\t\tpayments: [],\r\n\t\t},\r\n\t});\r\n\tconst [validBilling] = useState(\r\n\t\tisAuthenticated && user?.subscription.cusId ? true : false\r\n\t);\r\n\r\n\tconst getSuccessfulPayments = async (cusId: string) => {\r\n\t\ttry {\r\n\t\t\tconst body = JSON.stringify({ cusId });\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/users/get-successful-payments/',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\tsetBillingState({\r\n\t\t\t\t...billingState,\r\n\t\t\t\tpaymentHistory: {\r\n\t\t\t\t\t...billingState.paymentHistory,\r\n\t\t\t\t\tstatus: 'idle',\r\n\t\t\t\t\tpayments: data.payments,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst getActivePlanDetails = async (subIds: string) => {\r\n\t\ttry {\r\n\t\t\tconst body = JSON.stringify({ subIds });\r\n\t\t\tconst {\r\n\t\t\t\tdata: { message, subscription },\r\n\t\t\t} = await axios.post('/api/users/get-active-plan-details', body, config);\r\n\t\t\tif (message === 'Subscription data found') {\r\n\t\t\t\tconsole.log(subscription);\r\n\t\t\t} else {\r\n\t\t\t\tsetBillingState({\r\n\t\t\t\t\t...billingState,\r\n\t\t\t\t\tplan: {\r\n\t\t\t\t\t\t...billingState.plan,\r\n\t\t\t\t\t\tstatus: 'idle',\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tisAuthenticated &&\r\n\t\t\tvalidBilling &&\r\n\t\t\tuser?.subscription.cusId &&\r\n\t\t\tgetSuccessfulPayments(user.subscription.cusId);\r\n\t}, [isAuthenticated, user?.subscription.cusId, validBilling]);\r\n\r\n\t// useEffect(() => {\r\n\t// \tisAuthenticated &&\r\n\t// \t\tvalidBilling &&\r\n\t// \t\tuser?.subscription.subIds &&\r\n\t// \t\t// getActivePlanDetails(user.subscription.subIds);\r\n\t// }, [isAuthenticated, validBilling, user?.subscription.subIds]);\r\n\r\n\tconst paymentMethodBrand =\r\n\t\tisAuthenticated &&\r\n\t\tvalidBilling &&\r\n\t\tuser?.billing.brand &&\r\n\t\tcapitalize(user.billing.brand);\r\n\r\n\treturn (\r\n\t\tauthStatus === 'idle' &&\r\n\t\tuser && (\r\n\t\t\t<AuthLayout>\r\n\t\t\t\t<SettingsLayout\r\n\t\t\t\t\tisAuthenticated={isAuthenticated}\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t\ttitle={'Billing & plans'}\r\n\t\t\t\t\tdescription={'Manage your Leadgeek plan'}\r\n\t\t\t\t\tpill={null}\r\n\t\t\t\t>\r\n\t\t\t\t\t<section className='my-6'>\r\n\t\t\t\t\t\t{validBilling ? (\r\n\t\t\t\t\t\t\t<div className='w-full pr-16 text-gray-800'>\r\n\t\t\t\t\t\t\t\t<section>\r\n\t\t\t\t\t\t\t\t\t<header className='flex items-end justify-between pb-2 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\t\tSubscription information\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t{billingState.plan.status === 'loading' ? (\r\n\t\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Loading your subscription info...'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : billingState.plan.id ? (\r\n\t\t\t\t\t\t\t\t\t\t// <div className='mt-6 grid grid-flow-col grid-rows-3 grid-cols-2 gap-y-2 gap-x-8'>\r\n\t\t\t\t\t\t\t\t\t\t// \t<div className='flex items-center justify-between'>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t<div>Member since</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t{isAuthenticated &&\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\tDateTime.fromISO(user.dateCreated).toFormat(\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t// \t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t<div className='flex items-center justify-between'>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t<div>Current subscription active since</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t{isAuthenticated &&\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\tformatTimestamp(billingState.plan.created, true)}\r\n\t\t\t\t\t\t\t\t\t\t// \t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t<div className='flex items-center justify-between'>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t<div>Current subscription</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t<div className='font-bold'>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t{planCheckerByPrice(billingState.plan.plan.amount)}{' '}\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\tplan\r\n\t\t\t\t\t\t\t\t\t\t// \t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t<div className='flex items-center justify-between'>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\tEst. charge for{' '}\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t<span className='font-bold'>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\t{isAuthenticated &&\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\t\t!plan.cancelAtPeriodEnd &&\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\t\tformatTimestamp(plan.currentPeriodEnd)}\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t<div className='font-bold'>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t${plan.plan.amount / 100}\r\n\t\t\t\t\t\t\t\t\t\t// \t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t</div>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t/* <div className='flex items-center justify-between'>\r\n                                        <div>Default payment method</div>\r\n                                        <div>\r\n                                            <button className='ml-2 font-semibold text-purple-600 hover:text-gray-700 ring-gray rounded-lg transition-main'>\r\n                                                {paymentMethodBrand} &#8226;&#8226;&#8226;&#8226;{' '}\r\n                                                {user.billing.last4}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div> */\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t// \t<div className='flex items-center justify-between'>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t<div>Change subscription preferences</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\thref='mailto:support@leadgeek.io?subject=Update Account'\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\ttarget='__blank'\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\tclassName='ml-2 font-semibold text-purple-600 hover:text-gray-700 ring-gray rounded-lg transition-main'\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t\tContact support\r\n\t\t\t\t\t\t\t\t\t\t// \t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t// \t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t// \t</div>\r\n\t\t\t\t\t\t\t\t\t\t// </div>\r\n\t\t\t\t\t\t\t\t\t\t<div>There are no active plans</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<article className='mt-6'>\r\n\t\t\t\t\t\t\t\t\t<header className='flex items-end justify-between pb-2 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\t\tPayment history\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t{billingState.paymentHistory.status === 'loading' ? (\r\n\t\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Loading your account payments...'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : billingState.paymentHistory.payments.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.tableWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<table className={classes.table} id='payments'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<thead className={classes.tableHeadWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr className={classes.tableHead}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Invoice ID</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Plan</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Amount</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tPayment method\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='pl-2 text-right'>Date</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody className={classes.tableBody}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{billingState.paymentHistory.payments.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(payment: any, i: number) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr key={i} className={classes.rowWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* invoice id */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={payment.invoice.pdf}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='font-semibold text-purple-600 hover:text-gray-700 ring-gray rounded-lg transition-main'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{truncate(payment.invoice.id, 31)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* plan */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{planCheckerByPrice(payment.amount)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* amount */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>$</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.amount / 100}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={classes.valueIndicator}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.currency.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* payment method */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{paymentMethodBrand}{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#8226;&#8226;&#8226;&#8226;{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#8226;&#8226;&#8226;&#8226;{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#8226;&#8226;&#8226;&#8226;{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.paymentMethod.last4}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* date */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='pl-2 text-right'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTimestamp(payment.created, true)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<section className='mt-6'>\r\n\t\t\t\t\t\t\t\t\t\t\t<NullState\r\n\t\t\t\t\t\t\t\t\t\t\t\theader={'No subscription payments found'}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext={'No payments have been found for your account.'}\r\n\t\t\t\t\t\t\t\t\t\t\t\tpath={svgList.payment}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlink={''}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlinkText={''}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<section className='mt-6'>\r\n\t\t\t\t\t\t\t\t<NullState\r\n\t\t\t\t\t\t\t\t\theader={'No subscription found'}\r\n\t\t\t\t\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\t\t\t\t\"There isn't a subscription associated with this account.\"\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tpath={svgList.affiliate}\r\n\t\t\t\t\t\t\t\t\tlink={''}\r\n\t\t\t\t\t\t\t\t\tlinkText={''}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</SettingsLayout>\r\n\t\t\t</AuthLayout>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nconst svgList = {\r\n\tpayment: (\r\n\t\t<g>\r\n\t\t\t<path d='M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z' />\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t</g>\r\n\t),\r\n\taffiliate: (\r\n\t\t<path d='M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z' />\r\n\t),\r\n};\r\n\r\nconst classes = {\r\n\ttableWrapper: 'w-full relative mt-4',\r\n\ttable: 'w-full table-auto',\r\n\ttableHeadWrapper: 'border-b border-gray-200',\r\n\ttableHead:\r\n\t\t'text-left font-semibold text-xs text-gray-600 uppercase tracking-widest whitespace-no-wrap',\r\n\ttableHeadCell: 'p-2',\r\n\ttableBody: 'text-sm text-gray-800',\r\n\trowWrapper: 'relative px-1 border-b border-gray-200 hover:bg-gray-100',\r\n\r\n\tdefaultCellWrapper: 'p-2',\r\n\tdefaultSvg: 'svg-base',\r\n\tvalueIndicator: 'ml-1 text-gray-400 font-semibold',\r\n};\r\n\r\nexport default BillingPage;\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@utils/hooks';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport NullState from '@components/utils/NullState';\r\nimport SettingsLayout from '@components/layout/SettingsLayout';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport {\r\n\tcalcAffCommission,\r\n\tcalcNextPayoutDate,\r\n\tcalcNextPossiblePayoutDate,\r\n\tformatTimestamp,\r\n\tplanCheckerByPrice,\r\n\ttruncateAndObfuscate,\r\n} from '@utils/utils';\r\n\r\ninterface Payment {\r\n\tid: string;\r\n\tamount: number;\r\n\tcurrency: string;\r\n\tcreated: number;\r\n}\r\n\r\nconst AffiliatesPage = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// local state\r\n\tconst [affiliateState, setAffiliateState] = useState<{\r\n\t\tpaypalEmail: string;\r\n\t\tpaymentHistory: {\r\n\t\t\tstatus: string;\r\n\t\t\tpayments: Payment[];\r\n\t\t};\r\n\t}>({\r\n\t\tpaypalEmail: '',\r\n\t\tpaymentHistory: {\r\n\t\t\tstatus: 'loading',\r\n\t\t\tpayments: [],\r\n\t\t},\r\n\t});\r\n\tconst [changePaypal, setChangePaypal] = useState(false);\r\n\tconst [copiedText, setCopiedText] = useState(false);\r\n\tconst [copyText, setCopyText] = useState('Copy LGID');\r\n\tconst [isAffiliate] = useState(\r\n\t\tisAuthenticated && user?.referrals.referrer.isReferrer\r\n\t);\r\n\tconst [lastPayout] = useState(calcNextPossiblePayoutDate(-1));\r\n\tconst [lgid] = useState(isAuthenticated && user?.referrals.referrer.lgid);\r\n\tconst [modal, setModal] = useState(false);\r\n\tconst [nextPayout] = useState(calcNextPossiblePayoutDate(1));\r\n\r\n\t// destructure necessary items\r\n\tconst {\r\n\t\tpaypalEmail,\r\n\t\tpaymentHistory: { status: paymentStatus, payments },\r\n\t} = affiliateState;\r\n\r\n\t// get affiliate payments if user is authenticated & affiliate\r\n\tuseEffect(() => {\r\n\t\t// status === 'idle' &&\r\n\t\t// \tisAffiliate &&\r\n\t\t// \tpayments.length === 0 &&\r\n\t\t// \tgetAffiliatePayments(\r\n\t\t// \t\tuser?.referrals.referrer.clients,\r\n\t\t// \t\tuser?.referrals.referrer.dateCreated\r\n\t\t// \t);\r\n\t}, [\r\n\t\tstatus,\r\n\t\tisAffiliate,\r\n\t\tpayments,\r\n\t\tuser?.referrals.referrer.clients,\r\n\t\tuser?.referrals.referrer.dateCreated,\r\n\t]);\r\n\r\n\t// close modal on click outside\r\n\tconst modalRef = useRef();\r\n\t// close modal on esc key\r\n\tconst keyPress = useCallback(\r\n\t\t(e) => {\r\n\t\t\tif (e.key === 'Escape' && modal) {\r\n\t\t\t\tsetModal(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[setModal, modal]\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('keydown', keyPress);\r\n\t\treturn () => document.removeEventListener('keydown', keyPress);\r\n\t}, [keyPress]);\r\n\r\n\t// handle input change for PayPal email\r\n\tconst onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetAffiliateState({ ...affiliateState, [e.target.name]: e.target.value });\r\n\t};\r\n\r\n\t// export const getAffiliatePayments =\r\n\t// (clients, affCreated) => async (dispatch) => {\r\n\t// \ttry {\r\n\t// \t\tconst body = JSON.stringify({ clients, affCreated });\r\n\t// \t\tconst {\r\n\t// \t\t\tdata: { msg: message, affPayments },\r\n\t// \t\t} = await axios.post('/api/users/get-affiliate-payments', body, config);\r\n\t// \t\tif (message === 'Referred clients with valid payments were found.') {\r\n\t// \t\t\tdispatch({\r\n\t// \t\t\t\ttype: SET_AFFILIATE_PAYMENTS,\r\n\t// \t\t\t\tpayload: affPayments,\r\n\t// \t\t\t});\r\n\t// \t\t} else {\r\n\t// \t\t\tdispatch({\r\n\t// \t\t\t\ttype: FINISHED_AFFILIATE_PAYMENTS_LOADING,\r\n\t// \t\t\t});\r\n\t// \t\t}\r\n\t// \t} catch (error) {\r\n\t// \t\tconsole.log(error);\r\n\t// \t}\r\n\t// };\r\n\r\n\t// export const updatePaypalEmail =\r\n\t// (id, oldEmail, newEmail) => async (dispatch) => {\r\n\t// \ttry {\r\n\t// \t\tif (oldEmail === newEmail) {\r\n\t// \t\t\tdispatch(\r\n\t// \t\t\t\tsetAlert(\r\n\t// \t\t\t\t\t'Submission error',\r\n\t// \t\t\t\t\t'Your current and submitted PayPal emails are the same.',\r\n\t// \t\t\t\t\t'warning'\r\n\t// \t\t\t\t)\r\n\t// \t\t\t);\r\n\t// \t\t}\r\n\t// \t\tconst body = JSON.stringify({ id, newEmail });\r\n\t// \t\tconst {\r\n\t// \t\t\tdata: { status, msg },\r\n\t// \t\t} = await axios.put('/api/users/update-affiliate-paypal', body, config);\r\n\t// \t\tif (status === 'success') {\r\n\t// \t\t\tdispatch({\r\n\t// \t\t\t\ttype: SET_PAYPAL_EMAIL,\r\n\t// \t\t\t\tpayload: newEmail,\r\n\t// \t\t\t});\r\n\t// \t\t\tdispatch(setAlert('Update success', msg, 'success'));\r\n\t// \t\t} else {\r\n\t// \t\t\tdispatch(setAlert('Update failure', msg, 'danger'));\r\n\t// \t\t}\r\n\t// \t} catch (error) {\r\n\t// \t\tconsole.log(error);\r\n\t// \t}\r\n\t// };\r\n\r\n\t// submit for form\r\n\tconst onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\t// updatePaypalEmail(\r\n\t\t// \tuser?._id,\r\n\t\t// \tuser?.referrals.referrer.paypalEmail,\r\n\t\t// \taffiliateState.paypalEmail\r\n\t\t// );\r\n\t\tsetChangePaypal(false);\r\n\t};\r\n\r\n\tconst calcCommissionTotal = (payments: any) => {\r\n\t\tconst total = payments.reduce((a: any, b: any) => {\r\n\t\t\treturn a + b['amount'];\r\n\t\t}, 0);\r\n\t\treturn calcAffCommission(total);\r\n\t};\r\n\r\n\tconst calcAffPayout = (payments: any) => {\r\n\t\tconst eligiblePayments = payments.filter(\r\n\t\t\t(payment: any) =>\r\n\t\t\t\tcalcNextPayoutDate(payment.created) >= lastPayout &&\r\n\t\t\t\tcalcNextPayoutDate(payment.created) <= nextPayout\r\n\t\t);\r\n\t\tconst affPayout = calcCommissionTotal(eligiblePayments);\r\n\r\n\t\treturn affPayout;\r\n\t};\r\n\r\n\tconst basicInformationItems = [\r\n\t\t{\r\n\t\t\ttitle: <span>Unique link</span>,\r\n\t\t\tvalue: (\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => setModal((prev) => !prev)}\r\n\t\t\t\t\tclassName='font-semibold text-purple-600 hover:text-gray-700 ring-gray rounded-lg transition-main'\r\n\t\t\t\t>\r\n\t\t\t\t\tGenerate affiliate link\r\n\t\t\t\t</button>\r\n\t\t\t),\r\n\t\t\tisInteractable: true,\r\n\t\t\tt: 'Generate & copy your unique link in the format \"https://leadgeek.io/?lgid=YOUR_LGID\"',\r\n\t\t\tsize: '',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: <span>PayPal email address</span>,\r\n\t\t\tvalue: changePaypal ? (\r\n\t\t\t\t<form onSubmit={(e) => onSubmit(e)} className='flex items-center'>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname='paypalEmail'\r\n\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\tplaceholder='Your new PayPal email'\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\tclassName='w-full py-1 px-2 rounded-l-md border border-gray-200 hover:border-purple-300 placeholder-gray-300 ring-purple focus:ring-inset'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button className='py-1 px-2 rounded-r-md text-white border border-purple-500 bg-purple-500 hover:bg-purple-600 transition-main ring-purple'>\r\n\t\t\t\t\t\tUpdate\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t) : (\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => setChangePaypal(true)}\r\n\t\t\t\t\tclassName={`font-semibold ${\r\n\t\t\t\t\t\tisAuthenticated &&\r\n\t\t\t\t\t\t(user?.referrals.referrer.paypalEmail || paypalEmail)\r\n\t\t\t\t\t\t\t? 'text-purple-500 hover:text-gray-700'\r\n\t\t\t\t\t\t\t: 'text-red-400 hover:text-red-500'\r\n\t\t\t\t\t} hover:text-gray-700 ring-gray rounded-lg transition-main`}\r\n\t\t\t\t>\r\n\t\t\t\t\t{isAuthenticated &&\r\n\t\t\t\t\t(user?.referrals.referrer.paypalEmail || paypalEmail)\r\n\t\t\t\t\t\t? paypalEmail || user?.referrals.referrer.paypalEmail\r\n\t\t\t\t\t\t: 'Add PayPal email for payout'}\r\n\t\t\t\t</button>\r\n\t\t\t),\r\n\t\t\tisInteractable: true,\r\n\t\t\tt: 'This is the PayPal email where your commission payments will be sent',\r\n\t\t\tsize: 'row-span-2',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: (\r\n\t\t\t\t<span>\r\n\t\t\t\t\tEst. payout for{' '}\r\n\t\t\t\t\t<span className='font-bold'>{nextPayout.toFormat('LLLL dd')}</span>\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t\tvalue:\r\n\t\t\t\tstatus === 'idle' ? (\r\n\t\t\t\t\t<span className='font-bold'>${calcAffPayout(payments)}</span>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\tcenter={true}\r\n\t\t\t\t\t\tspinnerWidth={'sm'}\r\n\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\tisInteractable: false,\r\n\t\t\tt: 'On the 15th of each month for commissions > 60 days old',\r\n\t\t\tsize: '',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: <span>Total clients referred</span>,\r\n\t\t\tvalue: (\r\n\t\t\t\t<span className='font-bold'>\r\n\t\t\t\t\t{isAuthenticated &&\r\n\t\t\t\t\t\tuser?.referrals.referrer.clients &&\r\n\t\t\t\t\t\tuser.referrals.referrer.clients.length}\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t\tisInteractable: false,\r\n\t\t\tt: '',\r\n\t\t\tsize: '',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: <span>Total referral value</span>,\r\n\t\t\tvalue:\r\n\t\t\t\tstatus === 'idle' ? (\r\n\t\t\t\t\t<span className='font-bold'>${calcCommissionTotal(payments)}</span>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\tcenter={true}\r\n\t\t\t\t\t\tspinnerWidth={'sm'}\r\n\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\tisInteractable: false,\r\n\t\t\tt: '',\r\n\t\t\tsize: '',\r\n\t\t},\r\n\t];\r\n\r\n\tconst codeItems = [\r\n\t\t{\r\n\t\t\ttitle: 'Text link',\r\n\t\t\tcode: (\r\n\t\t\t\t<code>\r\n\t\t\t\t\t&lt;<span className='code-html-tag'>a</span>{' '}\r\n\t\t\t\t\t<span className='code-html-attribute'>href</span>\r\n\t\t\t\t\t=\"https://leadgeek.io/?lgid={lgid ? lgid : 'YOUR_LGID'}\"{' '}\r\n\t\t\t\t\t<span className='code-html-attribute'>rel</span>\r\n\t\t\t\t\t=\"sponsored\"&gt;Join Leadgeek now&lt;/\r\n\t\t\t\t\t<span className='code-html-tag'>a</span>&gt;\r\n\t\t\t\t</code>\r\n\t\t\t),\r\n\t\t\tclipboard: `<a href=\"https://leadgeek.io/?lgid=${\r\n\t\t\t\tlgid ? lgid : 'YOUR_LGID'\r\n\t\t\t}\" rel=\"sponsored\">Join Leadgeek now</a>`,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Image link',\r\n\t\t\tcode: (\r\n\t\t\t\t<code>\r\n\t\t\t\t\t&lt;<span className='code-html-tag'>a</span>{' '}\r\n\t\t\t\t\t<span className='code-html-attribute'>href</span>\r\n\t\t\t\t\t=\"https://leadgeek.io/?lgid={lgid ? lgid : 'YOUR_LGID'}\"{' '}\r\n\t\t\t\t\t<span className='code-html-attribute'>rel</span>\r\n\t\t\t\t\t=\"sponsored\"&gt;\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t{'  '}&lt;\r\n\t\t\t\t\t<span className='code-html-tag'>img</span>{' '}\r\n\t\t\t\t\t<span className='code-html-attribute'>src</span>\r\n\t\t\t\t\t=\"https://www.YOUR_WEBSITE.com/YOUR_GRAPHIC.png\" /&gt;\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t&lt;/\r\n\t\t\t\t\t<span className='code-html-tag'>a</span>&gt;\r\n\t\t\t\t</code>\r\n\t\t\t),\r\n\t\t\tclipboard: `<a href=\"https://leadgeek.io/?lgid=${\r\n\t\t\t\tlgid ? lgid : 'YOUR_LGID'\r\n\t\t\t}\" rel=\"sponsored\"><img src=\"https://www.YOUR_WEBSITE.com/YOUR_GRAPHIC.png\"/></a>`,\r\n\t\t},\r\n\t];\r\n\r\n\treturn status === 'idle' && user ? (\r\n\t\t<AuthLayout>\r\n\t\t\t<SettingsLayout\r\n\t\t\t\tisAuthenticated={isAuthenticated}\r\n\t\t\t\tuser={user}\r\n\t\t\t\ttitle={'Affiliate panel'}\r\n\t\t\t\tdescription={'Manage your Leadgeek affiliate account'}\r\n\t\t\t\tpill={{\r\n\t\t\t\t\tactive: isAffiliate,\r\n\t\t\t\t\ttext: isAffiliate ? 'Active affiliate' : 'Inactive affiliate',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<section className='my-6'>\r\n\t\t\t\t\t{isAffiliate ? (\r\n\t\t\t\t\t\t<div className='w-full pr-16'>\r\n\t\t\t\t\t\t\t<section className='mt-6'>\r\n\t\t\t\t\t\t\t\t<header className='flex items-end justify-between pb-2 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\tBasic information\r\n\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t{lgid && (\r\n\t\t\t\t\t\t\t\t\t\t<div className='relative'>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavigator.clipboard.writeText(lgid || '');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetCopyText('LGID copied');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetCopiedText(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCopiedText(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCopyText('Copy LGID');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => setCopiedText(true)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={() => setCopiedText(false)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='p-1 rounded-lg bg-gray-100 text-gray-900 text-xs border border-gray-400 ring-gray transition-main ring-gray'\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tLeadgeek ID: {lgid}\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t{copiedText && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='absolute top-0 right-0 flex items-center p-2 transform -translate-y-10 rounded-lg shadow-md bg-gray-900 text-white text-xs whitespace-nowrap'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{copyText || 'Copy LGID'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t<div className='grid grid-flow-col grid-rows-3 grid-cols-2 gap-y-2 gap-x-8 mt-6'>\r\n\t\t\t\t\t\t\t\t\t{basicInformationItems.map((item, i) => (\r\n\t\t\t\t\t\t\t\t\t\t<BasicInformationItem\r\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={item.value}\r\n\t\t\t\t\t\t\t\t\t\t\tisInteractable={item.isInteractable}\r\n\t\t\t\t\t\t\t\t\t\t\tt={item.t}\r\n\t\t\t\t\t\t\t\t\t\t\tsize={item.size}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t<section className='mt-6'>\r\n\t\t\t\t\t\t\t\t<header className='pb-2 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\tCommission history\r\n\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t{paymentStatus === 'loading' ? (\r\n\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\t\ttext={'Loading affiliate payments...'}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t) : payments.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className={classes.tableWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t<table className={classes.table} id='payments'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<thead className={classes.tableHeadWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr className={classes.tableHead}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Transaction ID</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Plan</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Amount</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='pl-2 text-right'>Date created</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='pl-2 text-right'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEst. payout date\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tbody className={classes.tableBody}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{payments.map((payment, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr key={i} className={classes.rowWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* transaction id */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{truncateAndObfuscate(payment.id, 22)}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* plan */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{planCheckerByPrice(payment.amount)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* amount */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>$</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{calcAffCommission(payment.amount)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={classes.valueIndicator}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.currency.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* date created */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='pl-2 text-right'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTimestamp(payment.created, true)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* payout date */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='pl-2 text-right'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{calcNextPayoutDate(payment.created).toFormat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'LLLL dd, yyyy'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<section className='mt-6'>\r\n\t\t\t\t\t\t\t\t\t\t<NullState\r\n\t\t\t\t\t\t\t\t\t\t\theader={'No affiliate payments found'}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'No payments have been found for your account.'}\r\n\t\t\t\t\t\t\t\t\t\t\tpath={svgList.payment}\r\n\t\t\t\t\t\t\t\t\t\t\tlink={''}\r\n\t\t\t\t\t\t\t\t\t\t\tlinkText={''}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t{modal && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t// ref={modalRef}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetModal((prev) => !prev);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName='absolute inset-0 z-10 h-full w-full bg-gray-900 opacity-25'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName={`absolute top-1/2 inset-x-0 z-20 max-h-screen max-w-4xl mx-auto p-6 rounded-lg bg-white shadow-lg transform -translate-y-1/2`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<div className='relative pb-1 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t<header className='flex items-center'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 className='text-xl font-bold text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tGenerated affiliate links\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setModal((prev) => !prev)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='absolute top-0 right-0 ml-2 p-1 hover:bg-gray-100 rounded-md hover:text-gray-700 ring-gray transition duration-100 ease-in-out'\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td='M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{codeItems.map((codeItem, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<CodeItem\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={codeItem.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcode={codeItem.code}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclipboard={codeItem.clipboard}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<section className='mt-6'>\r\n\t\t\t\t\t\t\t<NullState\r\n\t\t\t\t\t\t\t\theader={'Become a Leadgeek affiliate'}\r\n\t\t\t\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\t\t\t'Leadgeek offers 25% lifetime commissions for any new member you refer. Apply @ www.leadgeek.io/affiliates'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpath={svgList.affiliate}\r\n\t\t\t\t\t\t\t\tlink={''}\r\n\t\t\t\t\t\t\t\tlinkText={''}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</section>\r\n\t\t\t</SettingsLayout>\r\n\t\t</AuthLayout>\r\n\t) : (\r\n\t\t<div className='h-screen'>\r\n\t\t\t<Spinner\r\n\t\t\t\tdivWidth={null}\r\n\t\t\t\tcenter={true}\r\n\t\t\t\tspinnerWidth={null}\r\n\t\t\t\tmargin={false}\r\n\t\t\t\ttext={'Loading your Leadgeek profile...'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ninterface BasicInformationItemProps {\r\n\ttitle: JSX.Element;\r\n\tvalue: JSX.Element;\r\n\tisInteractable: boolean;\r\n\tt: string;\r\n\tsize: string;\r\n}\r\n\r\nconst BasicInformationItem: React.FC<BasicInformationItemProps> = ({\r\n\ttitle,\r\n\tvalue,\r\n\tisInteractable,\r\n\tt,\r\n\tsize,\r\n}) => {\r\n\t// local state\r\n\tconst [tooltip, setTooltip] = useState(false);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`flex justify-between text-gray-900 ${\r\n\t\t\t\tsize ? `${size} items-start` : 'items-center'\r\n\t\t\t}`}\r\n\t\t>\r\n\t\t\t<header className='flex items-center'>\r\n\t\t\t\t<h3 className='align-bottom'>{title}</h3>\r\n\t\t\t\t{t && (\r\n\t\t\t\t\t<div className='mt-1 ml-2 relative z-0 flex items-end'>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonMouseEnter={() => setTooltip(true)}\r\n\t\t\t\t\t\t\tonMouseLeave={() => setTooltip(false)}\r\n\t\t\t\t\t\t\tclassName='text-gray-400 rounded-full ring-gray cursor-pointer'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\tclassName='h-4 w-4'\r\n\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\td='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z'\r\n\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{tooltip && (\r\n\t\t\t\t\t\t\t<div className='absolute left-0 flex items-center p-2 transform translate-x-6 translate-y-1 rounded-lg shadow-md bg-gray-900 text-white text-xs whitespace-nowrap'>\r\n\t\t\t\t\t\t\t\t{t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</header>\r\n\t\t\t{isInteractable ? value : <div>{value}</div>}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ninterface CodeItemProps {\r\n\ttitle: string;\r\n\tcode: JSX.Element;\r\n\tclipboard: string;\r\n}\r\n\r\nconst CodeItem: React.FC<CodeItemProps> = ({ title, code, clipboard }) => {\r\n\tconst [hover, setHover] = useState(false);\r\n\tconst [copyText, setCopyText] = useState('Copy code');\r\n\r\n\treturn (\r\n\t\t<div className='mt-6'>\r\n\t\t\t<header className='relative pb-1 border-b border-gray-200'>\r\n\t\t\t\t<h4 className='text-lg font-bold text-gray-800'>{title}</h4>\r\n\t\t\t\t{hover && (\r\n\t\t\t\t\t<div className='absolute left-1/2 transform -translate-x-1/2 -translate-y-8 p-2 rounded-lg shadow-md bg-gray-900 text-white text-xs whitespace-nowrap'>\r\n\t\t\t\t\t\t{copyText}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</header>\r\n\t\t\t<button\r\n\t\t\t\tonMouseEnter={() => setHover(true)}\r\n\t\t\t\tonMouseLeave={() => copyText === 'Copy code' && setHover(false)}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tnavigator.clipboard.writeText(clipboard || '');\r\n\t\t\t\t\tsetCopyText('Code copied');\r\n\t\t\t\t\tsetHover(true);\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tsetCopyText('Copy code');\r\n\t\t\t\t\t\tsetHover(false);\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t}}\r\n\t\t\t\tclassName='w-full mt-2 rounded-lg text-left ring-gray transition-main'\r\n\t\t\t>\r\n\t\t\t\t<pre className='p-4 bg-gray-900 rounded-lg text-gray-300 shadow-lg whitespace-pre'>\r\n\t\t\t\t\t{code}\r\n\t\t\t\t</pre>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst svgList = {\r\n\tpayment: (\r\n\t\t<g>\r\n\t\t\t<path d='M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z' />\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t</g>\r\n\t),\r\n\taffiliate: (\r\n\t\t<path d='M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z' />\r\n\t),\r\n};\r\n\r\nconst classes = {\r\n\ttableWrapper: 'w-full relative mt-4',\r\n\ttable: 'w-full table-auto',\r\n\ttableHeadWrapper: 'border-b border-gray-200',\r\n\ttableHead:\r\n\t\t'text-left font-semibold text-xs text-gray-600 uppercase tracking-widest whitespace-no-wrap',\r\n\ttableHeadCell: 'p-2',\r\n\ttableBody: 'text-sm text-gray-800',\r\n\trowWrapper: 'relative px-1 border-b border-gray-200 hover:bg-gray-100',\r\n\r\n\tdefaultCellWrapper: 'p-2',\r\n\tdefaultSvg: 'svg-base',\r\n\tvalueIndicator: 'ml-1 text-gray-400 font-semibold',\r\n};\r\n\r\nexport default AffiliatesPage;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { useAppSelector } from '@utils/hooks';\r\n\r\ninterface PrivateRouteProps {\r\n\tcomponent: React.FunctionComponent<any>;\r\n}\r\n\r\nconst PrivateRoute: React.FC<PrivateRouteProps> = ({\r\n\tcomponent: Component,\r\n\t...rest\r\n}) => {\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={(props) =>\r\n\t\t\t\t!isAuthenticated && status === 'idle' ? (\r\n\t\t\t\t\t<Redirect to='/login' />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Component {...props} />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import React, { Fragment } from 'react';\r\n\r\nimport { Route } from 'react-router-dom';\r\n\r\n// routes\r\nimport Login from '@pages/Login';\r\nimport ForgotPassword from '@pages/ForgotPassword';\r\nimport ResetPassword from '@pages/ResetPassword';\r\nimport Feed from '@pages/Feed';\r\nimport Liked from '@pages/Liked';\r\nimport Archived from '@pages/Archived';\r\nimport Search from '@pages/Search';\r\nimport Admin from '@pages/Admin';\r\nimport Help from '@pages/Help';\r\nimport Profile from '@pages/settings/Profile';\r\nimport Security from '@pages/settings/Security';\r\nimport Billing from '@pages/settings/Billing';\r\nimport Affiliates from '@pages/settings/Affiliates';\r\n// utils\r\nimport PrivateRoute from './PrivateRoute';\r\n\r\nconst Routes = () => {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Route exact path='/login' component={Login} />\r\n\t\t\t<Route exact path='/reset/forgot-password' component={ForgotPassword} />\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/reset/reset-password/:token'\r\n\t\t\t\tcomponent={ResetPassword}\r\n\t\t\t/>\r\n\t\t\t<PrivateRoute exact path='/' component={Feed} />\r\n\t\t\t<PrivateRoute exact path='/leads' component={Feed} />\r\n\t\t\t<PrivateRoute exact path='/leads/liked' component={Liked} />\r\n\t\t\t<PrivateRoute exact path='/leads/archived' component={Archived} />\r\n\t\t\t<PrivateRoute exact path='/search' component={Search} />\r\n\t\t\t<PrivateRoute exact path='/settings/profile' component={Profile} />\r\n\t\t\t<PrivateRoute exact path='/settings/security' component={Security} />\r\n\t\t\t<PrivateRoute exact path='/settings/billing' component={Billing} />\r\n\t\t\t<PrivateRoute exact path='/settings/affiliates' component={Affiliates} />\r\n\t\t\t<PrivateRoute exact path='/admin' component={Admin} />\r\n\t\t\t<PrivateRoute exact path='/help' component={Help} />\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default Routes;\r\n","import React, { Fragment, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Switch } from 'react-router-dom';\r\n// redux\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\nimport setAuthToken from '@utils/authTokens';\r\n// stripe\r\nimport { Elements } from '@stripe/react-stripe-js';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n// routes\r\nimport Routes from './routes/Routes';\r\nimport {\r\n\tgetUserData,\r\n\tremoveUserData,\r\n} from '@components/features/auth/authSlice';\r\n\r\nconst App: React.FC = () => {\r\n\tuseEffect(() => {\r\n\t\t// check for token in LS\r\n\t\tif (localStorage.token) {\r\n\t\t\tsetAuthToken(localStorage.token);\r\n\t\t}\r\n\t\tstore.dispatch(getUserData());\r\n\t\t// log user out from all tabs if they log out in one tab\r\n\t\twindow.addEventListener('storage', () => {\r\n\t\t\tif (!localStorage.token) store.dispatch(removeUserData());\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_KEY!);\r\n\r\n\treturn (\r\n\t\t<Elements stripe={stripePromise}>\r\n\t\t\t<Provider store={store}>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Routes />\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t</Router>\r\n\t\t\t</Provider>\r\n\t\t</Elements>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport TagManager from 'react-gtm-module';\r\n\r\nimport App from './App';\r\n\r\nimport '@assets/index.css';\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n\tTagManager.initialize({ gtmId: 'GTM-M4FPRGJ' });\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}