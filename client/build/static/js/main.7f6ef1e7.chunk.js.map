{"version":3,"sources":["components/features/alert/alertSlice.ts","utils/utils.ts","components/features/filters/filtersSlice.ts","components/features/leads/leadsSlice.ts","components/features/auth/authSlice.ts","components/features/users/usersSlice.ts","assets/images/svgs/logo-app.svg","store.ts","hooks/hooks.ts","components/utils/Button.tsx","components/features/alert/Alert.tsx","components/layout/navigation/DefaultFooter.tsx","assets/images/svgs/eye-open.svg","components/layout/DefaultLayout.tsx","components/utils/FormField.tsx","assets/images/svgs/eye-closed.svg","assets/images/svgs/check.svg","components/utils/PasswordFormField.tsx","utils/authTokens.ts","pages/Login.tsx","components/utils/Spinner.tsx","pages/ForgotPassword.tsx","pages/ResetPassword.tsx","components/layout/navigation/SearchBar.tsx","components/layout/navigation/Navbar.tsx","components/layout/AuthLayout.tsx","components/features/filters/DatePicker.tsx","components/utils/Badge.tsx","components/utils/DescriptionList.tsx","components/features/leads/Details.tsx","components/features/leads/ExportButton.tsx","components/utils/Select.tsx","components/features/filters/Filter.tsx","components/features/leads/LeadRow.tsx","components/utils/NullState.tsx","components/features/leads/LeadTable.tsx","components/layout/navigation/Pagination.tsx","components/features/leads/Leads.tsx","pages/Feed.tsx","pages/Liked.tsx","pages/Archived.tsx","pages/Search.tsx","assets/images/svgs/x.svg","pages/Admin.tsx","components/layout/navigation/SettingsNavbar.tsx","components/layout/SettingsLayout.tsx","pages/settings/Account.tsx","pages/settings/Billing.tsx","pages/settings/Affiliates.tsx","routes/PrivateRoute.tsx","routes/Routes.jsx","App.tsx","index.tsx"],"names":["initialState","id","title","message","alertType","leadsSlice","createSlice","name","reducers","removeAlert","setAlert","reducer","state","action","payload","prepare","alert","nanoid","visible","actions","config","headers","capitalize","string","toUpperCase","slice","truncate","n","length","substr","numberWithCommas","toString","replace","returnDomainFromUrl","url","result","match","calculateBSR","currentRank","category","totalItems","includes","toFixed","openLinkHandler","retailerLink","amzLink","window","open","useOutsideMousedown","ref","setState_1","setState_2","conditional","useEffect","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","useOutsideMouseup","planCheckerByPrice","price","calcAffCommission","formatTimestamp","timestamp","showYear","isoTime","Date","toJSON","DateTime","fromISO","toFormat","calcNextPossiblePayoutDate","instance","dt","now","cache","Number","newDate","set","day","hour","minute","second","plus","months","calcNextPayoutDate","date","passwordList","getLSFilters","lsFilters","localStorage","getItem","JSON","parse","setItemLimit","createAsyncThunk","options","a","count","filters","prep","unit","lb","itemLimit","dateLimits","min","max","selected","filtersSlice","clearFilter","filter","existingFilters","newFilters","setItem","stringify","removeItem","clearFilters","createFilter","format","type","operator","value","newFilter","index","findIndex","push","setDateLimit","extraReducers","builder","addCase","fulfilled","addComment","dispatch","comment","userId","leadId","body","axios","post","data","comments","console","log","getAllLeads","query","totalByIds","getArchivedLeads","rejectWithValue","leads","page","getFeedLeads","user","role","_id","getLikedLeads","getSearchResults","hasNextPage","hasPreviousPage","nextPage","previousPage","handleArchiveLead","res","status","handleLikeLead","feed","totalAllIds","pageByIds","pagination","lastPage","filteredItems","liked","archived","search","searchValue","newSearch","currentLead","currentLeadStatus","lastUpdated","setCurrentLead","clearCurrentLead","setLeadIdle","setLeadLoading","setPage","setSearchValue","archivedLeads","rejected","pending","likedLeads","newArchived","lead","newLiked","token","isAuthenticated","validatedResetPwToken","authenticateUser","email","password","emailToLowerCase","toLowerCase","clearNotification","notificationId","getUserData","_","get","surrogateUser","updatePassword","redirect","put","validateResetPwToken","resetPwToken","authSlice","removeUserData","notifications","usersSlice","allUsers","loading","_polygon","_path","_path2","_polygon2","_polygon3","store","configureStore","alertReducer","auth","authReducer","filterReducer","leadsReducer","users","usersReducer","middleware","getDefaultMiddleware","serializableCheck","useAppDispatch","useDispatch","useAppSelector","useSelector","useDarkMode","useState","theme","setTheme","colorTheme","matchMedia","matches","documentElement","classList","add","remove","Button","text","onClick","width","margin","size","cta","path","conditionalDisplay","lightOnly","className","xmlns","viewBox","fill","alertIcons","fillRule","d","clipRule","Alert","alertVisible","setAlertVisible","handleRemoveAlert","timeoutId","setTimeout","clearTimeout","animationStyle","useSpring","transform","duration","div","key","style","foundIcon","find","alertIcon","setIcon","DefaultFooter","getFullYear","_extends","Object","assign","i","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogoApp","_ref","svgRef","titleId","props","points","ForwardRef","DefaultLayout","children","to","FormField","label","placeholder","onChange","required","styles","htmlFor","SvgEyeOpen","SvgEyeClosed","PasswordFormField","passwordShown","setPasswordShown","setAuthToken","defaults","common","classes","card","content","contentHeader","logoLg","logoSm","signup","subheaderLink","Login","formData","setFormData","onSubmit","preventDefault","meta","requestStatus","href","Spinner","divWidth","center","spinnerWidth","use","Oval","strokeWidth","strokeColor","ForgotPassword","setStatus","forgotPassword","response","exact","ResetPasswordPage","setEmail","password_1","password_2","emailBeforeAt","split","handleUpdatePassword","SearchBar","location","useLocation","currentSearchValue","redirectToSearch","setRedirectToSearch","setQuery","handleSearchSubmit","pathname","method","onSearchChange","stroke","strokeLinecap","strokeLinejoin","Navbar","notificationDropdown","setNotificationDropdown","setNotifications","userDropdown","setUserDropdown","notificationsModalRef","useRef","settingsModalRef","useHotkeys","keyup","initial","useMemo","map","getNotificationData","useCallback","notificationIds","ids","item","aria-label","navLinks","dropdownItems","adminLinks","UserDropdownItem","link","NotificationItem","hover","setHover","buttonHover","setButtonHover","onMouseEnter","onMouseLeave","clearable","prev","dateTime","fromSeconds","description","externalLink","rel","internalLink","primaryLinks","secondaryLinks","React","memo","AuthLayout","DatePicker","setDate","dateCreated","wrapperRef","mostRecentDay","previousDay","minusBusiness","days","lastFiveStart","lastFourteenStart","last30Start","lastDay","dateOptions","startOf","dateString","endOf","validateDateRange","minDate","dateOption","cb","handleSetDate","Badge","alignment","edge","DescriptionList","utility","HeaderButton","activePath","inactivePath","disabled","PrimaryMetric","UtilityButton","handleClick","popupText","setPopupText","Trend","currentValue","compareValue","scale","lowerIsBetter","showPopup","setShowPopup","isGood","setIsGood","trend","setTrend","currentValueGreater","svgList","up","down","same","percentDifference","Math","abs","Trends","compareData","c","Details","showDetails","setShowDetails","unitFee","lbFee","setComment","firstItemFirstPage","setFirstItemFirstPage","fullTitle","toggleFullTitle","identifyingText","setIdentifyingText","lastItemLastPage","setLastItemLastPage","noteCount","setNoteCount","showComment","setShowComment","commentRef","some","like","setLike","archive","setArchive","hasComment","getLead","val","nextIndex","removeDetails","animationTimeout","navigationButtons","utilityButtons","primaryMetrics","netProfit","weight","buyPrice","monthlySales","sourceUtilities","cashback","promo","navigator","clipboard","writeText","ASINUtilities","asin","detailedInformation","sellPrice","price30","price90","bsrCurrent","bsr30","bsr90","competitorCount","competitorType","notesInformation","shipping","notes","variations","note","startsWith","commentAnimationStyle","height","buttonAnimationStyle","opacity","section","button","ReactImageMagnify","smallImage","alt","isFluidWidth","src","img","largeImage","enlargedImageContainerDimensions","enlargedImageContainerClassName","metric","textarea","ExportButton","setExportLeads","currentLocalDate","setLocale","toLocaleString","filename","SelectComponent","selectedOption","openState","setOpenState","aria-haspopup","aria-expanded","aria-labelledby","aria-hidden","tabIndex","aria-activedescendant","option","aria-selected","ActiveFilter","filterDescription","setFilterDescription","valueProcessor","valuePostproccesor","typeOptions","numericValueOptions","textValueOptions","categoryOptions","sourceOptions","FilterComponent","filterActive","setFilterActive","addFilter","setAddFilter","categoryActive","setCategoryActive","sourceActive","setSourceActive","typeIs","valueIs","setFilter","typeActive","setTypeActive","valueActive","setValueActive","stopPropagation","Select","getFilterValue","maxFilter","minFilter","handleFilterSubmit","forEach","heart","image","competition","dots","eye","LeadRow","expandedView","setExpandedView","eyeDesc","setEyeDesc","linkDesc","setLinkDesc","rowHover","setRowHover","quickView","setQuickView","viewCompetition","setViewCompetition","viewImage","setViewImage","l","datePosted","viewDetailsHandler","favoriteHandler","imageAnimationStyle","expandedViewAnimationStyle","x","quickViewAnimationStyle","bsrCellWrapper","categoryCellWrapper","competitionRow","competitionWrapper","dateCellWrapper","defaultCellWrapper","defaultSvg","detailsCellButton","detailsCellSvg","detailsCellImage","detailsCellImageWrapper","detailsCellWrapper","expandedViewMenuBottom","expandedViewMenuButton","expandedViewMenuButtonSvg","expandedViewMenuSvg","expandedViewWrapper","eyeIconWrapper","likeCellActive","likeCellButton","likeCellNull","likeCellWrapper","linkIconWrapper","monthlySalesCellWrapper","profitCellWrapper","quickViewCellWrapper","quickViewExpandedWrapper","quickViewMenu","quickViewMenuHover","quickViewNull","quickViewWrapper","roiCellWrapper","rowWrapper","titleCellWrapper","titleHover","valueIndicator","range","output","translateY","translateX","archiveHandler","nullStateClasses","nullStateWrapper","svgWrapper","svg","NullState","header","linkText","reload","LeadRowLoader","bgColor","fgColor","speed","backgroundColor","foregroundColor","y","rx","ry","sectionWrapper","tableWrapper","table","tableHeadWrapper","tableHead","tableHeadCell","tableBody","LeadTable","maxDate","Array","selectOptions","PaginationComponent","selectOpen","setSelectOpen","selectValue","setSelectValue","filteredMessage","setFilteredMessage","itemsFrom","itemsTo","calendar","export","leadsWrapper","navWrapper","nav","navLink","navLinkActive","navLinkCounter","navToolsWrapper","Leads","allLeads","headerTitle","authStatus","leadStatus","exportLeads","filterCount","dateSelected","tools","handleExport","error","resultTimeout","activeClassName","tool","Filter","Pagination","Feed","LikedPage","Archived","Search","SvgCheck","SvgX","Admin","usersState","setUsersState","getAllUsers","subscription","subIds","active","cusId","lastLoggedIn","NavbarLink","new","SettingsNavbar","SettingsLayout","AccountPage","checked","setChecked","defaultChecked","payment","affiliate","BillingPage","plan","created","cancelAt","cancelAtPeriod","currentPeriodEnd","amount","planState","setPlanState","paymentHistory","payments","paymentState","setPaymentState","getActivePlanDetails","activeSubId","subId","activeSub","sub","getSuccessfulPayments","subscriptionInformation","billing","brand","last4","subscriptionItem","invoice","pdf","currency","paymentMethod","BasicInformationItem","isInteractable","t","tooltip","setTooltip","CodeItem","code","copyText","setCopyText","AffiliatesPage","paypalEmail","affState","setAffState","changePaypal","setChangePaypal","copiedText","setCopiedText","referrals","referrer","isReferrer","isAff","lastPayout","lgid","modal","setModal","nextPayout","paymentStatus","clients","affCreated","getAffPayments","msg","affPayments","calcCommissionTotal","total","reduce","b","basicInformationItems","eligiblePayments","calcAffPayout","codeItems","newString","truncateAndObfuscate","codeItem","PrivateRoute","Component","component","rest","render","Routes","ResetPassword","Liked","Account","Billing","Affiliates","App","stripePromise","loadStripe","process","stripe","TagManager","initialize","gtmId","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.7f6ef1e7.chunk.js","sourcesContent":["import { createSlice, nanoid, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport { Alert } from '@utils/interfaces/Alert';\r\n\r\nconst initialState: Alert = {\r\n\tid: '',\r\n\ttitle: '',\r\n\tmessage: '',\r\n\talertType: null,\r\n};\r\n\r\nexport const leadsSlice = createSlice({\r\n\tname: 'alert',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tremoveAlert: () => {\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t\tsetAlert: {\r\n\t\t\treducer: (state, action: PayloadAction<Alert>) => {\r\n\t\t\t\tconst { id, title, message, alertType } = action.payload;\r\n\t\t\t\tstate.id = id;\r\n\t\t\t\tstate.title = title;\r\n\t\t\t\tstate.message = message;\r\n\t\t\t\tstate.alertType = alertType;\r\n\t\t\t},\r\n\t\t\tprepare: (alert: {\r\n\t\t\t\ttitle: string;\r\n\t\t\t\tmessage: string;\r\n\t\t\t\talertType: 'success' | 'warning' | 'danger';\r\n\t\t\t}) => {\r\n\t\t\t\tconst { title, message, alertType } = alert;\r\n\t\t\t\tconst id = nanoid();\r\n\t\t\t\treturn { payload: { id, title, message, alertType, visible: true } };\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { removeAlert, setAlert } = leadsSlice.actions;\r\n\r\nexport default leadsSlice.reducer;\r\n","import React, { RefObject, useEffect } from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon';\r\n\r\nexport const config = {\r\n\theaders: {\r\n\t\t'Content-Type': 'application/json',\r\n\t},\r\n};\r\n\r\nexport const capitalize = (string: string) => {\r\n\treturn string[0].toUpperCase() + string.slice(1);\r\n};\r\n\r\nexport const truncate = (string: string, n: number) => {\r\n\treturn string.length > n ? string.substr(0, n - 1) + '...' : string;\r\n};\r\n\r\nexport const truncateAndObfuscate = (string: string, n: number) => {\r\n\tconst newString = string.slice(3);\r\n\treturn newString.length > n ? newString.substr(0, n - 1) + 'xxxx' : string;\r\n};\r\n\r\nexport const numberWithCommas = (n: number) => {\r\n\treturn n.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n};\r\n\r\nexport const arrayLengthChecker = (array: []): string | number => {\r\n\treturn array.length > 99 ? '99+' : array.length;\r\n};\r\n\r\nexport const returnDomainFromUrl = (url: string) => {\r\n\tlet result, match;\r\n\tif (\r\n\t\t(match = url.match(\r\n\t\t\t/^(?:https?:\\/\\/)?(?:[^@\\n]+@)?(?:www\\.)?([^:\\/\\n\\?\\=]+)/im\r\n\t\t))\r\n\t) {\r\n\t\tresult = match[1];\r\n\t\tif ((match = result.match(/^[^\\.]+\\.(.+\\..+)$/))) {\r\n\t\t\tresult = match[1];\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n};\r\n\r\n// bsr / category % calculator\r\nexport const calculateBSR = (\r\n\tcurrentRank: number,\r\n\tcategory: string\r\n): string | number => {\r\n\tlet totalItems: number;\r\n\tif (category === 'Appliances') {\r\n\t\ttotalItems = 616462;\r\n\t} else if (category.includes('Arts')) {\r\n\t\ttotalItems = 7498354;\r\n\t} else if (category === 'Automotive') {\r\n\t\ttotalItems = 22271330;\r\n\t} else if (category.includes('Baby')) {\r\n\t\ttotalItems = 2969134;\r\n\t} else if (category.includes('Beauty')) {\r\n\t\ttotalItems = 8918802;\r\n\t} else if (category === 'Books') {\r\n\t\ttotalItems = 63513871;\r\n\t} else if (category.includes('CDs')) {\r\n\t\ttotalItems = 5768853;\r\n\t} else if (category.includes('Phone')) {\r\n\t\ttotalItems = 23560255;\r\n\t} else if (category.includes('Clothing')) {\r\n\t\ttotalItems = 115990329;\r\n\t} else if (category.includes('Collectibles')) {\r\n\t\ttotalItems = 5319325;\r\n\t} else if (category.includes('Electronics')) {\r\n\t\ttotalItems = 13436282;\r\n\t} else if (category.includes('Grocery')) {\r\n\t\ttotalItems = 2871202;\r\n\t} else if (category.includes('Handmade')) {\r\n\t\ttotalItems = 1515790;\r\n\t} else if (category.includes('Health')) {\r\n\t\ttotalItems = 7528676;\r\n\t} else if (category.includes('Home')) {\r\n\t\ttotalItems = 59108947;\r\n\t} else if (category.includes('Industrial')) {\r\n\t\ttotalItems = 9915828;\r\n\t} else if (category.includes('Dining')) {\r\n\t\ttotalItems = 59108947;\r\n\t} else if (category.includes('Movies')) {\r\n\t\ttotalItems = 3426934;\r\n\t} else if (category.includes('Musical')) {\r\n\t\ttotalItems = 1455860;\r\n\t} else if (category.includes('Office')) {\r\n\t\ttotalItems = 7746679;\r\n\t} else if (category.includes('Patio')) {\r\n\t\ttotalItems = 8107431;\r\n\t} else if (category.includes('Pet')) {\r\n\t\ttotalItems = 4996454;\r\n\t} else if (category.includes('Software')) {\r\n\t\ttotalItems = 160164;\r\n\t} else if (category.includes('Sports')) {\r\n\t\ttotalItems = 29519885;\r\n\t} else if (category.includes('Tools')) {\r\n\t\ttotalItems = 17564272;\r\n\t} else if (category.includes('Toys')) {\r\n\t\ttotalItems = 8933993;\r\n\t} else if (category === 'Video Games') {\r\n\t\ttotalItems = 730691;\r\n\t}\r\n\tif (!totalItems!) {\r\n\t\treturn '-';\r\n\t} else {\r\n\t\treturn ((currentRank / totalItems) * 100).toFixed(3);\r\n\t}\r\n};\r\n\r\nexport const openLinkHandler = (retailerLink: string, amzLink: string) => {\r\n\twindow.open(retailerLink);\r\n\twindow.open(amzLink);\r\n};\r\n\r\nexport const useOutsideMousedown = (\r\n\tref: RefObject<HTMLElement>,\r\n\tsetState_1: React.Dispatch<boolean>,\r\n\tsetState_2: React.Dispatch<boolean> | null,\r\n\tconditional?: any\r\n) => {\r\n\tuseEffect(() => {\r\n\t\tconst handleClickOutside = (e: any) => {\r\n\t\t\tif (!ref.current?.contains(e.target as Node) || conditional) {\r\n\t\t\t\tsetState_1(false);\r\n\t\t\t\tif (setState_2) {\r\n\t\t\t\t\tsetState_2(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t}, [ref, setState_1, setState_2]);\r\n};\r\n\r\nexport const useOutsideMouseup = (\r\n\tref: RefObject<HTMLElement>,\r\n\tsetState_1: React.Dispatch<boolean>,\r\n\tsetState_2: React.Dispatch<boolean> | null\r\n) => {\r\n\tuseEffect(() => {\r\n\t\tfunction handleClickOutside(e: any) {\r\n\t\t\tif (!ref.current?.contains(e.target)) {\r\n\t\t\t\tsetState_1(false);\r\n\t\t\t\tif (setState_2) {\r\n\t\t\t\t\tsetState_2(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.addEventListener('mouseup', handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener('mouseup', handleClickOutside);\r\n\t\t};\r\n\t}, [ref, setState_1, setState_2]);\r\n};\r\n\r\nexport const planCheckerByPrice = (price: number) => {\r\n\tlet plan;\r\n\tif (price === 12900) {\r\n\t\tplan = 'Grow';\r\n\t} else if (price === 18900) {\r\n\t\tplan = 'Pro';\r\n\t} else if (price === 26300) {\r\n\t\tplan = 'Bundle';\r\n\t} else {\r\n\t\tplan = 'Leadgeek';\r\n\t}\r\n\treturn plan;\r\n};\r\n\r\nexport const calcAffCommission = (price: number) => {\r\n\treturn (price * 0.25) / 100;\r\n};\r\n\r\nexport const formatTimestamp = (timestamp: number, showYear: boolean) => {\r\n\tconst isoTime = new Date(timestamp * 1000).toJSON();\r\n\tif (showYear) {\r\n\t\treturn DateTime.fromISO(isoTime).toFormat('LLL dd, yyyy');\r\n\t} else {\r\n\t\treturn DateTime.fromISO(isoTime).toFormat('LLLL dd');\r\n\t}\r\n};\r\n\r\nexport const calcNextPossiblePayoutDate = (instance: number) => {\r\n\tlet dt = DateTime.now();\r\n\tlet cache = Number(dt.toFormat('dd'));\r\n\r\n\tlet newDate = dt.set({ day: 15, hour: 23, minute: 59, second: 59 });\r\n\tif (cache >= 15) {\r\n\t\tif (instance === 1) {\r\n\t\t\treturn newDate.plus({ months: 1 });\r\n\t\t} else {\r\n\t\t\treturn newDate.plus({ months: -1 });\r\n\t\t}\r\n\t} else {\r\n\t\treturn newDate;\r\n\t}\r\n};\r\n\r\nexport const calcNextPayoutDate = (date: number) => {\r\n\tconst isoTime = new Date(date * 1000).toJSON();\r\n\tlet dt = DateTime.fromISO(isoTime).plus({ months: 2 });\r\n\tlet cache = Number(dt.toFormat('dd'));\r\n\tlet newDate = dt.set({ hour: 23, minute: 59, second: 59 });\r\n\tif (cache >= 15) {\r\n\t\treturn newDate.set({ day: 15 }).plus({ months: 1 });\r\n\t} else {\r\n\t\treturn newDate.set({ day: 15 });\r\n\t}\r\n};\r\n\r\nexport const passwordList = [\r\n\t'123456',\r\n\t'password',\r\n\t'12345678',\r\n\t'qwerty',\r\n\t'123456789',\r\n\t'12345',\r\n\t'1234',\r\n\t'111111',\r\n\t'1234567',\r\n\t'dragon',\r\n\t'123123',\r\n\t'baseball',\r\n\t'abc123',\r\n\t'football',\r\n\t'monkey',\r\n\t'letmein',\r\n\t'696969',\r\n\t'shadow',\r\n\t'master',\r\n\t'666666',\r\n\t'qwertyuiop',\r\n\t'123321',\r\n\t'mustang',\r\n\t'1234567890',\r\n\t'michael',\r\n\t'654321',\r\n\t'pussy',\r\n\t'superman',\r\n\t'1qaz2wsx',\r\n\t'7777777',\r\n\t'fuckyou',\r\n\t'121212',\r\n\t'000000',\r\n\t'qazwsx',\r\n\t'123qwe',\r\n\t'killer',\r\n\t'trustno1',\r\n\t'jordan',\r\n\t'jennifer',\r\n\t'zxcvbnm',\r\n\t'asdfgh',\r\n\t'hunter',\r\n\t'buster',\r\n\t'soccer',\r\n\t'harley',\r\n\t'batman',\r\n\t'andrew',\r\n\t'tigger',\r\n\t'sunshine',\r\n\t'iloveyou',\r\n\t'fuckme',\r\n\t'2000',\r\n\t'charlie',\r\n\t'robert',\r\n\t'thomas',\r\n\t'hockey',\r\n\t'ranger',\r\n\t'daniel',\r\n\t'starwars',\r\n\t'klaster',\r\n\t'112233',\r\n\t'george',\r\n\t'asshole',\r\n\t'computer',\r\n\t'michelle',\r\n\t'jessica',\r\n\t'pepper',\r\n\t'1111',\r\n\t'zxcvbn',\r\n\t'555555',\r\n\t'11111111',\r\n\t'131313',\r\n\t'freedom',\r\n\t'777777',\r\n\t'pass',\r\n\t'fuck',\r\n\t'maggie',\r\n\t'159753',\r\n\t'aaaaaa',\r\n\t'ginger',\r\n\t'princess',\r\n\t'joshua',\r\n\t'cheese',\r\n\t'amanda',\r\n\t'summer',\r\n\t'love',\r\n\t'ashley',\r\n\t'6969',\r\n\t'nicole',\r\n\t'chelsea',\r\n\t'biteme',\r\n\t'matthew',\r\n\t'access',\r\n\t'yankees',\r\n\t'987654321',\r\n\t'dallas',\r\n\t'austin',\r\n\t'thunder',\r\n\t'taylor',\r\n\t'matrix',\r\n\t'minecraft',\r\n];\r\n","import {\r\n\tcreateAsyncThunk,\r\n\tcreateSlice,\r\n\tnanoid,\r\n\tPayloadAction,\r\n} from '@reduxjs/toolkit';\r\n\r\nimport {\r\n\tFilter,\r\n\tFilterOperators,\r\n\tFilterState,\r\n\tFilterTitles,\r\n\tFilterTypes,\r\n} from '@utils/interfaces/Filter';\r\nimport { LeadTypes } from '@utils/interfaces/Lead';\r\n\r\nconst getLSFilters = () => {\r\n\tconst lsFilters = localStorage.getItem('filters');\r\n\treturn lsFilters ? JSON.parse(lsFilters) : [];\r\n};\r\n\r\nconst lsFilters = getLSFilters();\r\n\r\nexport const setItemLimit = createAsyncThunk(\r\n\t'filters/setItemLimit',\r\n\tasync (options: { type: LeadTypes; itemLimit: number }) => {\r\n\t\treturn options;\r\n\t}\r\n);\r\n\r\nconst initialState: FilterState = {\r\n\tcount: lsFilters.length || 0,\r\n\tfilters: lsFilters,\r\n\tprep: {\r\n\t\tunit: +localStorage.getItem('unitFee')! || null,\r\n\t\tlb: +localStorage.getItem('lbFee')! || null,\r\n\t},\r\n\titemLimit: +localStorage.getItem('itemLimit')! || 20,\r\n\tdateLimits: { min: null, max: null, selected: null },\r\n};\r\n\r\nexport const filtersSlice = createSlice({\r\n\tname: 'filters',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tclearFilter: (\r\n\t\t\tstate,\r\n\t\t\taction: PayloadAction<{\r\n\t\t\t\tid: string;\r\n\t\t\t}>\r\n\t\t) => {\r\n\t\t\t// state\r\n\t\t\tstate.filters = state.filters.filter(\r\n\t\t\t\t(filter) => filter.id !== action.payload.id\r\n\t\t\t);\r\n\t\t\tstate.count = state.filters.length;\r\n\r\n\t\t\t// local storage\r\n\r\n\t\t\t// get any existing filters\r\n\t\t\tconst existingFilters = getLSFilters();\r\n\t\t\t// if they exist, filter out all that aren't being deleted\r\n\t\t\tif (existingFilters.length > 0) {\r\n\t\t\t\tconst newFilters = existingFilters.filter(\r\n\t\t\t\t\t(filter: Filter) => filter.id !== action.payload.id\r\n\t\t\t\t);\r\n\t\t\t\t// if there are remaining filters, add them\r\n\t\t\t\tif (newFilters.length > 0) {\r\n\t\t\t\t\tlocalStorage.setItem('filters', JSON.stringify(newFilters));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// otherwise get rid of the item in local storage\r\n\t\t\t\t\tlocalStorage.removeItem('filters');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tclearFilters: (state) => {\r\n\t\t\t// state\r\n\t\t\tstate.count = 0;\r\n\t\t\tstate.filters = [];\r\n\r\n\t\t\t// local storage\r\n\t\t\tlocalStorage.removeItem('filters');\r\n\t\t},\r\n\t\tcreateFilter: {\r\n\t\t\treducer: (\r\n\t\t\t\tstate,\r\n\t\t\t\taction: PayloadAction<{\r\n\t\t\t\t\tid: string;\r\n\t\t\t\t\tformat: 'numeric' | 'text';\r\n\t\t\t\t\ttype: FilterTypes;\r\n\t\t\t\t\ttitle: FilterTitles;\r\n\t\t\t\t\toperator: FilterOperators;\r\n\t\t\t\t\tvalue: string | number;\r\n\t\t\t\t}>\r\n\t\t\t) => {\r\n\t\t\t\t// destructure necessary items from action payload\r\n\t\t\t\tconst { id, format, type, title, operator, value } = action.payload;\r\n\r\n\t\t\t\t// state\r\n\r\n\t\t\t\t// perform actions to the input value to make it able to processed the same way for all types\r\n\t\t\t\tlet processedValue;\r\n\t\t\t\tif (type === 'roi') {\r\n\t\t\t\t\tprocessedValue = +value / 100;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprocessedValue = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create a new filter object\r\n\t\t\t\tconst newFilter: Filter = {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tformat,\r\n\t\t\t\t\ttype,\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\toperator,\r\n\t\t\t\t\tvalue: processedValue,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (format === 'numeric') {\r\n\t\t\t\t\t// see if a filter already exists and return the index if it does\r\n\t\t\t\t\tconst index = state.filters.findIndex(\r\n\t\t\t\t\t\t(filter: Filter) =>\r\n\t\t\t\t\t\t\tfilter.type === newFilter.type &&\r\n\t\t\t\t\t\t\tfilter.operator === newFilter.operator\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\t// create a new filter\r\n\t\t\t\t\t\tstate.filters.push(newFilter);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// update already existing filter\r\n\t\t\t\t\t\tstate.filters[index] = newFilter;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// it's a text filter, so just add a new one\r\n\t\t\t\t\tstate.filters.push(newFilter);\r\n\t\t\t\t}\r\n\t\t\t\t// update the count to the current number of applied filters\r\n\t\t\t\tstate.count = state.filters.length;\r\n\r\n\t\t\t\t// local storage\r\n\r\n\t\t\t\t// add filter to local storage\r\n\t\t\t\tconst existingFilters = getLSFilters();\r\n\r\n\t\t\t\t// see if a filter already exists and return the index if it does\r\n\t\t\t\tconst index = existingFilters.findIndex(\r\n\t\t\t\t\t(filter: Filter) =>\r\n\t\t\t\t\t\tfilter.type === newFilter.type &&\r\n\t\t\t\t\t\tfilter.operator === newFilter.operator\r\n\t\t\t\t);\r\n\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t// create a new filter\r\n\t\t\t\t\treturn localStorage.setItem(\r\n\t\t\t\t\t\t'filters',\r\n\t\t\t\t\t\tJSON.stringify([...existingFilters, newFilter])\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// update already existing filter\r\n\t\t\t\t\texistingFilters[index] = newFilter;\r\n\t\t\t\t\treturn localStorage.setItem(\r\n\t\t\t\t\t\t'filters',\r\n\t\t\t\t\t\tJSON.stringify(existingFilters)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tprepare: (\r\n\t\t\t\tformat: 'numeric' | 'text',\r\n\t\t\t\ttype: FilterTypes,\r\n\t\t\t\ttitle: FilterTitles,\r\n\t\t\t\toperator: FilterOperators,\r\n\t\t\t\tvalue: string | number\r\n\t\t\t) => {\r\n\t\t\t\tconst id = nanoid();\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tformat,\r\n\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\toperator,\r\n\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t},\r\n\t\tsetDateLimit: (\r\n\t\t\tstate,\r\n\t\t\taction: PayloadAction<{\r\n\t\t\t\tmin: string;\r\n\t\t\t\tmax: string | null;\r\n\t\t\t\tselected: string;\r\n\t\t\t}>\r\n\t\t) => {\r\n\t\t\tstate.dateLimits.min = action.payload.min;\r\n\t\t\tstate.dateLimits.max = action.payload.max;\r\n\t\t\tstate.dateLimits.selected = action.payload.selected;\r\n\t\t},\r\n\t\tsetItemLimit: (\r\n\t\t\tstate,\r\n\t\t\taction: PayloadAction<{ type: string; itemLimit: number }>\r\n\t\t) => {\r\n\t\t\tlocalStorage.setItem('itemLimit', action.payload.itemLimit.toString());\r\n\t\t\tstate.itemLimit = +action.payload.itemLimit;\r\n\t\t},\r\n\t},\r\n\r\n\textraReducers: (builder) => {\r\n\t\tbuilder.addCase(setItemLimit.fulfilled, (state, action) => {\r\n\t\t\tlocalStorage.setItem('itemLimit', action.payload.itemLimit.toString());\r\n\t\t\tstate.itemLimit = +action.payload.itemLimit;\r\n\t\t});\r\n\t},\r\n});\r\n\r\nexport const { clearFilter, clearFilters, createFilter, setDateLimit } =\r\n\tfiltersSlice.actions;\r\n\r\nexport default filtersSlice.reducer;\r\n","import axios from 'axios';\r\n\r\n// redux\r\nimport { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\n\r\n// interfaces\r\nimport { FilterState } from '@utils/interfaces/Filter';\r\nimport { Lead, LeadTypes } from '@utils/interfaces/Lead';\r\nimport { Pagination } from '@utils/interfaces/Pagination';\r\n\r\n// utils\r\nimport { Role } from '@utils/interfaces/User';\r\nimport { config, truncate } from '@utils/utils';\r\nimport { setItemLimit } from '../filters/filtersSlice';\r\n\r\nexport const addComment = createAsyncThunk(\r\n\t'leads/addComment',\r\n\tasync (\r\n\t\toptions: { comment: string; userId: string; leadId: string },\r\n\t\t{ dispatch }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\t// destructure necessary items\r\n\t\t\tconst { comment, userId, leadId } = options;\r\n\r\n\t\t\t// build request body\r\n\t\t\tconst body = JSON.stringify({ comment, userId, leadId });\r\n\r\n\t\t\t// POST request to route\r\n\t\t\tconst { data } = await axios.post('/api/leads/add-comment', body, config);\r\n\r\n\t\t\tif (data.message === 'Comment was added') {\r\n\t\t\t\treturn data.comments;\r\n\t\t\t} else {\r\n\t\t\t\t// dispatch danger alert\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Something went wrong',\r\n\t\t\t\t\t\tmessage: \"Your comment couldn't be added right now\",\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const getAllLeads = createAsyncThunk(\r\n\t'leads/getAllLeads',\r\n\tasync (\r\n\t\toptions: {\r\n\t\t\tuserId: string;\r\n\t\t\tfilters: FilterState;\r\n\t\t\ttype: LeadTypes;\r\n\t\t\tquery: string | null;\r\n\t\t},\r\n\t\t{ dispatch }\r\n\t) => {\r\n\t\t// destructure necessary items\r\n\t\tconst { userId, filters, type, query } = options;\r\n\r\n\t\t// build request body\r\n\t\tconst body = JSON.stringify({\r\n\t\t\tuserId,\r\n\t\t\tfilters,\r\n\t\t\ttype,\r\n\t\t\tquery: query,\r\n\t\t});\r\n\r\n\t\t// POST request to route\r\n\t\tconst {\r\n\t\t\tdata,\r\n\t\t}: { data: { totalByIds: Lead[]; type: LeadTypes; message: string } } =\r\n\t\t\tawait axios.post('/api/leads/all', body, config);\r\n\r\n\t\tif (data.totalByIds.length > 0) {\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Data ready for export',\r\n\t\t\t\t\tmessage: 'Please click \"confirm\" to save as a .csv file',\r\n\t\t\t\t\talertType: 'success',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn { totalByIds: data.totalByIds, type: data.type };\r\n\t}\r\n);\r\n\r\nexport const getArchivedLeads = createAsyncThunk(\r\n\t'leads/getArchivedLeads',\r\n\tasync (\r\n\t\toptions: { leads: Lead[]; page: number; filters: FilterState },\r\n\t\t{ rejectWithValue }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\t// destructure necessary items\r\n\t\t\tconst { leads, page, filters } = options;\r\n\r\n\t\t\t// build request body\r\n\t\t\tconst body = JSON.stringify({ leads, page, filters });\r\n\r\n\t\t\t// POST request to route\r\n\t\t\tconst { data } = await axios.post('/api/leads/archived', body, config);\r\n\r\n\t\t\treturn data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const getFeedLeads = createAsyncThunk(\r\n\t'leads/getFeedLeads',\r\n\tasync (\r\n\t\toptions: {\r\n\t\t\tuser: {\r\n\t\t\t\tid: string;\r\n\t\t\t\trole: Role;\r\n\t\t\t};\r\n\t\t\tpage: number;\r\n\t\t\tfilters: FilterState;\r\n\t\t},\r\n\t\t{ rejectWithValue }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\t// destructure necessary items\r\n\t\t\tconst {\r\n\t\t\t\tuser: { id, role },\r\n\t\t\t\tpage,\r\n\t\t\t\tfilters,\r\n\t\t\t} = options;\r\n\r\n\t\t\t// build request body\r\n\t\t\tconst body = JSON.stringify({\r\n\t\t\t\t_id: id,\r\n\t\t\t\trole,\r\n\t\t\t\tpage,\r\n\t\t\t\tfilters,\r\n\t\t\t});\r\n\r\n\t\t\t// POST request to route\r\n\t\t\tconst { data } = await axios.post('/api/leads', body, config);\r\n\r\n\t\t\t// if there are leads, return data to redux store\r\n\t\t\tif (data.message !== 'There are no leads to show') {\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const getLikedLeads = createAsyncThunk(\r\n\t'leads/getLikedLeads',\r\n\tasync (\r\n\t\toptions: { leads: Lead[]; page: number; filters: FilterState },\r\n\t\t{ rejectWithValue }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\t// destructure necessary items\r\n\t\t\tconst { leads, page, filters } = options;\r\n\r\n\t\t\t// build request body\r\n\t\t\tconst body = JSON.stringify({ leads, page, filters });\r\n\r\n\t\t\t// POST request to route\r\n\t\t\tconst { data } = await axios.post('/api/leads/liked', body, config);\r\n\r\n\t\t\treturn data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const getSearchResults = createAsyncThunk(\r\n\t'leads/getSearchResults',\r\n\tasync (\r\n\t\toptions: {\r\n\t\t\tuserId: string;\r\n\t\t\tquery: string | null;\r\n\t\t\tpage: number;\r\n\t\t\tfilters: FilterState;\r\n\t\t},\r\n\t\t{ rejectWithValue }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\t// destructure necessary items\r\n\t\t\tconst { userId, query, page, filters } = options;\r\n\r\n\t\t\t// handle navigation to the search page directly without a query\r\n\t\t\tif (!query) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tleads: [],\r\n\t\t\t\t\t\tpage: 1,\r\n\t\t\t\t\t\thasNextPage: false,\r\n\t\t\t\t\t\thasPreviousPage: false,\r\n\t\t\t\t\t\tnextPage: 2,\r\n\t\t\t\t\t\tpreviousPage: 0,\r\n\t\t\t\t\t\ttotalItems: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tquery,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t// build request body\r\n\t\t\tconst body = JSON.stringify({\r\n\t\t\t\tuserId,\r\n\t\t\t\tquery,\r\n\t\t\t\tpage,\r\n\t\t\t\tfilters,\r\n\t\t\t});\r\n\r\n\t\t\t// POST request to route\r\n\t\t\tconst { data } = await axios.post('/api/leads/search', body, config);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata,\r\n\t\t\t\tquery,\r\n\t\t\t};\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const handleArchiveLead = createAsyncThunk(\r\n\t'leads/handleArchiveLead',\r\n\tasync (\r\n\t\toptions: {\r\n\t\t\tuserId: string;\r\n\t\t\tleadId: string;\r\n\t\t},\r\n\t\t{ dispatch }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\t// destructure necessary items\r\n\t\t\tconst { userId, leadId } = options;\r\n\r\n\t\t\t// build request body\r\n\t\t\tconst body = JSON.stringify({ userId, leadId });\r\n\r\n\t\t\t// POST request to route\r\n\t\t\tconst res = await axios.post(\r\n\t\t\t\t'/api/leads/handle-archive-lead',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\t// destructure necessary items\r\n\t\t\t\tconst { message, leads, title } = res.data;\r\n\r\n\t\t\t\t// set success alert\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: truncate(title, 50),\r\n\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleadId,\r\n\t\t\t\t\tleads,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const handleLikeLead = createAsyncThunk(\r\n\t'leads/handleLikeLead',\r\n\tasync (\r\n\t\toptions: {\r\n\t\t\tuserId: string;\r\n\t\t\tleadId: string;\r\n\t\t},\r\n\t\t{ dispatch }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\t// destructure necessary items\r\n\t\t\tconst { userId, leadId } = options;\r\n\r\n\t\t\t// build request body\r\n\t\t\tconst body = JSON.stringify({ userId, leadId });\r\n\r\n\t\t\t// POST request to route\r\n\t\t\tconst res = await axios.post('/api/leads/handle-like-lead', body, config);\r\n\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\t// destructure necessary items\r\n\t\t\t\tconst { message, leads, title } = res.data;\r\n\r\n\t\t\t\t// set success alert\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: truncate(title, 50),\r\n\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleadId,\r\n\t\t\t\t\tleads,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\ninterface LeadState {\r\n\ttotalByIds: Lead[];\r\n\ttotalAllIds: string[];\r\n\tpageByIds: Lead[];\r\n\tpagination: Pagination;\r\n}\r\n\r\ninterface LeadsState {\r\n\tstatus: 'idle' | 'loading' | 'failed';\r\n\tfeed: LeadState;\r\n\tliked: LeadState;\r\n\tarchived: LeadState;\r\n\tsearch: {\r\n\t\ttotalByIds: Lead[];\r\n\t\ttotalAllIds: string[];\r\n\t\tpageByIds: Lead[];\r\n\t\tpagination: Pagination;\r\n\t\tsearchValue: string | null;\r\n\t\tnewSearch: boolean;\r\n\t};\r\n\tcurrentLead: Lead | null;\r\n\tcurrentLeadStatus: 'idle' | 'loading' | 'failed';\r\n\tlastUpdated: string | null;\r\n}\r\n\r\nconst initialState: LeadsState = {\r\n\tstatus: 'loading',\r\n\tfeed: {\r\n\t\ttotalByIds: [],\r\n\t\ttotalAllIds: [],\r\n\t\tpageByIds: [],\r\n\t\tpagination: {\r\n\t\t\tpage: 1,\r\n\t\t\thasNextPage: null,\r\n\t\t\thasPreviousPage: false,\r\n\t\t\tnextPage: null,\r\n\t\t\tpreviousPage: null,\r\n\t\t\tlastPage: null,\r\n\t\t\ttotalItems: null,\r\n\t\t\tfilteredItems: null,\r\n\t\t},\r\n\t},\r\n\tliked: {\r\n\t\ttotalByIds: [],\r\n\t\ttotalAllIds: [],\r\n\t\tpageByIds: [],\r\n\t\tpagination: {\r\n\t\t\tpage: 1,\r\n\t\t\thasNextPage: null,\r\n\t\t\thasPreviousPage: false,\r\n\t\t\tnextPage: null,\r\n\t\t\tpreviousPage: null,\r\n\t\t\tlastPage: null,\r\n\t\t\ttotalItems: null,\r\n\t\t\tfilteredItems: null,\r\n\t\t},\r\n\t},\r\n\tarchived: {\r\n\t\ttotalByIds: [],\r\n\t\ttotalAllIds: [],\r\n\t\tpageByIds: [],\r\n\t\tpagination: {\r\n\t\t\tpage: 1,\r\n\t\t\thasNextPage: null,\r\n\t\t\thasPreviousPage: false,\r\n\t\t\tnextPage: null,\r\n\t\t\tpreviousPage: null,\r\n\t\t\tlastPage: null,\r\n\t\t\ttotalItems: null,\r\n\t\t\tfilteredItems: null,\r\n\t\t},\r\n\t},\r\n\tsearch: {\r\n\t\ttotalByIds: [],\r\n\t\ttotalAllIds: [],\r\n\t\tpageByIds: [],\r\n\t\tpagination: {\r\n\t\t\tpage: 1,\r\n\t\t\thasNextPage: null,\r\n\t\t\thasPreviousPage: false,\r\n\t\t\tnextPage: null,\r\n\t\t\tpreviousPage: null,\r\n\t\t\tlastPage: null,\r\n\t\t\ttotalItems: null,\r\n\t\t\tfilteredItems: null,\r\n\t\t},\r\n\t\tsearchValue: null,\r\n\t\tnewSearch: false,\r\n\t},\r\n\tcurrentLead: null,\r\n\tcurrentLeadStatus: 'loading',\r\n\tlastUpdated: null,\r\n};\r\n\r\nexport const leadsSlice = createSlice({\r\n\tname: 'leads',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tsetCurrentLead: (state, action: PayloadAction<Lead>) => {\r\n\t\t\tstate.currentLead = action.payload;\r\n\t\t},\r\n\t\tclearCurrentLead: (state) => {\r\n\t\t\tstate.currentLead = null;\r\n\t\t},\r\n\t\tsetLeadIdle: (state) => {\r\n\t\t\tstate.status = 'idle';\r\n\t\t},\r\n\t\tsetLeadLoading: (state) => {\r\n\t\t\tstate.status = 'loading';\r\n\t\t},\r\n\t\tsetPage: (\r\n\t\t\tstate,\r\n\t\t\taction: PayloadAction<{\r\n\t\t\t\tpage: number;\r\n\t\t\t\ttype: LeadTypes;\r\n\t\t\t}>\r\n\t\t) => {\r\n\t\t\t// destructure necessary items\r\n\t\t\tconst { page, type } = action.payload;\r\n\r\n\t\t\tstate[type].pagination.page = page;\r\n\t\t},\r\n\t\tsetSearchValue: (state, action) => {\r\n\t\t\tstate.search.newSearch = true;\r\n\t\t\tstate.search.searchValue = action.payload;\r\n\t\t},\r\n\t},\r\n\textraReducers: (builder) => {\r\n\t\tbuilder\r\n\t\t\t.addCase(getAllLeads.fulfilled, (state, action) => {\r\n\t\t\t\t// destructure necessary items\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttotalByIds,\r\n\t\t\t\t\ttype,\r\n\t\t\t\t}: {\r\n\t\t\t\t\ttotalByIds: Lead[];\r\n\t\t\t\t\ttype: LeadTypes;\r\n\t\t\t\t} = action.payload;\r\n\r\n\t\t\t\t// if state type doesn't exist, set it to an empty array\r\n\t\t\t\tif (!state[type].totalByIds) {\r\n\t\t\t\t\tstate[type].totalByIds = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// otherwise update the total leads in the state with the new payload\r\n\t\t\t\tstate[type].totalByIds = totalByIds;\r\n\t\t\t})\r\n\t\t\t.addCase(getArchivedLeads.fulfilled, (state, action) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tarchivedLeads,\r\n\t\t\t\t\tpage,\r\n\t\t\t\t\thasNextPage,\r\n\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\tnextPage,\r\n\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\ttotalItems,\r\n\t\t\t\t} = action.payload;\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.archived.pageByIds = archivedLeads;\r\n\t\t\t\tstate.archived.pagination.page = page;\r\n\t\t\t\tstate.archived.pagination.hasNextPage = hasNextPage;\r\n\t\t\t\tstate.archived.pagination.hasPreviousPage = hasPreviousPage;\r\n\t\t\t\tstate.archived.pagination.nextPage = nextPage;\r\n\t\t\t\tstate.archived.pagination.previousPage = previousPage;\r\n\t\t\t\tstate.archived.pagination.totalItems = totalItems;\r\n\t\t\t})\r\n\t\t\t.addCase(getArchivedLeads.rejected, (state) => {\r\n\t\t\t\tstate.status = 'failed';\r\n\t\t\t})\r\n\t\t\t.addCase(getFeedLeads.pending, (state) => {\r\n\t\t\t\tstate.status = 'loading';\r\n\t\t\t\tstate.currentLeadStatus = 'loading';\r\n\t\t\t})\r\n\t\t\t.addCase(getFeedLeads.fulfilled, (state, action) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tfeed,\r\n\t\t\t\t\tpage,\r\n\t\t\t\t\thasNextPage,\r\n\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\tnextPage,\r\n\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\tlastPage,\r\n\t\t\t\t\ttotalItems,\r\n\t\t\t\t\tfilteredItems,\r\n\t\t\t\t\tlastUpdated,\r\n\t\t\t\t} = action.payload;\r\n\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.currentLeadStatus = 'idle';\r\n\t\t\t\tstate.feed.pageByIds = feed;\r\n\t\t\t\tstate.feed.pagination.page = page;\r\n\t\t\t\tstate.feed.pagination.hasNextPage = hasNextPage;\r\n\t\t\t\tstate.feed.pagination.hasPreviousPage = hasPreviousPage;\r\n\t\t\t\tstate.feed.pagination.nextPage = nextPage;\r\n\t\t\t\tstate.feed.pagination.previousPage = previousPage;\r\n\t\t\t\tstate.feed.pagination.lastPage = lastPage;\r\n\t\t\t\tstate.feed.pagination.totalItems = totalItems;\r\n\t\t\t\tstate.feed.pagination.filteredItems = filteredItems;\r\n\t\t\t\tstate.lastUpdated = lastUpdated;\r\n\t\t\t})\r\n\t\t\t.addCase(getFeedLeads.rejected, (state) => {\r\n\t\t\t\tstate.status = 'failed';\r\n\t\t\t})\r\n\t\t\t.addCase(getLikedLeads.fulfilled, (state, action) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tlikedLeads,\r\n\t\t\t\t\tpage,\r\n\t\t\t\t\thasNextPage,\r\n\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\tnextPage,\r\n\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\ttotalItems,\r\n\t\t\t\t} = action.payload;\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.liked.pageByIds = likedLeads;\r\n\t\t\t\tstate.liked.pagination.page = page;\r\n\t\t\t\tstate.liked.pagination.hasNextPage = hasNextPage;\r\n\t\t\t\tstate.liked.pagination.hasPreviousPage = hasPreviousPage;\r\n\t\t\t\tstate.liked.pagination.nextPage = nextPage;\r\n\t\t\t\tstate.liked.pagination.previousPage = previousPage;\r\n\t\t\t\tstate.liked.pagination.totalItems = totalItems;\r\n\t\t\t})\r\n\t\t\t.addCase(getLikedLeads.rejected, (state) => {\r\n\t\t\t\tstate.status = 'failed';\r\n\t\t\t})\r\n\t\t\t.addCase(getSearchResults.pending, (state) => {\r\n\t\t\t\tstate.status = 'loading';\r\n\t\t\t})\r\n\t\t\t.addCase(getSearchResults.fulfilled, (state, action) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tleads,\r\n\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\thasNextPage,\r\n\t\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\t\tnextPage,\r\n\t\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\t\ttotalItems,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tquery,\r\n\t\t\t\t} = action.payload;\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.search.pageByIds = leads;\r\n\t\t\t\tstate.search.pagination.page = page;\r\n\t\t\t\tstate.search.pagination.page = page;\r\n\t\t\t\tstate.search.pagination.hasNextPage = hasNextPage;\r\n\t\t\t\tstate.search.pagination.hasPreviousPage = hasPreviousPage;\r\n\t\t\t\tstate.search.pagination.nextPage = nextPage;\r\n\t\t\t\tstate.search.pagination.previousPage = previousPage;\r\n\t\t\t\tstate.search.pagination.totalItems = totalItems;\r\n\t\t\t\tstate.search.searchValue = query;\r\n\t\t\t\tstate.search.newSearch = false;\r\n\t\t\t})\r\n\t\t\t.addCase(getSearchResults.rejected, (state) => {\r\n\t\t\t\tstate.status = 'failed';\r\n\t\t\t})\r\n\t\t\t.addCase(handleArchiveLead.fulfilled, (state, action) => {\r\n\t\t\t\tconst newArchived = state.archived.pageByIds.filter(\r\n\t\t\t\t\t(lead) => lead._id !== action.payload?.leadId\r\n\t\t\t\t);\r\n\t\t\t\tstate.archived.pageByIds = newArchived;\r\n\t\t\t})\r\n\t\t\t.addCase(handleLikeLead.fulfilled, (state, action) => {\r\n\t\t\t\tconst newLiked = state.liked.pageByIds.filter(\r\n\t\t\t\t\t(lead) => lead._id !== action.payload?.leadId\r\n\t\t\t\t);\r\n\t\t\t\tstate.liked.pageByIds = newLiked;\r\n\t\t\t})\r\n\t\t\t.addCase(\r\n\t\t\t\tsetItemLimit.fulfilled,\r\n\t\t\t\t(\r\n\t\t\t\t\tstate,\r\n\t\t\t\t\taction: PayloadAction<{ type: LeadTypes; itemLimit: number }>\r\n\t\t\t\t) => {\r\n\t\t\t\t\tconst { type } = action.payload;\r\n\t\t\t\t\tstate[type].pagination.page = 1;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t},\r\n});\r\n\r\nexport const {\r\n\tsetCurrentLead,\r\n\tclearCurrentLead,\r\n\tsetLeadIdle,\r\n\tsetLeadLoading,\r\n\tsetPage,\r\n\tsetSearchValue,\r\n} = leadsSlice.actions;\r\n\r\nexport default leadsSlice.reducer;\r\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\n// packages\r\nimport axios from 'axios';\r\n\r\n// redux\r\nimport { setAlert } from '@features/alert/alertSlice';\r\nimport {\r\n\taddComment,\r\n\thandleArchiveLead,\r\n\thandleLikeLead,\r\n} from '@features/leads/leadsSlice';\r\n\r\n// utils\r\nimport { config } from '@utils/utils';\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ninterface AuthState {\r\n\tstatus: 'idle' | 'loading' | 'failed';\r\n\ttoken: string | null;\r\n\tisAuthenticated: boolean;\r\n\tuser: User | null;\r\n\tvalidatedResetPwToken: boolean;\r\n}\r\n\r\nconst initialState: AuthState = {\r\n\tstatus: 'loading',\r\n\ttoken: localStorage.getItem('token'),\r\n\tisAuthenticated: false,\r\n\tuser: null,\r\n\tvalidatedResetPwToken: false,\r\n};\r\n\r\nexport const authenticateUser = createAsyncThunk(\r\n\t'auth/authenticateUser',\r\n\tasync (\r\n\t\toptions: { email: string; password: string },\r\n\t\t{ dispatch, rejectWithValue }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\t// destructure items\r\n\t\t\tconst { email, password } = options;\r\n\r\n\t\t\t// set email string to all lowercase to prevent false mismatches\r\n\t\t\tconst emailToLowerCase = email.toLowerCase();\r\n\r\n\t\t\t// prepare body JSON object\r\n\t\t\tconst body = JSON.stringify({ email: emailToLowerCase, password });\r\n\r\n\t\t\t// make request to api\r\n\t\t\tconst res = await axios.post('/api/auth', body, config);\r\n\r\n\t\t\t// if response contains a token, update it in auth state\r\n\t\t\tif (res.data.token) {\r\n\t\t\t\treturn res.data.token;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Login error',\r\n\t\t\t\t\tmessage: \"Email & password combination aren't correct\",\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const clearNotification = createAsyncThunk(\r\n\t'auth/clearNotification',\r\n\tasync (options: { notificationId: string; userId: string }) => {\r\n\t\t// destructure necessary items\r\n\t\tconst { notificationId, userId } = options;\r\n\r\n\t\t// prepare JSON body object\r\n\t\tconst body = JSON.stringify({ notificationId, userId });\r\n\r\n\t\t// make POST request to user API\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/clear-notification',\r\n\t\t\tbody,\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\treturn data;\r\n\t}\r\n);\r\n\r\nexport const getUserData = createAsyncThunk(\r\n\t'auth/getUserData',\r\n\tasync (_, { rejectWithValue }) => {\r\n\t\ttry {\r\n\t\t\t// make GET request to API\r\n\t\t\tconst res = await axios.get('/api/auth');\r\n\r\n\t\t\t// return data to state\r\n\t\t\treturn res.data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn rejectWithValue(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const surrogateUser = createAsyncThunk(\r\n\t'auth/surrogateUser',\r\n\tasync (options: { id: string }) => {\r\n\t\ttry {\r\n\t\t\t// prepare body JSON object\r\n\t\t\tconst body = JSON.stringify({ id: options.id });\r\n\r\n\t\t\t// make POST request to API\r\n\t\t\tconst { data } = await axios.post('/api/auth/surrogate-user', body);\r\n\r\n\t\t\t// return data to state\r\n\t\t\treturn data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const updatePassword = createAsyncThunk(\r\n\t'auth/updatePassword',\r\n\tasync (\r\n\t\toptions: { email: string; password: string; redirect: boolean },\r\n\t\t{ dispatch, rejectWithValue }\r\n\t) => {\r\n\t\ttry {\r\n\t\t\t// destructure necessary items\r\n\t\t\tconst { email, password, redirect } = options;\r\n\r\n\t\t\t// double check everything is there before sending it to the API\r\n\t\t\tif (!email || !password) {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\tmessage: 'Required information is missing',\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\treturn rejectWithValue('Required information is missing');\r\n\t\t\t}\r\n\r\n\t\t\t// email to lowercase to prevent stupid errors\r\n\t\t\tconst emailToLowerCase = email.toLowerCase();\r\n\r\n\t\t\t// prepare body JSON object\r\n\t\t\tconst body = JSON.stringify({ email: emailToLowerCase, password });\r\n\r\n\t\t\t// make PUT request to API\r\n\t\t\tconst { data } = await axios.put(\r\n\t\t\t\t'/api/auth/update-password',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\t// if password was successfully updated, alert the user, clear the reset password token in LS, and log them in\r\n\t\t\tif (data === 'Password was successfully updated') {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Reset success',\r\n\t\t\t\t\t\tmessage: 'Your password was successfully updated',\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tlocalStorage.removeItem('resetPwToken');\r\n\t\t\t\tlocalStorage.removeItem('email');\r\n\t\t\t\tif (redirect) {\r\n\t\t\t\t\tawait dispatch(authenticateUser({ email, password }));\r\n\t\t\t\t\treturn dispatch(getUserData());\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// password wasn't successfully updated, alert the user\r\n\t\t\t\treturn dispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Error resetting password',\r\n\t\t\t\t\t\tmessage: 'Please contact support',\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const validateResetPwToken = createAsyncThunk(\r\n\t'auth/validateResetPwToken',\r\n\tasync (options: { resetPwToken: string }, { dispatch, rejectWithValue }) => {\r\n\t\ttry {\r\n\t\t\t// prepare body JSON object\r\n\t\t\tconst body = JSON.stringify({ resetPwToken: options.resetPwToken });\r\n\r\n\t\t\t// make POST request to API\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/auth/reset-password-validation',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\t// if link was validated, update user in state\r\n\t\t\tif (data.message === 'Password reset link was validated') {\r\n\t\t\t\tlocalStorage.setItem('email', data.user);\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\t// alert that link couldn't be updated\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: \"Password couldn't be reset\",\r\n\t\t\t\t\t\tmessage: 'Please request a new email link or contact support.',\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\treturn rejectWithValue(data.message);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn error;\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const authSlice = createSlice({\r\n\tname: 'auth',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tremoveUserData: (state) => {\r\n\t\t\tlocalStorage.removeItem('token');\r\n\t\t\tstate.token = null;\r\n\t\t\tstate.status = 'idle';\r\n\t\t\tstate.isAuthenticated = false;\r\n\t\t\tstate.user = null;\r\n\t\t\tstate.validatedResetPwToken = false;\r\n\t\t},\r\n\t},\r\n\textraReducers: (builder) => {\r\n\t\tbuilder\r\n\t\t\t.addCase(addComment.fulfilled, (state, action) => {\r\n\t\t\t\tif (state.user) {\r\n\t\t\t\t\tstate.user.comments = action.payload;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.addCase(authenticateUser.pending, (state) => {\r\n\t\t\t\tstate.status = 'loading';\r\n\t\t\t})\r\n\t\t\t.addCase(authenticateUser.fulfilled, (state, action) => {\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.token = action.payload;\r\n\t\t\t\tstate.isAuthenticated = true;\r\n\t\t\t})\r\n\t\t\t.addCase(authenticateUser.rejected, (state) => {\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.token = null;\r\n\t\t\t\tstate.isAuthenticated = false;\r\n\t\t\t\tstate.user = null;\r\n\t\t\t\tstate.validatedResetPwToken = false;\r\n\t\t\t})\r\n\t\t\t.addCase(clearNotification.fulfilled, (state, action) => {\r\n\t\t\t\tif (state.user?.notifications) {\r\n\t\t\t\t\tstate.user.notifications = action.payload;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.addCase(getUserData.pending, (state) => {\r\n\t\t\t\tstate.status = 'loading';\r\n\t\t\t})\r\n\t\t\t.addCase(getUserData.fulfilled, (state, action: PayloadAction<User>) => {\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.isAuthenticated = true;\r\n\t\t\t\tstate.user = action.payload;\r\n\t\t\t})\r\n\t\t\t.addCase(getUserData.rejected, (state) => {\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.token = null;\r\n\t\t\t\tstate.isAuthenticated = false;\r\n\t\t\t\tstate.user = null;\r\n\t\t\t\tstate.validatedResetPwToken = false;\r\n\t\t\t})\r\n\t\t\t.addCase(handleLikeLead.fulfilled, (state, action) => {\r\n\t\t\t\tstate.user!.likedLeads! = action.payload?.leads;\r\n\t\t\t})\r\n\t\t\t.addCase(handleArchiveLead.fulfilled, (state, action) => {\r\n\t\t\t\tstate.user!.archivedLeads! = action.payload?.leads;\r\n\t\t\t})\r\n\t\t\t.addCase(surrogateUser.fulfilled, (state, action) => {\r\n\t\t\t\tconst { token, user } = action.payload;\r\n\t\t\t\tstate.token = token;\r\n\t\t\t\tstate.user = user;\r\n\t\t\t})\r\n\t\t\t.addCase(updatePassword.fulfilled, (state) => {\r\n\t\t\t\tstate.validatedResetPwToken = false;\r\n\t\t\t})\r\n\t\t\t.addCase(validateResetPwToken.pending, (state) => {\r\n\t\t\t\tstate.status = 'loading';\r\n\t\t\t})\r\n\t\t\t.addCase(validateResetPwToken.fulfilled, (state) => {\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.validatedResetPwToken = true;\r\n\t\t\t})\r\n\t\t\t.addCase(validateResetPwToken.rejected, (state, action) => {\r\n\t\t\t\tstate.status = 'idle';\r\n\t\t\t\tstate.validatedResetPwToken = false;\r\n\t\t\t});\r\n\t},\r\n});\r\n\r\nexport const { removeUserData } = authSlice.actions;\r\n\r\nexport default authSlice.reducer;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n\tallUsers: [],\r\n\tloading: false,\r\n\tpagination: {\r\n\t\tpage: 1,\r\n\t\thasNextPage: null,\r\n\t\thasPreviousPage: false,\r\n\t\tnextPage: null,\r\n\t\tpreviousPage: null,\r\n\t\tlastPage: null,\r\n\t\ttotalItems: null,\r\n\t},\r\n};\r\n\r\nexport const usersSlice = createSlice({\r\n\tname: 'users',\r\n\tinitialState,\r\n\treducers: {},\r\n});\r\n\r\nexport const {} = usersSlice.actions;\r\n\r\nexport default usersSlice.reducer;\r\n","var _polygon, _path, _path2, _polygon2, _polygon3;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogoApp(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 1024 397\",\n    fill: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _polygon || (_polygon = /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"cls-1\",\n    points: \"800 198 832 198 832 166 864 166 864 134 832 134 800 134 800 166 768 166 768 198 768 230 800 230 800 198\"\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"cls-1\",\n    d: \"M416,134V70H384V38H352V6H128V38H96V70H64v96H32V134H0v64H32v64H64v64H96v32h32v32H352V358h32V326h32V230h32V166H416Zm-64,32V294H320v32H160V294H128V102h32V70H320v32h32v64Z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"cls-1\",\n    d: \"M992,134v32H960V70H928V38H896V6H672V38H640V70H608v96H576v64h32v96h32v32h32v32H896V358h32V326h32V262h32V198h32V134ZM672,294V102h32V70H864v32h32V294H864v32H672Z\"\n  })), _polygon2 || (_polygon2 = /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"cls-1\",\n    points: \"192 102 192 134 160 134 160 166 160 198 192 198 192 166 224 166 224 134 256 134 256 102 224 102 192 102\"\n  })), _polygon3 || (_polygon3 = /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"cls-1\",\n    points: \"576 102 544 102 512 102 480 102 448 102 448 134 448 166 480 166 512 166 544 166 576 166 576 134 576 102\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoApp);\nexport default __webpack_public_path__ + \"static/media/logo-app.3356ebed.svg\";\nexport { ForwardRef as ReactComponent };","import { configureStore } from '@reduxjs/toolkit';\r\n\r\n// import reducers\r\nimport alertReducer from '@features/alert/alertSlice';\r\nimport authReducer from '@features/auth/authSlice';\r\nimport filterReducer from '@features/filters/filtersSlice';\r\nimport leadsReducer from '@features/leads/leadsSlice';\r\nimport usersReducer from '@features/users/usersSlice';\r\n\r\nconst store = configureStore({\r\n\treducer: {\r\n\t\talert: alertReducer,\r\n\t\tauth: authReducer,\r\n\t\tfilters: filterReducer,\r\n\t\tleads: leadsReducer,\r\n\t\tusers: usersReducer,\r\n\t},\r\n\tmiddleware: (getDefaultMiddleware) =>\r\n\t\tgetDefaultMiddleware({\r\n\t\t\tserializableCheck: false,\r\n\t\t}),\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport default store;\r\n","import { useEffect, useState, useCallback } from 'react';\r\n\r\n// redux\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\n\r\nimport type { RootState, AppDispatch } from '../store';\r\n\r\n// redux hooks\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n\r\n// dark mode\r\nexport const useDarkMode = (): [\r\n\tstring,\r\n\tReact.Dispatch<React.SetStateAction<string>>\r\n] => {\r\n\tconst [theme, setTheme] = useState(localStorage.getItem('theme') || 'light');\r\n\t// return a new theme that's the opposite of the current theme\r\n\tconst colorTheme = theme === 'light' ? 'dark' : 'light';\r\n\r\n\tuseEffect(() => {\r\n\t\tif (\r\n\t\t\tlocalStorage.theme === 'dark' ||\r\n\t\t\t(!('theme' in localStorage) &&\r\n\t\t\t\twindow.matchMedia('(prefers-color-scheme: dark)').matches)\r\n\t\t) {\r\n\t\t\tdocument.documentElement.classList.add('dark');\r\n\t\t} else {\r\n\t\t\tdocument.documentElement.classList.remove('dark');\r\n\t\t}\r\n\t}, [theme, colorTheme]);\r\n\r\n\treturn [colorTheme, setTheme];\r\n};\r\n\r\n// right click context menu\r\nexport const useContextMenu = () => {\r\n\tconst [xPos, setXPos] = useState('0px');\r\n\tconst [yPos, setYPos] = useState('0px');\r\n\tconst [showMenu, setShowMenu] = useState(false);\r\n\r\n\tconst handleContextMenu = useCallback(\r\n\t\t(e) => {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tsetXPos(`${e.pageX}px`);\r\n\t\t\tsetYPos(`${e.pageY}px`);\r\n\t\t\tsetShowMenu(true);\r\n\t\t},\r\n\t\t[setXPos, setYPos]\r\n\t);\r\n\r\n\tconst handleClick = useCallback(() => {\r\n\t\tshowMenu && setShowMenu(false);\r\n\t}, [showMenu]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('click', handleClick);\r\n\t\tdocument.addEventListener('contextmenu', handleContextMenu);\r\n\t\treturn () => {\r\n\t\t\tdocument.addEventListener('click', handleClick);\r\n\t\t\tdocument.removeEventListener('contextmenu', handleContextMenu);\r\n\t\t};\r\n\t});\r\n\r\n\treturn { xPos, yPos, showMenu };\r\n};\r\n","import React from 'react';\r\n\r\ninterface ButtonProps {\r\n\twidth: string | null;\r\n\tmargin: boolean;\r\n\tsize: string | null;\r\n\ttext: string;\r\n\tonClick(arg: any): any;\r\n\tcta: boolean;\r\n\tpath: any;\r\n\tconditional: any;\r\n\tconditionalDisplay: any;\r\n\tlightOnly?: boolean;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps> = ({\r\n\ttext,\r\n\tonClick,\r\n\twidth,\r\n\tmargin,\r\n\tsize,\r\n\tcta,\r\n\tpath,\r\n\tconditional,\r\n\tconditionalDisplay,\r\n\tlightOnly,\r\n}) => {\r\n\treturn (\r\n\t\t<button\r\n\t\t\tonClick={onClick}\r\n\t\t\tclassName={`${width || 'w-auto'} ${\r\n\t\t\t\tmargin ? 'ml-4' : ''\r\n\t\t\t} flex items-center relative py-2 px-3 rounded-main shadow-sm hover:shadow-md border border-300 ${\r\n\t\t\t\tsize === 'sm' ? 'text-sm' : 'text-xs'\r\n\t\t\t} font-semibold ${\r\n\t\t\t\tcta\r\n\t\t\t\t\t? lightOnly\r\n\t\t\t\t\t\t? 'cs-purple-light'\r\n\t\t\t\t\t\t: 'cs-purple'\r\n\t\t\t\t\t: 'text-100 group hover:text-purple-500 dark:hover:text-purple-300 dark:bg-darkGray-300 dark:hover:bg-darkGray-200'\r\n\t\t\t} transition-main ring-purple`}\r\n\t\t>\r\n\t\t\t{path && (\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\tclassName='svg-sm'\r\n\t\t\t\t>\r\n\t\t\t\t\t{path}\r\n\t\t\t\t</svg>\r\n\t\t\t)}\r\n\t\t\t<span\r\n\t\t\t\tclassName={`${path ? 'ml-2' : ''} ${\r\n\t\t\t\t\tcta\r\n\t\t\t\t\t\t? ''\r\n\t\t\t\t\t\t: 'text-100 group-hover:text-purple-500 dark:group-hover:text-purple-300'\r\n\t\t\t\t} mx-auto`}\r\n\t\t\t>\r\n\t\t\t\t{text}\r\n\t\t\t</span>\r\n\t\t\t{conditional && conditionalDisplay}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nexport default Button;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\n// packages\r\nimport { animated, useSpring } from 'react-spring';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@hooks/hooks';\r\nimport { removeAlert } from '@features/alert/alertSlice';\r\n\r\nconst Alert: React.FC = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// alert state\r\n\tconst alert = useAppSelector((state) => state.alert);\r\n\t// destructure necessary items\r\n\tconst { id, title, message, alertType } = alert;\r\n\t// local state\r\n\tconst [alertVisible, setAlertVisible] = useState(false);\r\n\r\n\t// set visible conditionally\r\n\tuseEffect(() => {\r\n\t\tif (alert.id) {\r\n\t\t\tsetAlertVisible(true);\r\n\t\t}\r\n\t}, [alert.id]);\r\n\r\n\t// fn to set visiblity and remove from redux state\r\n\tconst handleRemoveAlert = () => {\r\n\t\tif (!alertVisible) return;\r\n\t\talertVisible && setAlertVisible(false);\r\n\t\treturn dispatch(removeAlert());\r\n\t};\r\n\r\n\tconst delay = 4000;\r\n\r\n\t// remove alert after specified times\r\n\tuseEffect(() => {\r\n\t\tif (!alertVisible) return;\r\n\r\n\t\tconst timeoutId = window.setTimeout(() => {\r\n\t\t\thandleRemoveAlert();\r\n\t\t}, delay);\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.clearTimeout(timeoutId);\r\n\t\t};\r\n\t});\r\n\r\n\t// alert animation\r\n\tconst animationStyle = useSpring({\r\n\t\ttransform: alertVisible\r\n\t\t\t? 'translateY(-40%) translateX(-50%)'\r\n\t\t\t: 'translateY(200%) translateX(-50%)',\r\n\t\tconfig: { duration: 200 },\r\n\t});\r\n\r\n\t// set the alert icon conditionally\r\n\tconst setIcon = (alertType: string) => {\r\n\t\tconst foundIcon = alertIcons.find(\r\n\t\t\t(alertIcon) => alertIcon.title === alertType\r\n\t\t);\r\n\t\tif (foundIcon) {\r\n\t\t\treturn foundIcon.path;\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<animated.div\r\n\t\t\tkey={id}\r\n\t\t\tstyle={animationStyle}\r\n\t\t\tclassName={`fixed bottom-0 left-1/2 z-40 w-full max-w-3xl py-4 px-6 rounded-main shadow-lg bg-gray-900 dark:bg-darkGray-200 border border-gray-700 dark:border-darkGray-100`}\r\n\t\t>\r\n\t\t\t<div className='w-full flex items-center justify-between'>\r\n\t\t\t\t<div className='flex item-center'>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={`${\r\n\t\t\t\t\t\t\talertType === 'success'\r\n\t\t\t\t\t\t\t\t? 'text-teal-300'\r\n\t\t\t\t\t\t\t\t: alertType === 'warning'\r\n\t\t\t\t\t\t\t\t? 'text-purple-300'\r\n\t\t\t\t\t\t\t\t: alertType === 'danger'\r\n\t\t\t\t\t\t\t\t? 'text-red-300'\r\n\t\t\t\t\t\t\t\t: 'text-gray-700'\r\n\t\t\t\t\t\t} flex items-center`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\tclassName='h-5 w-5 mt-0.5'\r\n\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{alertType && setIcon(alertType)}\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='ml-2 flex items-center text-white'>\r\n\t\t\t\t\t\t<p className='font-semibold flex-none'>{title}</p>\r\n\t\t\t\t\t\t<p className='ml-2 pl-4 mr-8 text-gray-200 truncate'>{message}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => handleRemoveAlert()}\r\n\t\t\t\t\tclassName={`ml-6 p-1 hover:bg-gray-800 rounded-md text-gray-300 ring-gray`}\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName='svg-base'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\td='M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z'\r\n\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</animated.div>\r\n\t);\r\n};\r\n\r\nconst alertIcons = [\r\n\t{\r\n\t\ttitle: 'danger',\r\n\t\tpath: (\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\ttitle: 'warning',\r\n\t\tpath: (\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\ttitle: 'success',\r\n\t\tpath: (\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t),\r\n\t},\r\n];\r\n\r\nexport default Alert;\r\n","import React from 'react';\r\n\r\nconst DefaultFooter = () => {\r\n\treturn (\r\n\t\t<footer className='mt-6 xl:mt-0 mb-6 container'>\r\n\t\t\t<span className='bg-white'>\r\n\t\t\t\t&copy; 2020 - {new Date().getFullYear()} Leadgeek. All rights reserved.\r\n\t\t\t</span>\r\n\t\t</footer>\r\n\t);\r\n};\r\n\r\nexport default DefaultFooter;\r\n","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEyeOpen(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 12a2 2 0 100-4 2 2 0 000 4z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z\",\n    clipRule: \"evenodd\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEyeOpen);\nexport default __webpack_public_path__ + \"static/media/eye-open.5fb848f4.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Fragment } from 'react';\r\n\r\n// packages\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// redux\r\nimport Alert from '@components/features/alert/Alert';\r\n\r\n// components\r\nimport DefaultFooter from '@components/layout/navigation/DefaultFooter';\r\nimport { ReactComponent as LeadGeekLogo } from '@assets/images/svgs/logo-app.svg';\r\n\r\ninterface DefaultLayoutProps {\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nconst DefaultLayout: React.FC<DefaultLayoutProps> = ({ children }) => {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<div className='flex flex-col justify-between h-screen bg-splatter'>\r\n\t\t\t\t<div className='fixed z-10 inset-x-0 top-0 h-3 bg-gray-900' />\r\n\t\t\t\t<header className='mt-8 hidden md:block container'>\r\n\t\t\t\t\t<NavLink to={'/'}>\r\n\t\t\t\t\t\t<LeadGeekLogo className='default-logo-lg text-purple-500' />\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</header>\r\n\t\t\t\t<main className='relative h-full'>{children}</main>\r\n\t\t\t\t<DefaultFooter />\r\n\t\t\t</div>\r\n\t\t\t<Alert />\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default DefaultLayout;\r\n","import React from 'react';\r\n\r\ninterface FormFieldProps {\r\n\tlabel: string;\r\n\ttype: string;\r\n\tname: string;\r\n\tplaceholder: string;\r\n\tvalue?: string | number;\r\n\tonChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n\trequired: boolean;\r\n\tstyles: string | null;\r\n\tlightOnly?: boolean;\r\n}\r\n\r\nconst FormField: React.FC<FormFieldProps> = ({\r\n\tlabel,\r\n\ttype,\r\n\tname,\r\n\tplaceholder,\r\n\tvalue,\r\n\tonChange,\r\n\trequired,\r\n\tstyles,\r\n\tlightOnly,\r\n}) => {\r\n\treturn (\r\n\t\t<div className={`pt-4 ${styles ? styles : ''} flex-col items-center`}>\r\n\t\t\t<label\r\n\t\t\t\thtmlFor={name}\r\n\t\t\t\tclassName={lightOnly ? 'form-field-label-light' : 'form-field-label'}\r\n\t\t\t>\r\n\t\t\t\t{label}\r\n\t\t\t</label>\r\n\t\t\t<input\r\n\t\t\t\tid={name}\r\n\t\t\t\tname={name}\r\n\t\t\t\ttype={type}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\trequired={required}\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t\tclassName={`mt-1 ${lightOnly ? 'form-field-light' : 'form-field'}`}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default FormField;\r\n","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEyeClosed(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z\",\n    clipRule: \"evenodd\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEyeClosed);\nexport default __webpack_public_path__ + \"static/media/eye-closed.86dcd3d3.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCheck(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M5 13l4 4L19 7\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCheck);\nexport default __webpack_public_path__ + \"static/media/check.e3ff18b6.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react';\r\n\r\nimport { ReactComponent as EyeOpen } from '@assets/images/svgs/eye-open.svg';\r\nimport { ReactComponent as EyeClosed } from '@assets/images/svgs/eye-closed.svg';\r\n\r\ninterface PasswordFormFieldProps {\r\n\tlabel: string;\r\n\tplaceholder: string;\r\n\tname: string;\r\n\tvalue: string;\r\n\tonChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n\trequired: boolean;\r\n\tstyles: string | null;\r\n\tlightOnly?: boolean;\r\n}\r\n\r\nconst PasswordFormField: React.FC<PasswordFormFieldProps> = ({\r\n\tlabel,\r\n\tplaceholder,\r\n\tname,\r\n\tvalue,\r\n\tonChange,\r\n\trequired,\r\n\tstyles,\r\n\tlightOnly,\r\n}) => {\r\n\tconst [passwordShown, setPasswordShown] = useState(false);\r\n\tconst togglePasswordVisibility = () => {\r\n\t\tsetPasswordShown(passwordShown ? false : true);\r\n\t};\r\n\treturn (\r\n\t\t<div className={`pt-4 ${styles ? styles : ''} flex-col items-center`}>\r\n\t\t\t<label\r\n\t\t\t\thtmlFor={name}\r\n\t\t\t\tclassName={lightOnly ? 'form-field-label-light' : 'form-field-label'}\r\n\t\t\t>\r\n\t\t\t\t{label}\r\n\t\t\t</label>\r\n\t\t\t<div className='relative'>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid={name}\r\n\t\t\t\t\tname={name}\r\n\t\t\t\t\ttype={passwordShown ? 'text' : 'password'}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\trequired={required}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tclassName={`mt-1 ${lightOnly ? 'form-field-light' : 'form-field'}`}\r\n\t\t\t\t/>\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={togglePasswordVisibility}\r\n\t\t\t\t\ttype='button'\r\n\t\t\t\t\tclassName='mt-3 mr-4 absolute right-0 rounded-md text-gray-400 focus:outline-none focus:shadow-outline'\r\n\t\t\t\t>\r\n\t\t\t\t\t{passwordShown ? (\r\n\t\t\t\t\t\t<EyeClosed className='mt-2 h-4' />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<EyeOpen className='mt-2 h-4' />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PasswordFormField;\r\n","import axios from 'axios';\r\n\r\nexport const setAuthToken = (token: string) => {\r\n\tif (token) {\r\n\t\taxios.defaults.headers.common['x-auth-token'] = token;\r\n\t\tlocalStorage.setItem('token', token);\r\n\t} else {\r\n\t\tdelete axios.defaults.headers.common['x-auth-token'];\r\n\t\tlocalStorage.removeItem('token');\r\n\t}\r\n};\r\n\r\nexport const setResetPwToken = (token: string) => {\r\n\tif (token) {\r\n\t\taxios.defaults.headers.common['x-auth-token'] = token;\r\n\t\tlocalStorage.setItem('resetPwToken', token);\r\n\t} else {\r\n\t\tdelete axios.defaults.headers.common['x-auth-token'];\r\n\t\tlocalStorage.removeItem('resetPwToken');\r\n\t}\r\n};\r\n\r\nexport default setAuthToken;\r\n","import React, { useState } from 'react';\r\n\r\n// packages\r\nimport { Redirect, Link } from 'react-router-dom';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@hooks/hooks';\r\nimport { removeAlert } from '@components/features/alert/alertSlice';\r\nimport {\r\n\tauthenticateUser,\r\n\tgetUserData,\r\n} from '@components/features/auth/authSlice';\r\n\r\n// components\r\nimport Button from '@components/utils/Button';\r\nimport DefaultLayout from '@components/layout/DefaultLayout';\r\nimport FormField from '@components/utils/FormField';\r\nimport PasswordFormField from '@components/utils/PasswordFormField';\r\n\r\n// utils\r\nimport setAuthToken from '@utils/authTokens';\r\n\r\nconst Login: React.FC = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst token = useAppSelector((state) => state.auth.token);\r\n\r\n\tconst [formData, setFormData] = useState({\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t});\r\n\tconst { email, password } = formData;\r\n\r\n\tconst onChange = (e: React.ChangeEvent<HTMLInputElement>) =>\r\n\t\tsetFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n\tconst onSubmit = async (e: React.FormEvent) => {\r\n\t\te.preventDefault();\r\n\t\tconst res = await dispatch(authenticateUser({ email, password }));\r\n\t\tif (res.meta.requestStatus !== 'rejected' && status === 'idle') {\r\n\t\t\tsetAuthToken(res.payload);\r\n\t\t\tdispatch(removeAlert());\r\n\t\t\treturn dispatch(getUserData());\r\n\t\t}\r\n\t};\r\n\r\n\tif (isAuthenticated && token) {\r\n\t\treturn <Redirect to='/leads' />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<DefaultLayout>\r\n\t\t\t<section className={classes.content}>\r\n\t\t\t\t<article className={classes.card}>\r\n\t\t\t\t\t<header className='pb-4 border-b border-gray-200'>\r\n\t\t\t\t\t\t<h1 className={classes.title}>Log in</h1>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<form className='card-padding-x'>\r\n\t\t\t\t\t\t<FormField\r\n\t\t\t\t\t\t\tlabel={'Email'}\r\n\t\t\t\t\t\t\ttype={'email'}\r\n\t\t\t\t\t\t\tname={'email'}\r\n\t\t\t\t\t\t\tplaceholder={'dsaunders@gmail.com'}\r\n\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tstyles={null}\r\n\t\t\t\t\t\t\tlightOnly={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<PasswordFormField\r\n\t\t\t\t\t\t\tlabel={'Password'}\r\n\t\t\t\t\t\t\tname={'password'}\r\n\t\t\t\t\t\t\tplaceholder={'Enter your password...'}\r\n\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tstyles={null}\r\n\t\t\t\t\t\t\tlightOnly={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t\t<Link to={'/reset/forgot-password/'} className='link-light'>\r\n\t\t\t\t\t\t\t\tForgot password?\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttext={'Log in'}\r\n\t\t\t\t\t\t\t\tonClick={onSubmit}\r\n\t\t\t\t\t\t\t\twidth={'w-full'}\r\n\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\tsize={'sm'}\r\n\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\tlightOnly={true}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<aside className={classes.signup}>\r\n\t\t\t\t\t\t<p className='inline-block'>Need a LeadGeek account?</p>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref='https://leadgeek.io/pricing/'\r\n\t\t\t\t\t\t\tclassName={classes.subheaderLink}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tJoin now\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</aside>\r\n\t\t\t\t</article>\r\n\t\t\t</section>\r\n\t\t</DefaultLayout>\r\n\t);\r\n};\r\n\r\nconst classes = {\r\n\tcard: 'max-w-md w-full mt-12 md:mt-0 mx-auto card-200 card-padding-y bg-white',\r\n\tcontent: 'h-full w-full md:flex md:flex-col md:justify-center container',\r\n\tcontentHeader: 'mt-8 hidden md:block container',\r\n\tlogoLg: 'default-logo-lg text-purple-500',\r\n\tlogoSm: 'default-logo-sm',\r\n\tsignup: 'flex items-center mt-4 card-padding-x text-sm',\r\n\tsubheaderLink: 'block md:inline-block ml-2 link-light',\r\n\ttitle: 'card-padding-x font-bold text-xl text-gray-900',\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\n\r\n// packages\r\nimport { Preloader, Oval } from 'react-preloader-icon';\r\n\r\n// utils\r\nimport { useDarkMode } from '@hooks/hooks';\r\n\r\ninterface SpinnerProps {\r\n\tdivWidth: string | null;\r\n\tcenter: boolean;\r\n\tspinnerWidth: string | null;\r\n\tmargin: boolean;\r\n\ttext: string | null;\r\n}\r\n\r\nconst Spinner: React.FC<SpinnerProps> = ({\r\n\tdivWidth,\r\n\tcenter,\r\n\tspinnerWidth,\r\n\tmargin,\r\n\ttext,\r\n}) => {\r\n\tconst [colorTheme] = useDarkMode();\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`${divWidth ? divWidth : ''} ${\r\n\t\t\t\tcenter\r\n\t\t\t\t\t? 'absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2'\r\n\t\t\t\t\t: ''\r\n\t\t\t} flex flex-col items-center justify-center ${\r\n\t\t\t\tmargin ? 'mt-16 mb-8' : ''\r\n\t\t\t}`}\r\n\t\t>\r\n\t\t\t<Preloader\r\n\t\t\t\tuse={Oval}\r\n\t\t\t\tsize={spinnerWidth === 'sm' ? 20 : spinnerWidth === 'md' ? 35 : 45}\r\n\t\t\t\tstrokeWidth={6}\r\n\t\t\t\tstrokeColor={colorTheme === 'dark' ? '#5d55fa' : '#A2A5FC'}\r\n\t\t\t\tduration={500}\r\n\t\t\t/>\r\n\t\t\t{text && (\r\n\t\t\t\t<div className='mt-8 font-semibold text-100'>\r\n\t\t\t\t\t{text || 'Loading results...'}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Spinner;\r\n","import React, { useState } from 'react';\r\n\r\n// packages\r\nimport axios from 'axios';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// redux\r\nimport { useAppDispatch } from '@hooks/hooks';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\n\r\n// components\r\nimport Button from '@components/utils/Button';\r\nimport DefaultLayout from '@components/layout/DefaultLayout';\r\nimport FormField from '@components/utils/FormField';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport { setResetPwToken } from '@utils/authTokens';\r\nimport { config } from '@utils/utils';\r\n\r\nconst ForgotPassword: React.FC = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// local state\r\n\tconst [formData, setFormData] = useState({\r\n\t\temail: '',\r\n\t});\r\n\tconst [status, setStatus] = useState<'loading' | 'idle'>('idle');\r\n\r\n\t// destructure necessary items\r\n\tconst { email } = formData;\r\n\r\n\t// on form input change\r\n\tconst onChange = (e: React.ChangeEvent<HTMLInputElement>) =>\r\n\t\tsetFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n\t// forgot password handler\r\n\tconst forgotPassword = async (email: string) => {\r\n\t\tsetStatus('loading');\r\n\t\t// set email to lowercase to prevent errors\r\n\t\tconst emailToLowerCase = email.toLowerCase();\r\n\r\n\t\t// prepare body JSON object\r\n\t\tconst body = JSON.stringify({ email: emailToLowerCase });\r\n\r\n\t\ttry {\r\n\t\t\t// make POST request to API\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/auth/forgot-password',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\t// if email was sent, alert the user\r\n\t\t\tif (data.message === 'Password recovery email sent successfully') {\r\n\t\t\t\tsetStatus('idle');\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Success',\r\n\t\t\t\t\t\tmessage: `Email sent to ${email} if an account is associated.`,\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\treturn setResetPwToken(data.token);\r\n\t\t\t} else {\r\n\t\t\t\tsetStatus('idle');\r\n\t\t\t\treturn dispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Email send failure',\r\n\t\t\t\t\t\tmessage: data.message,\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error: any) {\r\n\t\t\t// make sure people can't guess user's password by trial and error\r\n\t\t\tconst errorMsg = error?.response.data;\r\n\r\n\t\t\tif (errorMsg === 'Email not found in database') {\r\n\t\t\t\tsetStatus('idle');\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Success',\r\n\t\t\t\t\t\tmessage: `An email has been sent to ${email} if an account is associated.`,\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tsetStatus('idle');\r\n\t\t\t\t// server error\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Error sending email',\r\n\t\t\t\t\t\tmessage: 'Please contact support',\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// submit handler\r\n\tconst onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\r\n\t\t// error for empty email\r\n\t\tif (email === '') {\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Required field missing',\r\n\t\t\t\t\tmessage: 'Please enter your email',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tforgotPassword(email);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<DefaultLayout>\r\n\t\t\t<section className={classes.content}>\r\n\t\t\t\t<article className='mt-12 md:mt-0 mx-auto w-full max-w-md card-300 bg-white card-padding-y'>\r\n\t\t\t\t\t<header className='pb-4 border-b border-gray-200'>\r\n\t\t\t\t\t\t<h1 className='card-padding-x font-bold text-xl text-gray-900'>\r\n\t\t\t\t\t\t\tReset password\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<div className='card-padding-x'>\r\n\t\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t\t<p className='inline-block'>\r\n\t\t\t\t\t\t\t\tDon't worry, it happens to the best of us.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p className='mt-2 inline-block'>\r\n\t\t\t\t\t\t\t\tReceive password reset instructions to the email below.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<form onSubmit={(e) => onSubmit(e)}>\r\n\t\t\t\t\t\t\t<FormField\r\n\t\t\t\t\t\t\t\tlabel='Email'\r\n\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\tplaceholder='dsaunders@gmail.com'\r\n\t\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\tstyles={null}\r\n\t\t\t\t\t\t\t\tlightOnly={true}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t\t\t{status === 'idle' ? (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttext={'Send email'}\r\n\t\t\t\t\t\t\t\t\t\tonClick={onSubmit}\r\n\t\t\t\t\t\t\t\t\t\twidth={'w-full'}\r\n\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\tsize={'sm'}\r\n\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\tlightOnly={true}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\tspinnerWidth={'sm'}\r\n\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='mt-4 text-sm text-gray-400'>\r\n\t\t\t\t\t\t\t\t<NavLink exact to={'/login'} className='link-light'>\r\n\t\t\t\t\t\t\t\t\tBack to log in\r\n\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</article>\r\n\t\t\t</section>\r\n\t\t</DefaultLayout>\r\n\t);\r\n};\r\n\r\nconst classes = {\r\n\tcard: 'max-w-md w-full mt-12 md:mt-0 mx-auto card-200 card-padding-y bg-white',\r\n\tcontent: 'h-full w-full md:flex md:flex-col md:justify-center container',\r\n\tcontentHeader: 'mt-8 hidden md:block container',\r\n\tlogoLg: 'default-logo-lg text-purple-500',\r\n\tlogoSm: 'default-logo-sm',\r\n\tsignup: 'flex items-center mt-4 card-padding-x text-sm',\r\n\tsubheaderLink: 'block md:inline-block ml-2 link',\r\n\ttitle: 'card-padding-x font-bold text-xl text-gray-900',\r\n};\r\n\r\nexport default ForgotPassword;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\n// packages\r\nimport { Redirect, NavLink } from 'react-router-dom';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@hooks/hooks';\r\nimport { removeAlert, setAlert } from '@components/features/alert/alertSlice';\r\nimport { updatePassword, validateResetPwToken } from '@features/auth/authSlice';\r\n\r\n// components\r\nimport Button from '@components/utils/Button';\r\nimport DefaultLayout from '@components/layout/DefaultLayout';\r\nimport PasswordFormField from '@components/utils/PasswordFormField';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport { passwordList } from '@utils/utils';\r\n\r\nconst ResetPasswordPage = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// auth selectors\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst validatedResetPwToken = useAppSelector(\r\n\t\t(state) => state.auth.validatedResetPwToken\r\n\t);\r\n\r\n\t// local state\r\n\tconst [email, setEmail] = useState(localStorage.getItem('email'));\r\n\tconst [resetPwToken] = useState<string>(localStorage.resetPwToken);\r\n\tconst [formData, setFormData] = useState({\r\n\t\tpassword_1: '',\r\n\t\tpassword_2: '',\r\n\t});\r\n\r\n\t// destructure necessary items\r\n\tconst { password_1, password_2 } = formData;\r\n\r\n\t// check for valid token on page load\r\n\tuseEffect(() => {\r\n\t\tdispatch(validateResetPwToken({ resetPwToken }));\r\n\t}, []);\r\n\r\n\t// handle form input change\r\n\tconst onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetFormData({ ...formData, [e.target.name]: e.target.value });\r\n\t};\r\n\r\n\tconst handleUpdatePassword = (\r\n\t\temail: string,\r\n\t\tpassword_1: string,\r\n\t\tpassword_2: string\r\n\t) => {\r\n\t\tif (!email) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Required information missing',\r\n\t\t\t\t\tmessage: '',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// error for empty password\r\n\t\tif (!password_1 || !password_2) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Required field missing',\r\n\t\t\t\t\tmessage: \"Password field can't be empty\",\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// error for password not matching\r\n\t\tif (password_1 !== password_2) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: \"Passwords don't match\",\r\n\t\t\t\t\tmessage: 'Check spelling or case sensitivity',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// error for password too short\r\n\t\tif (password_1.length < 7) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Password is too short',\r\n\t\t\t\t\tmessage: 'Password must be at least 7 characters',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// error for if password contains email string\r\n\t\tconst stringBeforeAt = (string: string) => {\r\n\t\t\tlet splitString = string.split('@');\r\n\t\t\treturn splitString[0];\r\n\t\t};\r\n\t\tlet emailBeforeAt = stringBeforeAt(email);\r\n\t\tif (password_1.includes(emailBeforeAt)) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Password is too similar to your email',\r\n\t\t\t\t\tmessage: 'Please choose another password',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// error for if password is from a list of common passwords\r\n\t\tif (passwordList.includes(password_1)) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Password is too common',\r\n\t\t\t\t\tmessage: 'Please pick a more unique password',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tdispatch(removeAlert());\r\n\t\t\t// password passes, update in DB\r\n\t\t\tconst password = password_1;\r\n\t\t\treturn dispatch(updatePassword({ email, password, redirect: true }));\r\n\t\t}\r\n\t};\r\n\r\n\t// if user is authenticated, redirect to app\r\n\tif (isAuthenticated) {\r\n\t\treturn <Redirect to='/leads' />;\r\n\t}\r\n\r\n\treturn status === 'idle' ? (\r\n\t\t<DefaultLayout>\r\n\t\t\t{resetPwToken && validatedResetPwToken ? (\r\n\t\t\t\t<section className={classes.content}>\r\n\t\t\t\t\t<article className={classes.card}>\r\n\t\t\t\t\t\t<header className='pb-4 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t<h1 className={classes.title}>Reset Password</h1>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t<form className='card-padding-x'>\r\n\t\t\t\t\t\t\t<PasswordFormField\r\n\t\t\t\t\t\t\t\tlabel='New Password'\r\n\t\t\t\t\t\t\t\tplaceholder='Create a new password'\r\n\t\t\t\t\t\t\t\tname='password_1'\r\n\t\t\t\t\t\t\t\tvalue={password_1}\r\n\t\t\t\t\t\t\t\tonChange={(e) => onChange(e)}\r\n\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\tstyles={null}\r\n\t\t\t\t\t\t\t\tlightOnly={true}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<PasswordFormField\r\n\t\t\t\t\t\t\t\tlabel='Confirm Password'\r\n\t\t\t\t\t\t\t\tplaceholder='Enter the password again'\r\n\t\t\t\t\t\t\t\tname='password_2'\r\n\t\t\t\t\t\t\t\tvalue={password_2}\r\n\t\t\t\t\t\t\t\tonChange={(e) => onChange(e)}\r\n\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\tstyles={null}\r\n\t\t\t\t\t\t\t\tlightOnly={true}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<div className='mt-4 card-padding-x'>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttext={'Reset password'}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetEmail(localStorage.getItem('email'));\r\n\t\t\t\t\t\t\t\t\temail && handleUpdatePassword(email, password_1, password_2);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twidth={'w-full'}\r\n\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\tsize={'sm'}\r\n\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\tlightOnly={true}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</article>\r\n\t\t\t\t</section>\r\n\t\t\t) : (\r\n\t\t\t\t<section className={classes.content}>\r\n\t\t\t\t\t<article className={classes.card}>\r\n\t\t\t\t\t\t<header className='pb-4 border-b border-gray-200'>\r\n\t\t\t\t\t\t\t<h1 className={classes.title}>Uh-oh!</h1>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t<div className='mt-4 card-padding-x'>\r\n\t\t\t\t\t\t\tYour password could not be reset. Please request a{' '}\r\n\t\t\t\t\t\t\t<NavLink to='/reset/forgot-password/' className={'link-light'}>\r\n\t\t\t\t\t\t\t\tnew password reset link\r\n\t\t\t\t\t\t\t</NavLink>{' '}\r\n\t\t\t\t\t\t\tor{' '}\r\n\t\t\t\t\t\t\t<a href='https://leadgeek.io/contact/' className={'link-light'}>\r\n\t\t\t\t\t\t\t\tcontact support\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t.\r\n\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\tto='/login'\r\n\t\t\t\t\t\t\t\tclassName='block bg-purple-500 mt-4 py-2 w-full rounded-md text-white text-center shadow-md hover:bg-purple-600 transition-colors-main ring-purple'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tReturn to log in\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</article>\r\n\t\t\t\t</section>\r\n\t\t\t)}\r\n\t\t</DefaultLayout>\r\n\t) : (\r\n\t\t<Spinner\r\n\t\t\tdivWidth={null}\r\n\t\t\tcenter={true}\r\n\t\t\tspinnerWidth={null}\r\n\t\t\tmargin={false}\r\n\t\t\ttext={null}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst classes = {\r\n\tcard: 'max-w-md w-full mt-12 md:mt-0 mx-auto card-200 card-padding-y bg-white',\r\n\tcontent: 'h-full w-full md:flex md:flex-col md:justify-center container',\r\n\ttitle: 'card-padding-x font-bold text-xl text-gray-900',\r\n};\r\n\r\nexport default ResetPasswordPage;\r\n","import React, { useState } from 'react';\r\n\r\n// packages\r\nimport { Redirect, useLocation } from 'react-router-dom';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@hooks/hooks';\r\nimport { removeAlert, setAlert } from '@features/alert/alertSlice';\r\nimport {\r\n\tsetLeadLoading,\r\n\tsetSearchValue,\r\n} from '@components/features/leads/leadsSlice';\r\n\r\ninterface SearchBarProps {\r\n\tplaceholder: string | null;\r\n}\r\n\r\nconst SearchBar: React.FC<SearchBarProps> = ({ placeholder }) => {\r\n\tconst dispatch = useAppDispatch();\r\n\tconst location = useLocation();\r\n\r\n\t// leads state\r\n\tconst currentSearchValue = useAppSelector(\r\n\t\t(state) => state.leads.search.searchValue\r\n\t);\r\n\r\n\t// local state\r\n\tconst [redirectToSearch, setRedirectToSearch] = useState(false);\r\n\tconst [query, setQuery] = useState('');\r\n\r\n\t// search helpers\r\n\tconst onSearchChange = (e: any) => {\r\n\t\tsetQuery(e.target.value);\r\n\t};\r\n\r\n\t// handle search submit\r\n\tconst handleSearchSubmit = async (e: any) => {\r\n\t\te.preventDefault();\r\n\t\tif (query) {\r\n\t\t\tif (location.pathname !== '/search') {\r\n\t\t\t\tsetRedirectToSearch(true);\r\n\t\t\t}\r\n\r\n\t\t\tif (query === currentSearchValue) {\r\n\t\t\t\treturn dispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Already showing results',\r\n\t\t\t\t\t\tmessage: 'Results for this query are already showing.',\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tdispatch(removeAlert());\r\n\t\t\tdispatch(setLeadLoading());\r\n\t\t\treturn dispatch(setSearchValue(query));\r\n\t\t} else {\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'No value was entered',\r\n\t\t\t\t\tmessage: 'Please enter a search value and try again.',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tif (redirectToSearch) {\r\n\t\treturn <Redirect to={{ pathname: '/search' }} />;\r\n\t}\r\n\treturn (\r\n\t\t<div className='flex items-center justify-end'>\r\n\t\t\t<div className='w-72 relative z-0'>\r\n\t\t\t\t<form\r\n\t\t\t\t\taction='/search/'\r\n\t\t\t\t\tmethod='POST'\r\n\t\t\t\t\tonSubmit={(e) => handleSearchSubmit(e)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tname='q'\r\n\t\t\t\t\t\tplaceholder={placeholder || 'Enter a search...'}\r\n\t\t\t\t\t\tonChange={(e) => onSearchChange(e)}\r\n\t\t\t\t\t\tclassName='py-2 pl-10 w-full rounded-main border border-300 input text-sm placeholder-gray-700 text-300 transition-main ring-purple'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName='mt-2.5 ml-4 absolute top-0 left-0 svg-sm text-gray-700'\r\n\t\t\t\t\t\tfill='none'\r\n\t\t\t\t\t\tviewBox='0 0 24 24'\r\n\t\t\t\t\t\tstroke='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\td='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SearchBar;\r\n","import React, {\r\n\tuseState,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseCallback,\r\n\tuseMemo,\r\n} from 'react';\r\n\r\n// packages\r\nimport axios from 'axios';\r\nimport { DateTime } from 'luxon';\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@hooks/hooks';\r\nimport {\r\n\tclearNotification,\r\n\tremoveUserData,\r\n} from '@components/features/auth/authSlice';\r\nimport {\r\n\tsetLeadLoading,\r\n\tclearCurrentLead,\r\n} from '@components/features/leads/leadsSlice';\r\n\r\n// components\r\nimport SearchBar from '@components/layout/navigation/SearchBar';\r\nimport Spinner from '@components/utils/Spinner';\r\nimport { ReactComponent as LeadGeekLogo } from '@assets/images/svgs/logo-app.svg';\r\n\r\n// utils\r\nimport { config, useOutsideMouseup } from '@utils/utils';\r\nimport { useDarkMode } from '@hooks/hooks';\r\nimport { Notification } from '@utils/interfaces/Notification';\r\n\r\nconst Navbar: React.FC = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\tconst location = useLocation();\r\n\r\n\t// auth state\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\r\n\t// local state\r\n\tconst [notificationDropdown, setNotificationDropdown] = useState(false);\r\n\tconst [notifications, setNotifications] = useState<any>([]);\r\n\tconst [userDropdown, setUserDropdown] = useState(false);\r\n\tconst [status, setStatus] = useState<'loading' | 'idle'>('idle');\r\n\r\n\t// notifications modal handlers\r\n\tconst notificationsModalRef = useRef(null);\r\n\tuseOutsideMouseup(notificationsModalRef, setNotificationDropdown, null);\r\n\r\n\t// settings modal handlers\r\n\tconst settingsModalRef = useRef(null);\r\n\tuseOutsideMouseup(settingsModalRef, setUserDropdown, null);\r\n\r\n\t// hotkeys\r\n\t// close details on escape key\r\n\tuseHotkeys(\r\n\t\t'Escape',\r\n\t\t() => {\r\n\t\t\tsetUserDropdown(false);\r\n\t\t\tsetNotificationDropdown(false);\r\n\t\t},\r\n\t\t{ keyup: true }\r\n\t);\r\n\r\n\t// set user initials\r\n\tconst initial = useMemo(() => {\r\n\t\tif (user?.name) return user?.name.split(' ').map((n) => n[0])[0];\r\n\t}, [user?.name]);\r\n\r\n\t// populate notifications\r\n\tconst getNotificationData = useCallback(\r\n\t\tasync (notificationIds: { _id: string }[]) => {\r\n\t\t\tsetStatus('loading');\r\n\t\t\t// prepare JSON body object\r\n\t\t\tconst body = JSON.stringify({ ids: notificationIds });\r\n\r\n\t\t\t// make POST request to user API\r\n\t\t\tconst { data } = await axios.post<{ notifications: Notification[] }>(\r\n\t\t\t\t'/api/users/notifications',\r\n\t\t\t\tbody,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\tsetStatus('idle');\r\n\t\t\tconsole.log(data.notifications);\r\n\t\t\treturn setNotifications(data.notifications);\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tuser?.notifications &&\r\n\t\t\tuser?.notifications.length > 0 &&\r\n\t\t\tgetNotificationData(user.notifications);\r\n\t}, []);\r\n\r\n\t// clear user data on logout\r\n\tconst logoutUser = () => {\r\n\t\tdispatch(removeUserData());\r\n\t\tsetUserDropdown(false);\r\n\t};\r\n\r\n\tconst [colorTheme] = useDarkMode();\r\n\r\n\treturn (\r\n\t\t<header className='w-full cs-light-400 text-300 shadow-sm border-b border-300'>\r\n\t\t\t<nav className='container'>\r\n\t\t\t\t<div className='center-between py-1.5'>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tto={'/leads/'}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tlocation.pathname !== '/leads/' && dispatch(setLeadLoading());\r\n\t\t\t\t\t\t\tdispatch(clearCurrentLead());\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<LeadGeekLogo\r\n\t\t\t\t\t\t\tclassName={`h-6 ${\r\n\t\t\t\t\t\t\t\tcolorTheme === 'dark' ? 'text-purple-500' : 'text-purple-300'\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t<SearchBar placeholder='Enter a search...' />\r\n\t\t\t\t\t<aside className='flex items-center'>\r\n\t\t\t\t\t\t<div className='relative text-gray-400'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='relative p-1 rounded-lg group text-gray-500 hover:text-gray-600 dark:text-gray-700 dark:hover:text-gray-300 transition-main ring-gray'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetUserDropdown(false);\r\n\t\t\t\t\t\t\t\t\tsetNotificationDropdown(!notificationDropdown ? true : false);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\tclassName='h-6 w-6'\r\n\t\t\t\t\t\t\t\t\tfill='none'\r\n\t\t\t\t\t\t\t\t\tviewBox='0 0 24 24'\r\n\t\t\t\t\t\t\t\t\tstroke='currentColor'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td='M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t{user?.notifications && user?.notifications.length > 0 && (\r\n\t\t\t\t\t\t\t\t\t<div className='absolute top-0 right-0 h-2.5 w-2.5 bg-pink-600 dark:bg-pink-100 rounded-full  border-2 border-white dark:border-darkGray-400 transform translate-y-1 -translate-x-0.5' />\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t{notificationDropdown && (\r\n\t\t\t\t\t\t\t\t<article\r\n\t\t\t\t\t\t\t\t\tref={notificationsModalRef}\r\n\t\t\t\t\t\t\t\t\tclassName='absolute top-0 right-0 z-30 w-80 pt-4 pb-2 cs-light-400 card-200 text-300 break-words transform translate-y-12'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<header className='pb-2 px-4 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t\t<h4 className='font-bold text-lg'>Notifications</h4>\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t{status === 'loading' ? (\r\n\t\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\t\tspinnerWidth={'md'}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : notifications.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t<ul className='w-full text-sm text-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t{notifications.slice(0, 4).map((item: any, i: number) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<NotificationItem\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserId={user?._id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetNotifications={setNotifications}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<div className='py-6 px-4 font-semibold text-sm text-gray-700 dark:text-gray-400'>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\tNotifications for your account will show up here, but\r\n\t\t\t\t\t\t\t\t\t\t\t\tyou're all caught up for now!{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span role='img' aria-label='Party emoji'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='relative ml-4 text-gray-400'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetNotificationDropdown(false);\r\n\t\t\t\t\t\t\t\t\tsetUserDropdown(userDropdown ? false : true);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName='p-2 h-8 w-8 all-center cs-purple rounded-full shadow-sm transition-main ring-purple'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span className='text-lg font-bold'>{initial}</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t{userDropdown && (\r\n\t\t\t\t\t\t\t\t<div className='relative'>\r\n\t\t\t\t\t\t\t\t\t<article\r\n\t\t\t\t\t\t\t\t\t\tref={settingsModalRef}\r\n\t\t\t\t\t\t\t\t\t\tclassName='absolute top-0 right-0 z-30 w-64 pt-4 pb-2 rounded-main cs-light-400 card-200 text-300 transform translate-y-4'\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<div className='relative'>\r\n\t\t\t\t\t\t\t\t\t\t\t<header className='pb-2 px-4 flex items-center justify-between border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h5 className='inline-block font-bold text-lg'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole='img'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label='Waving emoji'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='mr-1'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tHi, {user?.name.split(' ')[0] || 'Account'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t<nav>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{navLinks.dropdownItems.map((item, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<UserDropdownItem key={i} item={item} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{(user?.role === 'admin' || user?.role === 'master') &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavLinks.adminLinks.map((item, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<UserDropdownItem key={i} item={item} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={'logout'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => logoutUser()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='w-full py-2 px-4 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-darkGray-100 group transition-colors-main focus:outline-none'\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='font-semibold text-sm text-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</aside>\r\n\t\t\t\t</div>\r\n\t\t\t</nav>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\ninterface UserDropdownItemProps {\r\n\tkey: number;\r\n\titem: NavLinkItem;\r\n}\r\n\r\nconst UserDropdownItem: React.FC<UserDropdownItemProps> = ({ key, item }) => {\r\n\treturn (\r\n\t\t<NavLink\r\n\t\t\tto={`/${item.link}/`}\r\n\t\t\tclassName='w-full py-2 px-4 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-darkGray-100 transition-main focus:outline-none'\r\n\t\t>\r\n\t\t\t<span className='font-semibold text-sm text-200'>{item.title}</span>\r\n\t\t</NavLink>\r\n\t);\r\n};\r\n\r\ninterface NotificationItemProps {\r\n\titem: Notification;\r\n\tuserId: string | undefined;\r\n\tsetNotifications: React.Dispatch<React.SetStateAction<any[]>>;\r\n}\r\n\r\nconst NotificationItem: React.FC<NotificationItemProps> = ({\r\n\titem,\r\n\tuserId,\r\n\tsetNotifications,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// local state\r\n\tconst [hover, setHover] = useState(false);\r\n\tconst [buttonHover, setButtonHover] = useState(false);\r\n\r\n\treturn (\r\n\t\t<li\r\n\t\t\tonMouseEnter={() => setHover(true)}\r\n\t\t\tonMouseLeave={() => setHover(false)}\r\n\t\t\tclassName='py-2 pl-4 pr-3 hover:bg-gray-100 dark:hover:bg-darkGray-100 transition-main focus:outline-none border-b border-100 last:border-none'\r\n\t\t>\r\n\t\t\t<div className='center-between mb-1'>\r\n\t\t\t\t<header className='flex items-center'>\r\n\t\t\t\t\t<h5 className='mr-4 font-semibold text-base'>{item.title}</h5>\r\n\t\t\t\t</header>\r\n\t\t\t\t{hover && item.clearable && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonMouseEnter={() => setButtonHover(true)}\r\n\t\t\t\t\t\tonMouseLeave={() => setButtonHover(false)}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetNotifications((prev) =>\r\n\t\t\t\t\t\t\t\tprev.filter((n) => n._id !== item._id)\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tuserId &&\r\n\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\tclearNotification({ notificationId: item._id, userId })\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName='relative icon-button'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\tclassName='svg-sm'\r\n\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\td='M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z'\r\n\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t{buttonHover && (\r\n\t\t\t\t\t\t\t<div className='absolute top-0 right-0 z-10 min-w-max p-2 rounded-md shadow-md bg-gray-900 text-left text-white text-xs transform -translate-y-1 -translate-x-8'>\r\n\t\t\t\t\t\t\t\tClear notification\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<time dateTime={DateTime.fromSeconds(item.date).toFormat('yyyy-LL-d')}>\r\n\t\t\t\t{DateTime.fromSeconds(item.date).toFormat('LLL dd @ t')}\r\n\t\t\t</time>\r\n\t\t\t<p className='pt-2 text-100'>{item.description}</p>\r\n\t\t\t{item.externalLink && (\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={item.externalLink}\r\n\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\tclassName='inline-block mt-2 link transition-main'\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className='flex items-center'>\r\n\t\t\t\t\t\t<span>View</span>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\tclassName='ml-2 svg-sm'\r\n\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path d='M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z' />\r\n\t\t\t\t\t\t\t<path d='M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z' />\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</a>\r\n\t\t\t)}\r\n\t\t\t{item.internalLink && (\r\n\t\t\t\t<NavLink\r\n\t\t\t\t\tto={`/${item.internalLink}/`}\r\n\t\t\t\t\tclassName='flex items-center mt-2 link transition-main'\r\n\t\t\t\t>\r\n\t\t\t\t\tView\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName='ml-2 svg-sm'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path d='M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z' />\r\n\t\t\t\t\t\t<path d='M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z' />\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</NavLink>\r\n\t\t\t)}\r\n\t\t</li>\r\n\t);\r\n};\r\n\r\ninterface NavLinkItem {\r\n\ttitle: string;\r\n\tlink: string;\r\n}\r\n\r\n// primary links\r\nconst navLinks: {\r\n\tprimaryLinks: NavLinkItem[];\r\n\tsecondaryLinks: NavLinkItem[];\r\n\tadminLinks: NavLinkItem[];\r\n\tdropdownItems: NavLinkItem[];\r\n} = {\r\n\tprimaryLinks: [\r\n\t\t{\r\n\t\t\ttitle: 'Leads',\r\n\t\t\tlink: 'leads',\r\n\t\t},\r\n\t],\r\n\tsecondaryLinks: [],\r\n\tadminLinks: [\r\n\t\t{\r\n\t\t\ttitle: 'Admin',\r\n\t\t\tlink: 'admin',\r\n\t\t},\r\n\t],\r\n\tdropdownItems: [\r\n\t\t{\r\n\t\t\ttitle: 'Settings',\r\n\t\t\tlink: 'settings/account',\r\n\t\t},\r\n\t],\r\n};\r\n\r\nexport default React.memo(Navbar);\r\n","import React, { Fragment } from 'react';\r\n\r\n// redux\r\nimport { useAppSelector } from '@hooks/hooks';\r\nimport Alert from '@components/features/alert/Alert';\r\n\r\n// components\r\nimport Navbar from '@components/layout/navigation/Navbar';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\ninterface AuthLayoutProps {\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nconst AuthLayout: React.FC<AuthLayoutProps> = ({ children }) => {\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Alert />\r\n\t\t\t{status === 'idle' && isAuthenticated && user ? (\r\n\t\t\t\t<div className='min-h-screen w-full relative cs-bg overflow-hidden'>\r\n\t\t\t\t\t<Navbar />\r\n\t\t\t\t\t<main className='h-full w-full '>{children}</main>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<Spinner\r\n\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\tcenter={true}\r\n\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\tmargin={false}\r\n\t\t\t\t\ttext={'Loading account...'}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default AuthLayout;\r\n","import React, { useRef } from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon-business-days';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\n\r\n// redux\r\nimport { useAppDispatch } from '@hooks/hooks';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\nimport { setDateLimit } from '@features/filters/filtersSlice';\r\nimport { setPage } from '@features/leads/leadsSlice';\r\n\r\n// utils\r\nimport { useOutsideMousedown } from '@utils/utils';\r\n\r\ninterface DatePickerProps {\r\n\ttype: 'feed' | 'liked' | 'archived' | 'search';\r\n\tdate: boolean;\r\n\tsetDate: React.Dispatch<React.SetStateAction<boolean>>;\r\n\tdateCreated: string;\r\n\tlastUpdated: string | null;\r\n}\r\n\r\nconst DatePicker: React.FC<DatePickerProps> = ({\r\n\ttype,\r\n\tdate,\r\n\tsetDate,\r\n\tdateCreated,\r\n\tlastUpdated,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// modal close handlers\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMousedown(wrapperRef, setDate, null);\r\n\t// hotkeys\r\n\t// close details on escape key\r\n\tuseHotkeys(\r\n\t\t'Escape',\r\n\t\t() => {\r\n\t\t\tdate && setDate(false);\r\n\t\t},\r\n\t\t{ keyup: true }\r\n\t);\r\n\r\n\t// set dates\r\n\tconst mostRecentDay = DateTime.fromISO(lastUpdated || DateTime.now());\r\n\tconst previousDay = mostRecentDay.minusBusiness({ days: 1 });\r\n\tconst lastFiveStart = mostRecentDay.minusBusiness({ days: 5 });\r\n\tconst lastFourteenStart = mostRecentDay.minusBusiness({ days: 10 });\r\n\tconst last30Start = mostRecentDay.minusBusiness({ days: 30 });\r\n\tconst lastDay = DateTime.fromISO(dateCreated);\r\n\r\n\t// date options in picker\r\n\tconst dateOptions = [\r\n\t\t{\r\n\t\t\ttitle:\r\n\t\t\t\tmostRecentDay.startOf('day') >= DateTime.now().startOf('day')\r\n\t\t\t\t\t? 'Today'\r\n\t\t\t\t\t: 'Most recent day',\r\n\t\t\tdateString: mostRecentDay.toFormat('LLL dd'),\r\n\t\t\tmin: mostRecentDay,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: mostRecentDay.startOf('day'),\r\n\t\t\t\t\t\tmax: mostRecentDay.endOf('day'),\r\n\t\t\t\t\t\tselected: mostRecentDay.toFormat('LLL dd, yyyy'),\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle:\r\n\t\t\t\tpreviousDay.startOf('day') <=\r\n\t\t\t\tDateTime.now().minusBusiness({ days: 1 }).startOf('day')\r\n\t\t\t\t\t? 'Previous day'\r\n\t\t\t\t\t: 'Yesterday',\r\n\t\t\tdateString: previousDay.toFormat('LLL dd'),\r\n\t\t\tmin: previousDay,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: previousDay.startOf('day'),\r\n\t\t\t\t\t\tmax: previousDay.endOf('day'),\r\n\t\t\t\t\t\tselected: previousDay.toFormat('LLL dd, yyyy'),\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Last 7 days',\r\n\t\t\tdateString: `${lastFiveStart.toFormat(\r\n\t\t\t\t'LLL dd'\r\n\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\tmin: lastFiveStart,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: lastFiveStart.startOf('day'),\r\n\t\t\t\t\t\tmax: mostRecentDay.endOf('day'),\r\n\t\t\t\t\t\tselected: `${lastFiveStart.toFormat(\r\n\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Last 14 days',\r\n\t\t\tdateString: `${lastFourteenStart.toFormat(\r\n\t\t\t\t'LLL dd'\r\n\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\tmin: lastFourteenStart,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: lastFourteenStart.startOf('day'),\r\n\t\t\t\t\t\tmax: mostRecentDay.endOf('day'),\r\n\t\t\t\t\t\tselected: `${lastFourteenStart.toFormat(\r\n\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Last 30 days',\r\n\t\t\tdateString: `${last30Start.toFormat('LLL dd')} - ${mostRecentDay.toFormat(\r\n\t\t\t\t'LLL dd'\r\n\t\t\t)}`,\r\n\t\t\tmin: last30Start,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: last30Start.startOf('day'),\r\n\t\t\t\t\t\tmax: mostRecentDay.endOf('day'),\r\n\t\t\t\t\t\tselected: `${last30Start.toFormat(\r\n\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'All time',\r\n\t\t\tdateString: `${lastDay.toFormat(\r\n\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\tmin: lastDay,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetDateLimit({\r\n\t\t\t\t\t\tmin: lastDay.startOf('day'),\r\n\t\t\t\t\t\tmax: mostRecentDay.endOf('day'),\r\n\t\t\t\t\t\tselected: `${lastDay.toFormat(\r\n\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t)} - ${mostRecentDay.toFormat('LLL dd')}`,\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\r\n\tconst validateDateRange = (dateCreated: string, minDate: string) => {\r\n\t\tif (\r\n\t\t\tDateTime.fromISO(dateCreated).startOf('day') <=\r\n\t\t\tDateTime.fromISO(minDate).startOf('day')\r\n\t\t) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSetDate = (\r\n\t\tdateCreated: string,\r\n\t\tminDate: string,\r\n\t\tcb: () => void\r\n\t) => {\r\n\t\tlet validDate = validateDateRange(dateCreated, minDate);\r\n\t\tif (validDate) {\r\n\t\t\tcb();\r\n\t\t\tdispatch(setPage({ page: 1, type }));\r\n\t\t\treturn setDate(false);\r\n\t\t} else {\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Invalid date range',\r\n\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t'This date range is older than your Leadgeek account. Please select a valid date range.',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<article\r\n\t\t\tref={wrapperRef}\r\n\t\t\tclassName='absolute top-0 right-0 z-10 w-64 pt-4 pb-2 cs-light-400 card-200 text-300 transform translate-y-12 -translate-x-56'\r\n\t\t>\r\n\t\t\t<div className='relative'>\r\n\t\t\t\t<header className='pb-2 px-4 center-between border-b border-200'>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h5 className='inline-block font-bold text-lg'>Date picker</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t{dateOptions.map((dateOption, i) => (\r\n\t\t\t\t\t\t<li key={i} className='list-none'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\thandleSetDate(\r\n\t\t\t\t\t\t\t\t\t\tdateCreated,\r\n\t\t\t\t\t\t\t\t\t\tdateOption.min,\r\n\t\t\t\t\t\t\t\t\t\tdateOption.onClick\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={`${\r\n\t\t\t\t\t\t\t\t\tvalidateDateRange(dateCreated, dateOption.min)\r\n\t\t\t\t\t\t\t\t\t\t? 'hover:bg-gray-100 dark:hover:bg-darkGray-100'\r\n\t\t\t\t\t\t\t\t\t\t: 'opacity-25 cursor-default'\r\n\t\t\t\t\t\t\t\t} w-full py-2 px-4 center-between transition-colors-main focus:outline-none`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span className='font-semibold text-sm text-200'>\r\n\t\t\t\t\t\t\t\t\t{dateOption.title}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className='text-sm text-100'>\r\n\t\t\t\t\t\t\t\t\t{dateOption.dateString}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t);\r\n};\r\n\r\nexport default DatePicker;\r\n","import React from 'react';\r\n\r\ninterface BadgeProps {\r\n\ttitle: string;\r\n\tdescription?: string;\r\n\talignment: 'top' | 'bottom' | 'left' | 'right';\r\n\tedge: 'left' | 'right' | null;\r\n}\r\n\r\nconst Badge: React.FC<BadgeProps> = ({\r\n\ttitle,\r\n\tdescription,\r\n\talignment,\r\n\tedge,\r\n}) => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`absolute z-40 ${\r\n\t\t\t\tedge === 'left' ? 'left-0' : edge === 'right' ? 'right-0' : 'left-1/2'\r\n\t\t\t} flex items-center p-2 cs-darkGray rounded-main shadow-md text-xs whitespace-nowrap transform ${\r\n\t\t\t\talignment === 'top'\r\n\t\t\t\t\t? ''\r\n\t\t\t\t\t: alignment === 'bottom'\r\n\t\t\t\t\t? ' translate-y-3'\r\n\t\t\t\t\t: ''\r\n\t\t\t} ${edge === null ? '-translate-x-1/2' : ''}`}\r\n\t\t>\r\n\t\t\t<span>{title}</span>\r\n\t\t\t{description && (\r\n\t\t\t\t<span className='ml-2 py-0.5 px-1 bg-gray-100 rounded-md font-semibold text-gray-600 text-xs'>\r\n\t\t\t\t\t{description}\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Badge;\r\n","import React from 'react';\r\n\r\ninterface DescriptionListProps {\r\n\ttitle: string;\r\n\tvalue: JSX.Element;\r\n\tutility?: JSX.Element;\r\n}\r\n\r\nconst DescriptionList: React.FC<DescriptionListProps> = ({\r\n\ttitle,\r\n\tvalue,\r\n\tutility,\r\n}) => {\r\n\treturn (\r\n\t\t<div className='relative flex items-center pb-2 last:pb-0 border-b border-100 last:border-none card-padding-x'>\r\n\t\t\t<dt className='w-2/5 text-100'>{title}</dt>\r\n\t\t\t<div className='flex items-center w-3/5 text-300'>\r\n\t\t\t\t<dd>{value}</dd>\r\n\t\t\t\t{utility && utility}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default DescriptionList;\r\n","import React, { Fragment, useRef, useEffect, useState } from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon';\r\nimport ReactImageMagnify from 'react-image-magnify';\r\nimport { animated, useSpring } from 'react-spring';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@hooks/hooks';\r\nimport {\r\n\taddComment,\r\n\tclearCurrentLead,\r\n\thandleLikeLead,\r\n\thandleArchiveLead,\r\n\tsetCurrentLead,\r\n\tsetPage,\r\n} from '@features/leads/leadsSlice';\r\n\r\n// components\r\nimport Badge from '@components/utils/Badge';\r\nimport Button from '@components/utils/Button';\r\nimport DescriptionList from '@components/utils/DescriptionList';\r\n\r\n// utils\r\nimport {\r\n\tcalculateBSR,\r\n\tnumberWithCommas,\r\n\topenLinkHandler,\r\n\treturnDomainFromUrl,\r\n\ttruncate,\r\n\tuseOutsideMousedown,\r\n} from '@utils/utils';\r\nimport { Lead } from '@utils/interfaces/Lead';\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ninterface DetailsProps {\r\n\tuser: User;\r\n\ttype: 'feed' | 'liked' | 'archived' | 'search';\r\n\tcurrentLead: Lead;\r\n\tshowDetails: boolean;\r\n\tsetShowDetails: React.Dispatch<React.SetStateAction<boolean>>;\r\n\tanimationStyle: any;\r\n}\r\n\r\nconst Details: React.FC<DetailsProps> = ({\r\n\tuser,\r\n\ttype,\r\n\tcurrentLead,\r\n\tshowDetails,\r\n\tsetShowDetails,\r\n\tanimationStyle,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// lead state\r\n\tconst leads = useAppSelector((state) => state.leads[type].pageByIds);\r\n\tconst currentLeadStatus = useAppSelector(\r\n\t\t(state) => state.leads.currentLeadStatus\r\n\t);\r\n\t// filter state\r\n\tconst itemLimit = useAppSelector((state) => state.filters.itemLimit);\r\n\tconst unitFee = useAppSelector((state) => state.filters.prep.unit);\r\n\tconst lbFee = useAppSelector((state) => state.filters.prep.lb);\r\n\tconst page = useAppSelector((state) => state.leads[type].pagination.page);\r\n\tconst lastPage = useAppSelector(\r\n\t\t(state) => state.leads[type].pagination.lastPage\r\n\t);\r\n\r\n\t// local state\r\n\tconst [comment, setComment] = useState('');\r\n\tconst [firstItemFirstPage, setFirstItemFirstPage] = useState(false);\r\n\tconst [fullTitle, toggleFullTitle] = useState(false);\r\n\tconst [identifyingText, setIdentifyingText] = useState('');\r\n\tconst [lastItemLastPage, setLastItemLastPage] = useState(false);\r\n\tconst [noteCount, setNoteCount] = useState(0);\r\n\tconst [showComment, setShowComment] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentLead) {\r\n\t\t\tsetShowDetails(true);\r\n\t\t} else {\r\n\t\t\tsetShowDetails(false);\r\n\t\t}\r\n\t}, [currentLead]);\r\n\r\n\t// destructure necessary items\r\n\tconst { data } = currentLead;\r\n\r\n\t// set date\r\n\tconst date = DateTime.fromISO(data.date).toFormat('LLL dd @ H:mm');\r\n\r\n\t// close comment box on click outside\r\n\tconst commentRef = useRef(null);\r\n\tuseOutsideMousedown(commentRef, setShowComment, null);\r\n\r\n\t// like/archive/comment handlers\r\n\tconst [like, setLike] = useState(\r\n\t\tuser.likedLeads.some((lead) => lead._id === currentLead._id) ? true : false\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tif (user.likedLeads.some((lead) => lead._id === currentLead._id)) {\r\n\t\t\tsetLike(true);\r\n\t\t} else {\r\n\t\t\tsetLike(false);\r\n\t\t}\r\n\t}, [user.likedLeads, currentLead._id]);\r\n\tconst [archive, setArchive] = useState(\r\n\t\tuser.archivedLeads.some((lead) => lead._id === currentLead._id)\r\n\t\t\t? true\r\n\t\t\t: false\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tif (user.archivedLeads.some((lead) => lead._id === currentLead._id)) {\r\n\t\t\tsetArchive(true);\r\n\t\t} else {\r\n\t\t\tsetArchive(false);\r\n\t\t}\r\n\t}, [user.archivedLeads, currentLead._id]);\r\n\tuseEffect(() => {\r\n\t\tconst hasComment = user.comments.filter(\r\n\t\t\t(comment) => comment.leadId === currentLead._id\r\n\t\t);\r\n\t\tif (hasComment.length > 0) {\r\n\t\t\tsetComment(hasComment[0].comment);\r\n\t\t} else {\r\n\t\t\tsetComment('');\r\n\t\t}\r\n\t}, [currentLead]);\r\n\r\n\t// prev/next navigation\r\n\tconst getLead = (val: number) => {\r\n\t\tconst currentIndex = leads.indexOf(currentLead);\r\n\t\tconst nextIndex = currentIndex + val;\r\n\r\n\t\tif (nextIndex === itemLimit || nextIndex === -1) {\r\n\t\t\treturn dispatch(setPage({ page: page + val, type }));\r\n\t\t}\r\n\r\n\t\treturn dispatch(setCurrentLead(leads[nextIndex]));\r\n\t};\r\n\r\n\t// disable previous when the first item of the first page is in view\r\n\tuseEffect(() => {\r\n\t\tif (leads.indexOf(currentLead) === 0 && page === 1) {\r\n\t\t\treturn setFirstItemFirstPage(true);\r\n\t\t} else if (\r\n\t\t\tleads.indexOf(currentLead) === leads.length - 1 &&\r\n\t\t\tpage === lastPage\r\n\t\t) {\r\n\t\t\treturn setLastItemLastPage(true);\r\n\t\t}\r\n\t\tsetFirstItemFirstPage(false);\r\n\t\treturn setLastItemLastPage(false);\r\n\t}, [leads, currentLead, page, lastPage]);\r\n\r\n\t// hotkeys\r\n\t// close details on escape key\r\n\tuseHotkeys(\r\n\t\t'Escape',\r\n\t\t() => {\r\n\t\t\tshowDetails && removeDetails();\r\n\t\t},\r\n\t\t{ keyup: true }\r\n\t);\r\n\t// like on l key\r\n\tuseHotkeys(\r\n\t\t's',\r\n\t\t() => {\r\n\t\t\tdispatch(handleLikeLead({ userId: user._id, leadId: currentLead._id }));\r\n\t\t},\r\n\t\t{ keyup: true },\r\n\t\t[currentLead]\r\n\t);\r\n\t// archive on a key\r\n\tuseHotkeys(\r\n\t\t'a',\r\n\t\t() => {\r\n\t\t\tdispatch(\r\n\t\t\t\thandleArchiveLead({ userId: user._id, leadId: currentLead._id })\r\n\t\t\t);\r\n\t\t},\r\n\t\t{ keyup: true },\r\n\t\t[currentLead]\r\n\t);\r\n\t// open both links on o key\r\n\tuseHotkeys(\r\n\t\t't',\r\n\t\t() => {\r\n\t\t\topenLinkHandler(data.retailerLink, data.amzLink);\r\n\t\t},\r\n\t\t{ keyup: true },\r\n\t\t[currentLead]\r\n\t);\r\n\t// get prev lead on d key\r\n\tuseHotkeys(\r\n\t\t'd',\r\n\t\t() => {\r\n\t\t\tcurrentLeadStatus === 'idle' && !firstItemFirstPage && getLead(-1);\r\n\t\t},\r\n\t\t{ keyup: true },\r\n\t\t[currentLead, currentLeadStatus, firstItemFirstPage]\r\n\t);\r\n\t// get next lead on f key\r\n\tuseHotkeys(\r\n\t\t'f',\r\n\t\t() => {\r\n\t\t\tcurrentLeadStatus === 'idle' && !lastItemLastPage && getLead(1);\r\n\t\t},\r\n\t\t{ keyup: true },\r\n\t\t[currentLead, currentLeadStatus, lastItemLastPage]\r\n\t);\r\n\r\n\tconst animationTimeout = 250;\r\n\r\n\t// close details handler\r\n\tconst removeDetails = () => {\r\n\t\tsetShowDetails(false);\r\n\t\treturn setTimeout(() => {\r\n\t\t\tdispatch(clearCurrentLead());\r\n\t\t}, animationTimeout + 1);\r\n\t};\r\n\r\n\t// header buttons\r\n\t// navigation\r\n\tconst navigationButtons = [\r\n\t\t{\r\n\t\t\tactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tinactivePath: null,\r\n\t\t\tdisabled:\r\n\t\t\t\t(page === 1 && leads.indexOf(currentLead) === 0) ||\r\n\t\t\t\tcurrentLeadStatus === 'loading'\r\n\t\t\t\t\t? true\r\n\t\t\t\t\t: false,\r\n\t\t\tonClick: () => getLead(-1),\r\n\t\t\tstate: false,\r\n\t\t\ttitle: 'Previous lead',\r\n\t\t\tdescription: 'D',\r\n\t\t\tedge: 'left',\r\n\t\t},\r\n\t\t{\r\n\t\t\tactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tinactivePath: null,\r\n\t\t\tdisabled:\r\n\t\t\t\t(page === lastPage &&\r\n\t\t\t\t\tleads.indexOf(currentLead) === leads.length - 1) ||\r\n\t\t\t\tcurrentLeadStatus === 'loading'\r\n\t\t\t\t\t? true\r\n\t\t\t\t\t: false,\r\n\t\t\tonClick: () => getLead(1),\r\n\t\t\tstate: false,\r\n\t\t\ttitle: 'Next lead',\r\n\t\t\tdescription: 'F',\r\n\t\t\tedge: null,\r\n\t\t},\r\n\t];\r\n\r\n\t// utility\r\n\tconst utilityButtons = [\r\n\t\t{\r\n\t\t\tactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tinactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tdisabled: false,\r\n\t\t\tonClick: () =>\r\n\t\t\t\tdispatch(handleLikeLead({ userId: user._id, leadId: currentLead._id })),\r\n\t\t\tstate: like,\r\n\t\t\ttitle: like ? 'Unlike lead' : 'Like lead',\r\n\t\t\tdescription: 'S',\r\n\t\t\tedge: null,\r\n\t\t},\r\n\t\t{\r\n\t\t\tactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\td='M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tinactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\td='M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tdisabled: false,\r\n\t\t\tonClick: () =>\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\thandleArchiveLead({ userId: user._id, leadId: currentLead._id })\r\n\t\t\t\t),\r\n\t\t\tstate: archive,\r\n\t\t\ttitle: archive ? 'Unarchive lead' : 'Archive lead',\r\n\t\t\tdescription: 'A',\r\n\t\t\tedge: null,\r\n\t\t},\r\n\t\t{\r\n\t\t\tactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tdisabled: false,\r\n\t\t\tinactivePath: null,\r\n\t\t\tonClick: () => openLinkHandler(data.retailerLink, data.amzLink),\r\n\t\t\tstate: null,\r\n\t\t\ttitle: 'Open links',\r\n\t\t\tdescription: 'T',\r\n\t\t\tedge: null,\r\n\t\t},\r\n\t\t{\r\n\t\t\tactivePath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tinactivePath: null,\r\n\t\t\tonClick: () => {\r\n\t\t\t\tremoveDetails();\r\n\t\t\t},\r\n\t\t\tdisabled: false,\r\n\t\t\tstate: null,\r\n\t\t\ttitle: 'Close details',\r\n\t\t\tdescription: 'Esc',\r\n\t\t\tedge: 'right',\r\n\t\t},\r\n\t];\r\n\r\n\t// primary metrics on right side of details popup\r\n\tconst primaryMetrics = [\r\n\t\t{\r\n\t\t\ttitle: 'Net profit',\r\n\t\t\tvalue: `$${(\r\n\t\t\t\tdata.netProfit - (unitFee || (lbFee ? lbFee * data.weight : 0))\r\n\t\t\t).toFixed(2)}`,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Return on investment',\r\n\t\t\tvalue: `${(\r\n\t\t\t\t((+data.netProfit.toFixed(2) -\r\n\t\t\t\t\t(unitFee || (lbFee ? lbFee * data.weight : 0))) /\r\n\t\t\t\t\t+data.buyPrice.toFixed(2)) *\r\n\t\t\t\t100\r\n\t\t\t).toFixed(0)}%`,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Estimated sales / mo.',\r\n\t\t\tvalue: `${numberWithCommas(data.monthlySales)}`,\r\n\t\t},\r\n\t];\r\n\r\n\t// source utilities\r\n\tconst sourceUtilities = [\r\n\t\t{\r\n\t\t\ttext: data.cashback,\r\n\t\t\tpath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M5 2a2 2 0 00-2 2v14l3.5-2 3.5 2 3.5-2 3.5 2V4a2 2 0 00-2-2H5zm2.5 3a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm6.207.293a1 1 0 00-1.414 0l-6 6a1 1 0 101.414 1.414l6-6a1 1 0 000-1.414zM12.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tlink: `https://www.rakuten.com/${returnDomainFromUrl(data.retailerLink)}`,\r\n\t\t\thandleClick: null,\r\n\t\t\tdisabled: data.cashback ? false : true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: `Copy promo code: ${data.promo}`,\r\n\t\t\tpath: (\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\td='M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tlink: null,\r\n\t\t\thandleClick: () => {\r\n\t\t\t\tnavigator.clipboard.writeText(data.promo);\r\n\t\t\t},\r\n\t\t\tdisabled: data.promo ? false : true,\r\n\t\t},\r\n\t];\r\n\r\n\t// asin utilities\r\n\tconst ASINUtilities = [\r\n\t\t{\r\n\t\t\ttext: 'Copy text',\r\n\t\t\tpath: (\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path d='M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z' />\r\n\t\t\t\t\t<path d='M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z' />\r\n\t\t\t\t</g>\r\n\t\t\t),\r\n\t\t\tlink: null,\r\n\t\t\thandleClick: () => {\r\n\t\t\t\tnavigator.clipboard.writeText(data.asin);\r\n\t\t\t},\r\n\t\t\tdisabled: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: 'Open Seller Central',\r\n\t\t\tpath: (\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path d='M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z' />\r\n\t\t\t\t\t<path d='M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z' />\r\n\t\t\t\t</g>\r\n\t\t\t),\r\n\t\t\tlink: `https://sellercentral.amazon.com/product-search/search?q=${data.asin}`,\r\n\t\t\thandleClick: null,\r\n\t\t\tdisabled: false,\r\n\t\t},\r\n\t];\r\n\r\n\t// detailed information items\r\n\tconst detailedInformation = [\r\n\t\t{\r\n\t\t\ttitle: 'Source',\r\n\t\t\tvalue: (\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={data.retailerLink}\r\n\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\tclassName='link'\r\n\t\t\t\t>\r\n\t\t\t\t\t{data.source || '-'}\r\n\t\t\t\t</a>\r\n\t\t\t),\r\n\t\t\tutility: (\r\n\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t{sourceUtilities.map((utility, i) => (\r\n\t\t\t\t\t\t<UtilityButton\r\n\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\ttext={utility.text}\r\n\t\t\t\t\t\t\tpath={utility.path}\r\n\t\t\t\t\t\t\tlink={utility.link}\r\n\t\t\t\t\t\t\thandleClick={utility.handleClick}\r\n\t\t\t\t\t\t\tdisabled={utility.disabled}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: identifyingText,\r\n\t\t\tvalue: (\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={`https://amazon.com/gp/product/${data.asin}`}\r\n\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\tclassName='link'\r\n\t\t\t\t>\r\n\t\t\t\t\t{data.asin}\r\n\t\t\t\t</a>\r\n\t\t\t),\r\n\t\t\tutility: (\r\n\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t{ASINUtilities.map((utility, i) => (\r\n\t\t\t\t\t\t<UtilityButton\r\n\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\ttext={utility.text}\r\n\t\t\t\t\t\t\tpath={utility.path}\r\n\t\t\t\t\t\t\tlink={utility.link}\r\n\t\t\t\t\t\t\thandleClick={utility.handleClick}\r\n\t\t\t\t\t\t\tdisabled={utility.disabled}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Buy price',\r\n\t\t\tvalue: <div>{`$${data.buyPrice.toFixed(2) || '-'}`}</div>,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Sell price',\r\n\t\t\tvalue: <div>{`$${data.sellPrice.toFixed(2) || '-'}`}</div>,\r\n\t\t\tutility: (\r\n\t\t\t\t<Trends\r\n\t\t\t\t\tcurrentValue={data.sellPrice}\r\n\t\t\t\t\tcompareData={[\r\n\t\t\t\t\t\t{ value: data.price30, scale: '30' },\r\n\t\t\t\t\t\t{ value: data.price90, scale: '90' },\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tlowerIsBetter={false}\r\n\t\t\t\t\ttype={'recommended'}\r\n\t\t\t\t\tvalue={'sell price'}\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Current BSR',\r\n\t\t\tvalue: <div>{numberWithCommas(data.bsrCurrent) || '-'}</div>,\r\n\t\t\tutility: (\r\n\t\t\t\t<Trends\r\n\t\t\t\t\tcurrentValue={data.bsrCurrent}\r\n\t\t\t\t\tcompareData={[\r\n\t\t\t\t\t\t{ value: data.bsr30, scale: '30' },\r\n\t\t\t\t\t\t{ value: data.bsr90, scale: '90' },\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tlowerIsBetter={true}\r\n\t\t\t\t\ttype={'current'}\r\n\t\t\t\t\tvalue={'BSR'}\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'BSR %',\r\n\t\t\tvalue: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{data.bsrCurrent && data.category && (\r\n\t\t\t\t\t\t<span>{calculateBSR(data.bsrCurrent, data.category)}%</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Competition',\r\n\t\t\tvalue: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{data.competitorCount > 0 && (\r\n\t\t\t\t\t\t<span className='text-100'>{`(${data.competitorCount})`}</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<span className={data.competitorCount > 0 ? 'ml-1' : ''}>\r\n\t\t\t\t\t\t{data.competitorType || '-'}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Weight',\r\n\t\t\tvalue: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{data.weight ? (\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{data.weight.toFixed(2)}\r\n\t\t\t\t\t\t\t<span className='ml-1 text-100'>lb</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<span>-</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\t// notes items\r\n\tconst notesInformation = [\r\n\t\t{\r\n\t\t\ttitle: 'Shipping notes',\r\n\t\t\tvalue: <div>{data.shipping ? data.shipping : 'None'}</div>,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Seller notes',\r\n\t\t\tvalue: <div>{data.notes ? data.notes : 'None'}</div>,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Variation notes',\r\n\t\t\tvalue: <div>{data.variations ? data.variations : 'None'}</div>,\r\n\t\t},\r\n\t];\r\n\r\n\t// set notes & handlers\r\n\tconst notes: (string | null)[] = [data.variations, data.notes, data.shipping];\r\n\tconst checkNotes = () => {\r\n\t\tsetNoteCount(notes.filter((note) => note !== '').length);\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tif (currentLead) {\r\n\t\t\tcheckNotes();\r\n\t\t}\r\n\t}, [currentLead]);\r\n\r\n\t// set ASIN/ISBN identifying text\r\n\tuseEffect(() => {\r\n\t\tif (data.asin.startsWith('B', 0)) {\r\n\t\t\tsetIdentifyingText('ASIN');\r\n\t\t} else {\r\n\t\t\tsetIdentifyingText('ISBN');\r\n\t\t}\r\n\t}, [data.asin]);\r\n\r\n\t// change handler for comments\r\n\tconst onChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n\t\tsetComment(e.target.value);\r\n\t};\r\n\r\n\tconst commentAnimationStyle = useSpring({\r\n\t\theight: showComment ? '8rem' : '4rem',\r\n\t});\r\n\r\n\tconst buttonAnimationStyle = useSpring({\r\n\t\topacity: showComment ? 1 : 0,\r\n\t});\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<animated.section\r\n\t\t\t\tstyle={animationStyle}\r\n\t\t\t\tclassName='fixed top-0 bottom-0 right-0 z-20 w-full max-w-3xl'\r\n\t\t\t>\r\n\t\t\t\t<div className='relative cs-bg border-l border-300 shadow-2xl'>\r\n\t\t\t\t\t<header className='pr-2 cs-light-400 border-b border-300 shadow-sm'>\r\n\t\t\t\t\t\t<div className='center-between py-3 px-6 text-100'>\r\n\t\t\t\t\t\t\t{/* navigation buttons */}\r\n\t\t\t\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t\t\t\t{navigationButtons.map((button, i) => (\r\n\t\t\t\t\t\t\t\t\t<HeaderButton\r\n\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\tactivePath={button.activePath}\r\n\t\t\t\t\t\t\t\t\t\tinactivePath={button.inactivePath}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={button.disabled}\r\n\t\t\t\t\t\t\t\t\t\tonClick={button.onClick}\r\n\t\t\t\t\t\t\t\t\t\tstate={button.state}\r\n\t\t\t\t\t\t\t\t\t\ttitle={button.title}\r\n\t\t\t\t\t\t\t\t\t\tdescription={button.description}\r\n\t\t\t\t\t\t\t\t\t\tedge={button.edge}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/* utility buttons */}\r\n\t\t\t\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t\t\t\t{utilityButtons.map((button, i) => (\r\n\t\t\t\t\t\t\t\t\t<HeaderButton\r\n\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\tactivePath={button.activePath}\r\n\t\t\t\t\t\t\t\t\t\tinactivePath={button.inactivePath}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={button.disabled}\r\n\t\t\t\t\t\t\t\t\t\tonClick={button.onClick}\r\n\t\t\t\t\t\t\t\t\t\tstate={button.state}\r\n\t\t\t\t\t\t\t\t\t\ttitle={button.title}\r\n\t\t\t\t\t\t\t\t\t\tdescription={button.description}\r\n\t\t\t\t\t\t\t\t\t\tedge={button.edge}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<div className='h-screen overflow-x-hidden overflow-y-scroll minimal-scrollbar'>\r\n\t\t\t\t\t\t<section className='mb-48 pl-6 pr-8'>\r\n\t\t\t\t\t\t\t<article className='flex justify-between mt-4 py-4 card-padding-x cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t<div className='w-2/5 h-56 z-10'>\r\n\t\t\t\t\t\t\t\t\t<ReactImageMagnify\r\n\t\t\t\t\t\t\t\t\t\t{...{\r\n\t\t\t\t\t\t\t\t\t\t\tsmallImage: {\r\n\t\t\t\t\t\t\t\t\t\t\t\talt: data.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\tisFluidWidth: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc: data.img,\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: 225,\r\n\t\t\t\t\t\t\t\t\t\t\t\theight: 225,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tlargeImage: {\r\n\t\t\t\t\t\t\t\t\t\t\t\talt: data.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc: data.img,\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: 600,\r\n\t\t\t\t\t\t\t\t\t\t\t\theight: 600,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tenlargedImageContainerDimensions: {\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '200%',\r\n\t\t\t\t\t\t\t\t\t\t\t\theight: '200%',\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'bg-white bg-contain',\r\n\t\t\t\t\t\t\t\t\t\t\tenlargedImageContainerClassName: 'bg-white card-400',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<header className='relative w-3/5 ml-8'>\r\n\t\t\t\t\t\t\t\t\t<h3\r\n\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => toggleFullTitle(true)}\r\n\t\t\t\t\t\t\t\t\t\tonMouseLeave={() => toggleFullTitle(false)}\r\n\t\t\t\t\t\t\t\t\t\tclassName='inline-block font-bold text-lg text-gray-900 dark:text-white'\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{truncate(data.title, 35)}\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t{fullTitle && (\r\n\t\t\t\t\t\t\t\t\t\t<div className='absolute top-0 mt-2 mr-6 p-2 rounded-md shadow-md cs-darkGray text-xs transform translate-y-6'>\r\n\t\t\t\t\t\t\t\t\t\t\t{data.title}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<aside className='flex items-center mt-2 text-sm text-200'>\r\n\t\t\t\t\t\t\t\t\t\t<div>{date}</div>\r\n\t\t\t\t\t\t\t\t\t\t<span className='h-1 w-1 ml-2 rounded-full bg-gray-400 dark:bg-gray-700' />\r\n\t\t\t\t\t\t\t\t\t\t<div className='ml-2'>{data.category}</div>\r\n\t\t\t\t\t\t\t\t\t</aside>\r\n\t\t\t\t\t\t\t\t\t<article className='mt-6'>\r\n\t\t\t\t\t\t\t\t\t\t<header className='mt-4 pb-2 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t<h4 className='font-semibold text-300'>\r\n\t\t\t\t\t\t\t\t\t\t\t\tPrimary metrics\r\n\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t{primaryMetrics.map((metric, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<PrimaryMetric\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={metric.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={metric.value}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t<article className='mt-4 py-4 cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t<header className='card-padding-x pb-4 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t<h4 className='font-semibold text-gray-900 dark:text-white'>\r\n\t\t\t\t\t\t\t\t\t\tDetailed information\r\n\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t<dl className='grid grid-cols-1 grid-rows-4 gap-y-2 gap-x-6 mt-4 text-sm text-gray-800'>\r\n\t\t\t\t\t\t\t\t\t{detailedInformation.map((item, i) => (\r\n\t\t\t\t\t\t\t\t\t\t<DescriptionList\r\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={item.value}\r\n\t\t\t\t\t\t\t\t\t\t\tutility={item.utility && item.utility}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</dl>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t<article className='my-4 py-4 cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t<header className='flex items-center pb-4 card-padding-x border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t<h4 className='font-semibold text-300'>Notes</h4>{' '}\r\n\t\t\t\t\t\t\t\t\t<span className='ml-2 py-1 px-2 bg-gray-100 dark:bg-gray-900 text-300 rounded-main text-xs font-semibold'>\r\n\t\t\t\t\t\t\t\t\t\t{noteCount}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t<dl className='grid grid-cols-1 grid-rows-3 gap-y-2 gap-x-6 mt-4 text-sm text-200'>\r\n\t\t\t\t\t\t\t\t\t{notesInformation.map((note, i) => (\r\n\t\t\t\t\t\t\t\t\t\t<DescriptionList\r\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={note.title}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={note.value}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</dl>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t{/* comment section */}\r\n\t\t\t\t\t\t<article className='fixed bottom-0 w-full max-w-3xl text-300 cs-light-400 border-t border-300'>\r\n\t\t\t\t\t\t\t<div className='pt-1 pb-4 pl-4 pr-12'>\r\n\t\t\t\t\t\t\t\t<form ref={commentRef} className='relative mt-3 text-sm'>\r\n\t\t\t\t\t\t\t\t\t<animated.textarea\r\n\t\t\t\t\t\t\t\t\t\tname='comment'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Add a comment to this lead...'\r\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t!showComment && setShowComment((prev) => !prev)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvalue={comment}\r\n\t\t\t\t\t\t\t\t\t\tclassName='w-full input rounded-main border border-300 text-sm placeholder-gray-700 ring-purple resize-none'\r\n\t\t\t\t\t\t\t\t\t\tstyle={commentAnimationStyle}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{showComment && (\r\n\t\t\t\t\t\t\t\t\t\t<animated.div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='absolute bottom-0 right-0 transform -translate-y-4 -translate-x-4'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={buttonAnimationStyle}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext={comment ? 'Save comment' : 'Add comment'}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomment &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taddComment({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomment,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId: user._id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tleadId: currentLead._id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowComment(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</animated.div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</article>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</animated.section>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\ninterface HeaderButtonProps {\r\n\tactivePath: JSX.Element;\r\n\tinactivePath: JSX.Element | null;\r\n\tdisabled: boolean;\r\n\tonClick: () => void;\r\n\tstate: boolean | null;\r\n\ttitle: string;\r\n\tdescription: string;\r\n\tedge: any;\r\n}\r\n\r\nconst HeaderButton: React.FC<HeaderButtonProps> = ({\r\n\tactivePath,\r\n\tinactivePath,\r\n\tdisabled,\r\n\tonClick,\r\n\tstate,\r\n\ttitle,\r\n\tdescription,\r\n\tedge,\r\n}) => {\r\n\t// local state\r\n\tconst [hover, setHover] = useState(false);\r\n\r\n\treturn (\r\n\t\t<button\r\n\t\t\tonMouseEnter={() => setHover(true)}\r\n\t\t\tonMouseLeave={() => setHover(false)}\r\n\t\t\tonClick={() => !disabled && onClick()}\r\n\t\t\tdisabled={disabled ? true : false}\r\n\t\t\tclassName={`relative ml-2 first:ml-0 p-1 hover:bg-gray-100 dark:hover:bg-darkGray-100 rounded-main ${\r\n\t\t\t\tstate && 'text-purple-500'\r\n\t\t\t} ${\r\n\t\t\t\tdisabled\r\n\t\t\t\t\t? 'pointer-events-none bg-gray-200 dark:bg-gray-900 opacity-50'\r\n\t\t\t\t\t: ''\r\n\t\t\t} text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 ring-gray transition-main`}\r\n\t\t>\r\n\t\t\t{state || !inactivePath ? (\r\n\t\t\t\t<div className='flex items-center justify-center'>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\tstroke={state ? 'currentColor' : ''}\r\n\t\t\t\t\t\tclassName='svg-base'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{activePath}\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className='flex items-center justify-center'>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tfill='none'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tstroke='currentColor'\r\n\t\t\t\t\t\tclassName='svg-base'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{inactivePath}\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t{hover && (\r\n\t\t\t\t<Badge\r\n\t\t\t\t\ttitle={title}\r\n\t\t\t\t\tdescription={description}\r\n\t\t\t\t\talignment={'bottom'}\r\n\t\t\t\t\tedge={edge}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\ninterface PrimaryMetricProps {\r\n\ttitle: string;\r\n\tvalue: string;\r\n}\r\n\r\nconst PrimaryMetric: React.FC<PrimaryMetricProps> = ({ title, value }) => {\r\n\treturn (\r\n\t\t<div className='first:mt-0 mt-2 flex items-end justify-between'>\r\n\t\t\t<dt className='text-sm text-100'>{title}</dt>\r\n\t\t\t<dd className='py-1 px-2 cs-darkGray rounded-main font-semibold text-xs transition-main'>\r\n\t\t\t\t{value}\r\n\t\t\t</dd>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ninterface UtilityButtonProps {\r\n\ttext: string;\r\n\tpath: JSX.Element;\r\n\tlink: any;\r\n\thandleClick: null | (() => void);\r\n\tdisabled: boolean;\r\n}\r\n\r\nconst UtilityButton: React.FC<UtilityButtonProps> = ({\r\n\ttext,\r\n\tpath,\r\n\tlink,\r\n\thandleClick,\r\n\tdisabled,\r\n}) => {\r\n\t// local state\r\n\tconst [popupText, setPopupText] = useState(false);\r\n\r\n\tif (disabled) return null;\r\n\r\n\treturn (\r\n\t\t<div className='relative ml-0.5'>\r\n\t\t\t{link ? (\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={link}\r\n\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\tonMouseEnter={() => setPopupText(true)}\r\n\t\t\t\t\tonMouseLeave={() => setPopupText(false)}\r\n\t\t\t\t\tclassName='inline-block ml-2 button-gray-100 rounded-sm transition-main ring-gray'\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{path}\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</a>\r\n\t\t\t) : (\r\n\t\t\t\t<button\r\n\t\t\t\t\tonMouseEnter={() => setPopupText(true)}\r\n\t\t\t\t\tonMouseLeave={() => setPopupText(false)}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\thandleClick && handleClick();\r\n\t\t\t\t\t\tsetPopupText(false);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='ml-2 button-gray-100 rounded-sm transition-main ring-gray'\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{path}\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t\t{popupText && <Badge title={text} alignment={'bottom'} edge={null} />}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ninterface TrendProps {\r\n\tcurrentValue: number;\r\n\tcompareValue: number | undefined;\r\n\tscale: string;\r\n\tlowerIsBetter: boolean;\r\n\ttype: string;\r\n\tvalue: string;\r\n}\r\n\r\nconst Trend: React.FC<TrendProps> = ({\r\n\tcurrentValue,\r\n\tcompareValue,\r\n\tscale,\r\n\tlowerIsBetter,\r\n\ttype,\r\n\tvalue,\r\n}) => {\r\n\t// local state\r\n\tconst [showPopup, setShowPopup] = useState(false);\r\n\tconst [isGood, setIsGood] = useState(false);\r\n\tconst [trend, setTrend] = useState<'up' | 'down' | 'same' | null>(null);\r\n\r\n\tconst currentValueGreater =\r\n\t\tcompareValue && currentValue > compareValue ? true : false;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentValue === compareValue) {\r\n\t\t\tsetTrend('same');\r\n\t\t} else if (currentValueGreater) {\r\n\t\t\tsetTrend('up');\r\n\t\t\tif (lowerIsBetter) {\r\n\t\t\t\tsetIsGood(false);\r\n\t\t\t} else {\r\n\t\t\t\tsetIsGood(true);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetTrend('down');\r\n\t\t\tif (lowerIsBetter) {\r\n\t\t\t\tsetIsGood(true);\r\n\t\t\t} else {\r\n\t\t\t\tsetIsGood(false);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tconst svgList = {\r\n\t\tup: (\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t),\r\n\t\tdown: (\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t),\r\n\t\tsame: (\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t),\r\n\t};\r\n\r\n\tif (!compareValue) return null;\r\n\r\n\tconst percentDifference = (\r\n\t\t100 * +Math.abs(1 - currentValue / compareValue)\r\n\t).toFixed(0);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tonMouseEnter={() => setShowPopup(true)}\r\n\t\t\tonMouseLeave={() => setShowPopup(false)}\r\n\t\t\tclassName={`relative flex items-center ml-2 py-0.5 pl-2 pr-1 ${\r\n\t\t\t\tisGood ? 'cs-teal' : 'bg-gray-100 dark:bg-gray-900 text-200'\r\n\t\t\t} text-xs font-semibold rounded-main`}\r\n\t\t>\r\n\t\t\t<span>{scale} day</span>\r\n\t\t\t<svg\r\n\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\tclassName='h-4 w-4 ml-0.5'\r\n\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\tfill='currentColor'\r\n\t\t\t>\r\n\t\t\t\t{trend !== null && svgList[trend]}\r\n\t\t\t</svg>\r\n\t\t\t<span className='ml-1'>{percentDifference}%</span>\r\n\t\t\t{showPopup && (\r\n\t\t\t\t<div className='absolute z-40 left-1/2 flex items-center p-2 shadow-md cs-darkGray rounded-main text-xs whitespace-nowrap transform -translate-y-8 -translate-x-1/2'>\r\n\t\t\t\t\t{`The ${type} ${value} is ${percentDifference}% ${\r\n\t\t\t\t\t\tcurrentValueGreater ? 'higher' : 'lower'\r\n\t\t\t\t\t} than the ${scale} day average`}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ninterface TrendsProps {\r\n\tcurrentValue: number;\r\n\tcompareData: { value: number | undefined; scale: string }[];\r\n\tlowerIsBetter: boolean;\r\n\ttype: string;\r\n\tvalue: string;\r\n}\r\n\r\nconst Trends: React.FC<TrendsProps> = ({\r\n\tcurrentValue,\r\n\tcompareData,\r\n\tlowerIsBetter,\r\n\ttype,\r\n\tvalue,\r\n}) => {\r\n\treturn (\r\n\t\t<div className='ml-2 flex items-center'>\r\n\t\t\t{compareData.map((c, i) => (\r\n\t\t\t\t<Trend\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tcurrentValue={currentValue}\r\n\t\t\t\t\tcompareValue={c.value}\r\n\t\t\t\t\tscale={c.scale}\r\n\t\t\t\t\tlowerIsBetter={lowerIsBetter}\r\n\t\t\t\t\ttype={type}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t/>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Details;\r\n","import React from 'react';\r\n\r\nimport { DateTime } from 'luxon';\r\nimport { CSVLink } from 'react-csv';\r\n\r\nimport { User } from '@utils/interfaces/User';\r\nimport { Lead } from '@utils/interfaces/Lead';\r\n\r\ninterface ExportButtonProps {\r\n\tuser: User;\r\n\tleads: Lead[];\r\n\tsetExportLeads: any;\r\n}\r\n\r\nconst ExportButton: React.FC<ExportButtonProps> = ({\r\n\tuser,\r\n\tleads,\r\n\tsetExportLeads,\r\n}) => {\r\n\t// set current local time\r\n\tconst currentLocalDate = DateTime.now().setLocale('el').toLocaleString();\r\n\r\n\t// csv headers\r\n\tconst headers = [\r\n\t\t{ label: 'Source', key: 'data.source' },\r\n\t\t{ label: 'Title', key: 'data.title' },\r\n\t\t{ label: 'Brand', key: 'data.brand' },\r\n\t\t{ label: 'Category', key: 'data.category' },\r\n\t\t{ label: 'Retailer Source', key: 'data.retailerLink' },\r\n\t\t{ label: 'Amazon Link', key: 'data.amzLink' },\r\n\t\t{ label: 'Promo Code', key: 'data.promo' },\r\n\t\t{ label: 'Buy Price', key: 'data.buyPrice' },\r\n\t\t{ label: 'Sell Price', key: 'data.sellPrice' },\r\n\t\t{ label: 'Profit', key: 'data.netProfit' },\r\n\t\t{ label: 'ROI', key: 'data.roi' },\r\n\t\t{ label: 'Current BSR', key: 'data.bsrCurrent' },\r\n\t\t{ label: 'Avg Mo. Sales', key: 'data.monthlySales' },\r\n\t\t{ label: '30 Day BSR', key: 'data.bsr30' },\r\n\t\t{ label: '90 Day BSR', key: 'data.bsr90' },\r\n\t\t{ label: 'Seller competition', key: 'data.competitorType' },\r\n\t\t{ label: 'Seller count', key: 'data.competitorCount' },\r\n\t\t{ label: '30 Day Price', key: 'data.price30' },\r\n\t\t{ label: '90 Day Price', key: 'data.price90' },\r\n\t\t{ label: 'Variation Suggestions', key: 'data.variations' },\r\n\t\t{ label: 'Cashback Discounts', key: 'data.cashback' },\r\n\t\t{ label: 'Item Weight (lb)', key: 'data.weight' },\r\n\t\t{ label: 'ASIN', key: 'data.asin' },\r\n\t\t{ label: 'Shipping Notes', key: 'data.shipping' },\r\n\t\t{ label: 'Seller Notes', key: 'data.notes' },\r\n\t\t{ label: 'Date', key: 'data.date' },\r\n\t];\r\n\treturn (\r\n\t\t<CSVLink\r\n\t\t\tdata={leads}\r\n\t\t\theaders={headers}\r\n\t\t\tonClick={() => setExportLeads(false)}\r\n\t\t\tfilename={`${user.role || 'leadgeek'}_plan_leads_${currentLocalDate}.csv`}\r\n\t\t\ttarget='_blank'\r\n\t\t\tclassName='ml-4 py-2 px-3 flex items-center rounded-main cs-purple shadow-sm hover:shadow-md text-sm font-semibold transition-main ring-purple'\r\n\t\t>\r\n\t\t\t<span>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tfill='none'\r\n\t\t\t\t\tviewBox='0 0 24 24'\r\n\t\t\t\t\tstroke='currentColor'\r\n\t\t\t\t\tclassName='h-4 w-4'\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\td='M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t</span>\r\n\t\t\t<span className='ml-2'>Confirm</span>\r\n\t\t</CSVLink>\r\n\t);\r\n};\r\n\r\nexport default ExportButton;\r\n","import React, { useRef } from 'react';\r\n\r\n// utils\r\nimport { useOutsideMousedown } from '@utils/utils';\r\n\r\ntype GenericObject = { [key: string]: any };\r\n\r\ninterface Option {\r\n\ttype?: string;\r\n\ttitle: string;\r\n\tvalue?: string;\r\n}\r\n\r\ninterface SelectComponentProps {\r\n\ttitle: string;\r\n\toptions: Option[];\r\n\tselectedOption: string | number;\r\n\topenState: boolean;\r\n\tsetOpenState: React.Dispatch<React.SetStateAction<boolean>>;\r\n\thandleClick(obj: GenericObject | string): void;\r\n}\r\n\r\nconst SelectComponent: React.FC<SelectComponentProps> = ({\r\n\ttitle,\r\n\toptions,\r\n\tselectedOption,\r\n\topenState,\r\n\tsetOpenState,\r\n\thandleClick,\r\n}) => {\r\n\t// close select handlers\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMousedown(wrapperRef, setOpenState, null);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={wrapperRef}\r\n\t\t\tclassName='relative flex items-center shadow-sm rounded-main text-sm'\r\n\t\t>\r\n\t\t\t<div className='w-16 flex-none p-2 cs-bg-light rounded-l-lg text-sm font-semibold text-center text-100 border border-200'>\r\n\t\t\t\t{title}\r\n\t\t\t</div>\r\n\t\t\t<button\r\n\t\t\t\ttype='button'\r\n\t\t\t\tclassName='overflow-x-hidden relative w-full pl-2 pr-10 py-2 cs-light-500 border-t border-b border-r border-200 rounded-r-lg text-left cursor-default ring-purple ring-inset'\r\n\t\t\t\taria-haspopup='listbox'\r\n\t\t\t\taria-expanded='true'\r\n\t\t\t\taria-labelledby='listbox-label'\r\n\t\t\t\tonClick={() => (openState ? setOpenState(false) : setOpenState(true))}\r\n\t\t\t>\r\n\t\t\t\t<span className='flex items-center'>\r\n\t\t\t\t\t<span className='ml-2 block truncate'>{selectedOption}</span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className='ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none border-l border-200 pl-2'>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\tclassName='h-4 w-4 text-gray-400'\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\taria-hidden='true'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\td='M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z'\r\n\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t\t{openState && (\r\n\t\t\t\t<ul\r\n\t\t\t\t\tclassName='absolute top-0 right-0 z-10 max-h-56 w-full mt-1 py-1 cs-light-300 card-200 text-sm overflow-auto focus:outline-none transform translate-y-10 minimal-scrollbar'\r\n\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\trole='listbox'\r\n\t\t\t\t\taria-labelledby='listbox-label'\r\n\t\t\t\t\taria-activedescendant='listbox-option-3'\r\n\t\t\t\t>\r\n\t\t\t\t\t{options.map((option, i) => (\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\tclassName={`py-2 pl-3 pr-9 cursor-default select-none relative ${\r\n\t\t\t\t\t\t\t\tselectedOption === option.title\r\n\t\t\t\t\t\t\t\t\t? 'cs-purple'\r\n\t\t\t\t\t\t\t\t\t: 'hover:bg-gray-100 dark:hover:bg-darkGray-100 text-300'\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\tid={`listbox-option-${i}`}\r\n\t\t\t\t\t\t\trole='option'\r\n\t\t\t\t\t\t\taria-selected='true'\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\thandleClick(option);\r\n\t\t\t\t\t\t\t\tsetOpenState(false);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{option.title}\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ul>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SelectComponent;\r\n","import React, { useState, useRef } from 'react';\r\n\r\n// packages\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\n\r\n// redux\r\nimport { useAppSelector, useAppDispatch } from '@hooks/hooks';\r\nimport { removeAlert, setAlert } from '@features/alert/alertSlice';\r\nimport {\r\n\tclearFilter,\r\n\tclearFilters,\r\n\tcreateFilter,\r\n} from '@features/filters/filtersSlice';\r\nimport { getFeedLeads } from '@features/leads/leadsSlice';\r\n\r\n// components\r\nimport Button from '@components/utils/Button';\r\nimport SelectComponent from '@components/utils/Select';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport { numberWithCommas, useOutsideMousedown } from '@utils/utils';\r\nimport {\r\n\tFilter,\r\n\tFilterOperators,\r\n\tFilterTitles,\r\n\tFilterTypes,\r\n} from '@utils/interfaces/Filter';\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ntype NumericOrTextStrings = 'numeric' | 'text';\r\n\r\ninterface FilterComponentProps {\r\n\tfilterActive: boolean;\r\n\tsetFilterActive: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst FilterComponent: React.FC<FilterComponentProps> = ({\r\n\tfilterActive,\r\n\tsetFilterActive,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// alert state\r\n\tconst alert = useAppSelector((state) => state.alert);\r\n\t// auth state\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\t// local state\r\n\tconst [addFilter, setAddFilter] = useState(false);\r\n\tconst [categoryActive, setCategoryActive] = useState(false);\r\n\tconst [sourceActive, setSourceActive] = useState(false);\r\n\tconst [filter, setFilter] = useState<{\r\n\t\ttypeIs: {\r\n\t\t\ttype: 'numeric' | 'text';\r\n\t\t\ttitle: FilterTitles;\r\n\t\t\tvalue: FilterTypes;\r\n\t\t};\r\n\t\tvalueIs: {\r\n\t\t\ttype: string;\r\n\t\t\ttitle: string;\r\n\t\t\tvalue: FilterOperators;\r\n\t\t};\r\n\t\tvalue: string | number;\r\n\t}>({\r\n\t\ttypeIs: {\r\n\t\t\ttype: typeOptions[0].type,\r\n\t\t\ttitle: typeOptions[0].title,\r\n\t\t\tvalue: typeOptions[0].value,\r\n\t\t},\r\n\t\tvalueIs: {\r\n\t\t\ttype: '',\r\n\t\t\ttitle:\r\n\t\t\t\ttypeOptions[0].type === 'numeric'\r\n\t\t\t\t\t? numericValueOptions[0].title\r\n\t\t\t\t\t: textValueOptions[0].title,\r\n\t\t\tvalue:\r\n\t\t\t\ttypeOptions[0].type === 'numeric'\r\n\t\t\t\t\t? numericValueOptions[0].value\r\n\t\t\t\t\t: textValueOptions[0].value,\r\n\t\t},\r\n\t\tvalue: '',\r\n\t});\r\n\tconst [filterDescription, setFilterDescription] = useState(false);\r\n\tconst [typeActive, setTypeActive] = useState(false);\r\n\tconst [valueActive, setValueActive] = useState(false);\r\n\r\n\t// close modal handlers\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMousedown(wrapperRef, setFilterActive, null);\r\n\r\n\t// hotkeys\r\n\t// close details on escape key\r\n\tuseHotkeys(\r\n\t\t'Escape',\r\n\t\t() => {\r\n\t\t\tfilterActive && setFilterActive(false);\r\n\t\t},\r\n\t\t{ keyup: true }\r\n\t);\r\n\r\n\tconst handleClearFilters = () => {\r\n\t\tlet keysToRemove = [\r\n\t\t\t'netProfitMin',\r\n\t\t\t'netProfitMax',\r\n\t\t\t'buyPriceMin',\r\n\t\t\t'buyPriceMax',\r\n\t\t\t'sellPriceMin',\r\n\t\t\t'sellPriceMax',\r\n\t\t\t'roiMin',\r\n\t\t\t'roiMax',\r\n\t\t\t'bsrMin',\r\n\t\t\t'bsrMax',\r\n\t\t\t'monthlySalesMin',\r\n\t\t\t'monthlySalesMax',\r\n\t\t\t'weightMin',\r\n\t\t\t'weightMax',\r\n\t\t\t'filterCount',\r\n\t\t];\r\n\t\tkeysToRemove.forEach((key) => localStorage.removeItem(key));\r\n\t\tdispatch(clearFilters());\r\n\t\tsetFilterActive(false);\r\n\t\tuser &&\r\n\t\t\tdispatch(\r\n\t\t\t\tgetFeedLeads({\r\n\t\t\t\t\tuser: {\r\n\t\t\t\t\t\tid: user._id,\r\n\t\t\t\t\t\trole: user.role,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tfilters: {\r\n\t\t\t\t\t\t...filters,\r\n\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\tfilters: [],\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\treturn dispatch(\r\n\t\t\tsetAlert({\r\n\t\t\t\ttitle: 'All filters were removed',\r\n\t\t\t\tmessage: 'Unfiltered leads are now showing.',\r\n\t\t\t\talertType: 'success',\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleFilterSubmit = (user: User) => {\r\n\t\t// make sure an empty string isn't being passed as a value\r\n\t\tif (!filter.value) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Error creating filter',\r\n\t\t\t\t\tmessage: 'Please enter a valid number',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// fn returns the current min or max value of a specified filter if it exists\r\n\t\tconst getFilterValue = (type: string, operator: 'gte' | 'lte') => {\r\n\t\t\tconst maxFilter = filters.filters.filter(\r\n\t\t\t\t(filter: Filter) => filter.type === type && filter.operator === operator\r\n\t\t\t)[0];\r\n\r\n\t\t\tif (maxFilter) {\r\n\t\t\t\treturn maxFilter.value;\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// validation for all numeric filters\r\n\t\tif (filter.typeIs.type === 'numeric') {\r\n\t\t\t// check for creating a new max/lte filter\r\n\t\t\tif (filter.valueIs.value === 'lte') {\r\n\t\t\t\t// get the current minimum filter if one exists\r\n\t\t\t\tconst minFilter = getFilterValue(filter.typeIs.value, 'gte');\r\n\t\t\t\t// make sure the min filter isn't larger than the max filter trying to be applied\r\n\t\t\t\tif (minFilter && minFilter >= filter.value) {\r\n\t\t\t\t\treturn dispatch(\r\n\t\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\t\ttitle: 'Error creating filter',\r\n\t\t\t\t\t\t\tmessage: 'The max value must be larger than the min value',\r\n\t\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// check for creating a new min/gte filter\r\n\t\t\t\t// get the current maximum filter if one exists\r\n\t\t\t\tconst maxFilter = getFilterValue(filter.typeIs.value, 'lte');\r\n\t\t\t\t// make sure the max filter isn't smaller than the current min filter trying to be applied\r\n\t\t\t\tif (maxFilter && maxFilter <= filter.value) {\r\n\t\t\t\t\treturn dispatch(\r\n\t\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\t\ttitle: 'Error creating filter',\r\n\t\t\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\t\t\"The minimum filter can't be larger than the current maximum filter\",\r\n\t\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// check if there's an alert\r\n\t\tif (alert) {\r\n\t\t\t// clear all alerts if we've made it past the checks\r\n\t\t\tdispatch(removeAlert());\r\n\t\t}\r\n\r\n\t\t// create the filter\r\n\t\tdispatch(\r\n\t\t\tcreateFilter(\r\n\t\t\t\tfilter.typeIs.type,\r\n\t\t\t\tfilter.typeIs.value,\r\n\t\t\t\tfilter.typeIs.title,\r\n\t\t\t\tfilter.valueIs.value,\r\n\t\t\t\tfilter.value\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t\t// reset local filter state\r\n\t\tsetFilter({\r\n\t\t\t...filter,\r\n\t\t\ttypeIs: {\r\n\t\t\t\ttype: typeOptions[0].type,\r\n\t\t\t\ttitle: typeOptions[0].title,\r\n\t\t\t\tvalue: typeOptions[0].value,\r\n\t\t\t},\r\n\t\t\tvalueIs: {\r\n\t\t\t\ttype: '',\r\n\t\t\t\ttitle:\r\n\t\t\t\t\ttypeOptions[0].type === 'numeric'\r\n\t\t\t\t\t\t? numericValueOptions[0].title\r\n\t\t\t\t\t\t: textValueOptions[0].title,\r\n\t\t\t\tvalue:\r\n\t\t\t\t\ttypeOptions[0].type === 'numeric'\r\n\t\t\t\t\t\t? numericValueOptions[0].value\r\n\t\t\t\t\t\t: textValueOptions[0].value,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\t// get the newly filtered leads\r\n\t\treturn getFeedLeads({\r\n\t\t\tuser: {\r\n\t\t\t\tid: user._id,\r\n\t\t\t\trole: user.role,\r\n\t\t\t},\r\n\t\t\tpage: 1,\r\n\t\t\tfilters,\r\n\t\t});\r\n\t};\r\n\r\n\t// console.log(filter.typeIs, filter.valueIs, filter.value);\r\n\r\n\treturn user ? (\r\n\t\t<article\r\n\t\t\tref={wrapperRef}\r\n\t\t\tclassName='absolute top-0 right-0 z-30 w-80 pt-4 pb-1 cs-light-400 card-200 text-300 transform translate-y-12 -translate-x-32'\r\n\t\t>\r\n\t\t\t<div className='relative'>\r\n\t\t\t\t<header className='pb-2 px-4 center-between border-b border-200'>\r\n\t\t\t\t\t<div className='flex items-center'>\r\n\t\t\t\t\t\t<h5 className='inline-block font-bold text-lg'>Filters</h5>\r\n\t\t\t\t\t\t{filters.count > 0 && (\r\n\t\t\t\t\t\t\t<div className='ml-4 py-1 px-2 cs-teal rounded-main text-xs font-semibold'>\r\n\t\t\t\t\t\t\t\t<span>{filters.count}</span>\r\n\t\t\t\t\t\t\t\t<span className='ml-1'>active</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tsetAddFilter(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMouseEnter={() => setFilterDescription(true)}\r\n\t\t\t\t\t\tonMouseLeave={() => setFilterDescription(false)}\r\n\t\t\t\t\t\tclassName='relative icon-button'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\tclassName='h-4 w-4'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\td='M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z'\r\n\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t{filterDescription && (\r\n\t\t\t\t\t\t\t<div className='absolute top-0 right-0 z-10 min-w-max p-2 transform -translate-y-1.5 -translate-x-8 rounded-md shadow-md bg-gray-900 text-left text-white text-xs'>\r\n\t\t\t\t\t\t\t\tAdd filter\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</header>\r\n\t\t\t\t{filters.filters.length > 0 || addFilter ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{addFilter && (\r\n\t\t\t\t\t\t\t<div className='pt-6 pb-2 px-4'>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<SelectComponent\r\n\t\t\t\t\t\t\t\t\t\ttitle={'Type'}\r\n\t\t\t\t\t\t\t\t\t\toptions={typeOptions}\r\n\t\t\t\t\t\t\t\t\t\tselectedOption={filter.typeIs.title}\r\n\t\t\t\t\t\t\t\t\t\topenState={typeActive}\r\n\t\t\t\t\t\t\t\t\t\tsetOpenState={setTypeActive}\r\n\t\t\t\t\t\t\t\t\t\thandleClick={(option: {\r\n\t\t\t\t\t\t\t\t\t\t\ttype: string;\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: string;\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: string;\r\n\t\t\t\t\t\t\t\t\t\t}) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetFilter({\r\n\t\t\t\t\t\t\t\t\t\t\t\t...filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttypeIs: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: option.type as NumericOrTextStrings,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: option.title as FilterTitles,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: option.value as FilterTypes,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalueIs: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: option.type,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toption.type === 'numeric'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? numericValueOptions[0].title\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: textValueOptions[0].title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toption.type === 'numeric'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? numericValueOptions[0].value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: textValueOptions[0].value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toption.value === 'category'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'Appliances'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: option.value === 'source'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? '511 Tactical'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: typeof filter.value === 'number'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? filter.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='mt-2'>\r\n\t\t\t\t\t\t\t\t\t<SelectComponent\r\n\t\t\t\t\t\t\t\t\t\ttitle={'Value'}\r\n\t\t\t\t\t\t\t\t\t\toptions={\r\n\t\t\t\t\t\t\t\t\t\t\tfilter.typeIs.type === 'numeric'\r\n\t\t\t\t\t\t\t\t\t\t\t\t? numericValueOptions\r\n\t\t\t\t\t\t\t\t\t\t\t\t: textValueOptions\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tselectedOption={filter.valueIs.title}\r\n\t\t\t\t\t\t\t\t\t\topenState={valueActive}\r\n\t\t\t\t\t\t\t\t\t\tsetOpenState={setValueActive}\r\n\t\t\t\t\t\t\t\t\t\thandleClick={(option: {\r\n\t\t\t\t\t\t\t\t\t\t\ttype: string;\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: string;\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: string;\r\n\t\t\t\t\t\t\t\t\t\t}) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetFilter({\r\n\t\t\t\t\t\t\t\t\t\t\t\t...filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalueIs: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: option.type,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: option.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: option.value as FilterOperators,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{filter.typeIs.value === 'category' ? (\r\n\t\t\t\t\t\t\t\t\t<div className='mt-2'>\r\n\t\t\t\t\t\t\t\t\t\t<SelectComponent\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={'Item'}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={categoryOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tselectedOption={filter.value}\r\n\t\t\t\t\t\t\t\t\t\t\topenState={categoryActive}\r\n\t\t\t\t\t\t\t\t\t\t\tsetOpenState={setCategoryActive}\r\n\t\t\t\t\t\t\t\t\t\t\thandleClick={(option: { title: string }) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetFilter({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t...filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: option.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : filter.typeIs.value === 'source' ? (\r\n\t\t\t\t\t\t\t\t\t<div className='mt-2'>\r\n\t\t\t\t\t\t\t\t\t\t<SelectComponent\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={'Item'}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={sourceOptions}\r\n\t\t\t\t\t\t\t\t\t\t\tselectedOption={filter.value}\r\n\t\t\t\t\t\t\t\t\t\t\topenState={sourceActive}\r\n\t\t\t\t\t\t\t\t\t\t\tsetOpenState={setSourceActive}\r\n\t\t\t\t\t\t\t\t\t\t\thandleClick={(option: { title: string }) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetFilter({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t...filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: option.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mt-2 form-field input'\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetFilter({\r\n\t\t\t\t\t\t\t\t\t\t\t\t...filter,\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: +e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter an amount...'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<div className='flex items-center justify-end'>\r\n\t\t\t\t\t\t\t\t\t<div className='mt-2'>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Cancel'}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetAddFilter(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\twidth={'w-20'}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\t\tsize={'xs'}\r\n\t\t\t\t\t\t\t\t\t\t\tcta={false}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className='mt-2 ml-4'>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Apply'}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\thandleFilterSubmit(user);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\twidth={'w-20'}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\t\tsize={'xs'}\r\n\t\t\t\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{filters.filters.length > 0 && (\r\n\t\t\t\t\t\t\t<div className='font-semibold text-sm text-gray-700'>\r\n\t\t\t\t\t\t\t\t<ul className='py-2 px-4'>\r\n\t\t\t\t\t\t\t\t\t{filters.filters.map((filter: Filter, i: number) => (\r\n\t\t\t\t\t\t\t\t\t\t<ActiveFilter key={i} filter={filter} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div className='border-t border-200'>\r\n\t\t\t\t\t\t\t<div className='flex justify-end py-2 px-4'>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\thandleClearFilters();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='py-1 px-2 font-semibold text-sm hover:bg-red-100 dark:hover:bg-red-400 text-red-500 dark:text-red-300 hover:text-red-600 dark:hover:text-white rounded-main transition-main ring-red'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tClear all\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className='py-6 px-4 font-semibold text-sm text-gray-700 dark:text-gray-400'>\r\n\t\t\t\t\t\tYou haven't added any filters. Click the \"+\" in the top right corner\r\n\t\t\t\t\t\tto get started.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t) : (\r\n\t\t<Spinner\r\n\t\t\tdivWidth={null}\r\n\t\t\tcenter={false}\r\n\t\t\tspinnerWidth={null}\r\n\t\t\tmargin={false}\r\n\t\t\ttext={''}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\ninterface ActiveFilterProps {\r\n\tfilter: Filter;\r\n}\r\n\r\nconst ActiveFilter: React.FC<ActiveFilterProps> = ({ filter }) => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// local state\r\n\tconst [filterDescription, setFilterDescription] = useState(false);\r\n\r\n\t// return appropriate indicator before the value\r\n\tconst valuePreproccesor = (type: FilterTypes) => {\r\n\t\tif (type === 'netProfit' || type === 'buyPrice' || type === 'sellPrice') {\r\n\t\t\treturn '$';\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t};\r\n\r\n\t// return appropriate value\r\n\tconst valueProcessor = (type: FilterTypes, value: string | number) => {\r\n\t\tif (type === 'roi') {\r\n\t\t\treturn numberWithCommas(100 * +value);\r\n\t\t} else if (type === 'bsrCurrent') {\r\n\t\t\treturn numberWithCommas(+value);\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t};\r\n\r\n\t// return appropriate indicator after the value\r\n\tconst valuePostproccesor = (type: FilterTypes) => {\r\n\t\tif (type === 'roi') {\r\n\t\t\treturn '%';\r\n\t\t} else if (type === 'weight') {\r\n\t\t\treturn ' lb';\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<li className='first:mt-0 mt-2 w-full py-2 pl-4 pr-3 center-between cs-bg-light border border-200 shadow-sm rounded-main text-200 transition-colors-main focus:outline-none'>\r\n\t\t\t<div className='flex items-center truncate mr-2'>\r\n\t\t\t\t<span className='flex-none'>{filter.title}</span>\r\n\t\t\t\t<span className='ml-1'>\r\n\t\t\t\t\t{filter.operator === 'gte'\r\n\t\t\t\t\t\t? '>'\r\n\t\t\t\t\t\t: filter.operator === 'lte'\r\n\t\t\t\t\t\t? '<'\r\n\t\t\t\t\t\t: filter.operator === 'eq'\r\n\t\t\t\t\t\t? '='\r\n\t\t\t\t\t\t: 'is'}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className='ml-1 overflow-ellipsis'>\r\n\t\t\t\t\t{`${valuePreproccesor(filter.type)}${valueProcessor(\r\n\t\t\t\t\t\tfilter.type,\r\n\t\t\t\t\t\tfilter.value\r\n\t\t\t\t\t)}${valuePostproccesor(filter.type)}`}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<button\r\n\t\t\t\tonClick={() => dispatch(clearFilter({ id: filter.id }))}\r\n\t\t\t\tonMouseEnter={() => setFilterDescription(true)}\r\n\t\t\t\tonMouseLeave={() => setFilterDescription(false)}\r\n\t\t\t\tclassName='relative icon-button'\r\n\t\t\t>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\tclassName='svg-sm'\r\n\t\t\t\t>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\td='M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z'\r\n\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</svg>\r\n\t\t\t\t{filterDescription && (\r\n\t\t\t\t\t<div className='absolute top-0 right-0 z-10 min-w-max p-2 rounded-md shadow-md bg-gray-900 text-left text-white text-xs transform -translate-y-1 -translate-x-8'>\r\n\t\t\t\t\t\tClear filter\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</button>\r\n\t\t</li>\r\n\t);\r\n};\r\n\r\ninterface TypeOption {\r\n\ttype: 'numeric' | 'text';\r\n\ttitle: FilterTitles;\r\n\tvalue: FilterTypes;\r\n}\r\n\r\nconst typeOptions: TypeOption[] = [\r\n\t{ type: 'numeric', title: 'Profit', value: 'netProfit' },\r\n\t{ type: 'numeric', title: 'Buy price', value: 'buyPrice' },\r\n\t{ type: 'numeric', title: 'Sell price', value: 'sellPrice' },\r\n\t{ type: 'numeric', title: 'Return on investment', value: 'roi' },\r\n\t{ type: 'numeric', title: \"Best seller's rank\", value: 'bsrCurrent' },\r\n\t{ type: 'numeric', title: 'Monthly sales', value: 'monthlySales' },\r\n\t{ type: 'numeric', title: 'Weight', value: 'weight' },\r\n\t{ type: 'text', title: 'Category', value: 'category' },\r\n\t{ type: 'text', title: 'Source', value: 'source' },\r\n];\r\n\r\ninterface NumericOption {\r\n\ttype: 'numeric';\r\n\ttitle: string;\r\n\tvalue: 'gte' | 'lte';\r\n}\r\n\r\nconst numericValueOptions: NumericOption[] = [\r\n\t{\r\n\t\ttype: 'numeric',\r\n\t\ttitle: 'Greater than',\r\n\t\tvalue: 'gte',\r\n\t},\r\n\t{\r\n\t\ttype: 'numeric',\r\n\t\ttitle: 'Less than',\r\n\t\tvalue: 'lte',\r\n\t},\r\n];\r\n\r\ninterface TextOption {\r\n\ttype: 'text';\r\n\ttitle: string;\r\n\tvalue: 'eq';\r\n}\r\n\r\nconst textValueOptions: TextOption[] = [\r\n\t{\r\n\t\ttype: 'text',\r\n\t\ttitle: 'Equals',\r\n\t\tvalue: 'eq',\r\n\t},\r\n];\r\n\r\nconst categoryOptions = [\r\n\t{ title: 'Appliances' },\r\n\t{ title: 'Arts, Crafts, & Sewing' },\r\n\t{ title: 'Automotive Parts & Accessories' },\r\n\t{ title: 'Baby' },\r\n\t{ title: 'Beauty & Personal Care' },\r\n\t{ title: 'Books' },\r\n\t{ title: 'CDs & Vinyl' },\r\n\t{ title: 'Cell Phones & Accessories' },\r\n\t{ title: 'Clothing, Shoes & Jewelry' },\r\n\t{ title: 'Computers' },\r\n\t{ title: 'Electronics' },\r\n\t{ title: 'Garden & Outdoor' },\r\n\t{ title: 'Grocery & Gourmet Food' },\r\n\t{ title: 'Handmade' },\r\n\t{ title: 'Health, Household & Baby Care' },\r\n\t{ title: 'Home & Kitchen' },\r\n\t{ title: 'Industrial & Scientific' },\r\n\t{ title: 'Luggage & Travel Gear' },\r\n\t{ title: 'Movies & TV' },\r\n\t{ title: 'Musical Instruments' },\r\n\t{ title: 'Office Products' },\r\n\t{ title: 'Pet Supplies' },\r\n\t{ title: 'Sports & Outdoors' },\r\n\t{ title: 'Tools & Home Improvement' },\r\n\t{ title: 'Toys & Games' },\r\n\t{ title: 'Video Games' },\r\n];\r\n\r\nconst sourceOptions = [\r\n\t{ title: '511 Tactical' },\r\n\t{ title: '6 PM' },\r\n\t{ title: 'Academy' },\r\n\t{ title: 'Ace Hardware' },\r\n\t{ title: 'American Eagle' },\r\n\t{ title: 'Albee Baby' },\r\n\t{ title: 'Amazon' },\r\n\t{ title: 'American Apparel' },\r\n\t{ title: 'Art Supply Warehouse' },\r\n\t{ title: 'Backcountry' },\r\n\t{ title: 'Barnes and Noble' },\r\n\t{ title: 'Bath and Body Works' },\r\n\t{ title: 'BB Toy Store' },\r\n\t{ title: \"Beall's Florida\" },\r\n\t{ title: 'Beauty Brands' },\r\n\t{ title: 'Bed, Bath, and Beyond' },\r\n\t{ title: 'Belk' },\r\n\t{ title: 'Belkin' },\r\n\t{ title: \"Bergner's\" },\r\n\t{ title: 'Best Buy' },\r\n\t{ title: 'Big 5 Sporting Goods' },\r\n\t{ title: 'Big Bad Toy Store' },\r\n\t{ title: 'Big Lots' },\r\n\t{ title: 'Bits and Pieces' },\r\n\t{ title: \"BJ's\" },\r\n\t{ title: \"Bloomingdale's\" },\r\n\t{ title: 'Body Building' },\r\n\t{ title: 'Books-a-Million' },\r\n\t{ title: \"Boscov's\" },\r\n\t{ title: 'Buy Buy Baby' },\r\n\t{ title: 'Century 21' },\r\n\t{ title: 'Camping World' },\r\n\t{ title: \"Carter's\" },\r\n\t{ title: 'Chewy' },\r\n\t{ title: 'Christian Book' },\r\n\t{ title: \"Claire's\" },\r\n\t{ title: 'Columbia' },\r\n\t{ title: 'Costco' },\r\n\t{ title: 'Crayola' },\r\n\t{ title: 'DC Shoes' },\r\n\t{ title: 'Dickies' },\r\n\t{ title: \"Dick's Sporting Goods\" },\r\n\t{ title: \"Dillard's\" },\r\n\t{ title: 'Dollar General' },\r\n\t{ title: 'Dollar Tree' },\r\n\t{ title: 'Drug Supply Store' },\r\n\t{ title: 'DSW' },\r\n\t{ title: 'Easton' },\r\n\t{ title: 'Element Outfitters' },\r\n\t{ title: 'Eastern Mountain Sports' },\r\n\t{ title: 'Entirely Pets' },\r\n\t{ title: 'Everything Kitchens' },\r\n\t{ title: 'eVitamins' },\r\n\t{ title: 'Fat Brain Toys' },\r\n\t{ title: 'Fleet Farm' },\r\n\t{ title: 'FootSmart' },\r\n\t{ title: 'Forbidden Planet' },\r\n\t{ title: 'Fun' },\r\n\t{ title: 'FYE' },\r\n\t{ title: 'Game Nerdz' },\r\n\t{ title: 'Gamestop' },\r\n\t{ title: 'GNC' },\r\n\t{ title: 'Guitar Center' },\r\n\t{ title: 'Hasbro Pulse' },\r\n\t{ title: 'Healthy Pets' },\r\n\t{ title: \"Herberger's\" },\r\n\t{ title: 'Hobby Lobby' },\r\n\t{ title: 'Home Depot' },\r\n\t{ title: 'Hot Topic' },\r\n\t{ title: 'iHerb' },\r\n\t{ title: 'JCPenney' },\r\n\t{ title: \"Journey's\" },\r\n\t{ title: 'KatVonD Beauty' },\r\n\t{ title: 'Keurig' },\r\n\t{ title: 'Kmart' },\r\n\t{ title: \"Kohl's\" },\r\n\t{ title: 'Lakeside' },\r\n\t{ title: 'LEGO' },\r\n\t{ title: 'Logitech' },\r\n\t{ title: \"Lowe's\" },\r\n\t{ title: 'LTD Commodities' },\r\n\t{ title: 'Lucky Brand' },\r\n\t{ title: \"Macy's\" },\r\n\t{ title: 'Marvel' },\r\n\t{ title: 'Mattel' },\r\n\t{ title: 'Mernards' },\r\n\t{ title: 'Merrell' },\r\n\t{ title: 'Michaels' },\r\n\t{ title: 'Michaels Kids' },\r\n\t{ title: 'Micro Center' },\r\n\t{ title: 'Miniature Market' },\r\n\t{ title: 'Moosejaw' },\r\n\t{ title: 'NBC Store' },\r\n\t{ title: 'Netrition' },\r\n\t{ title: 'Newegg' },\r\n\t{ title: 'Nike' },\r\n\t{ title: 'Nordstrom Rack' },\r\n\t{ title: 'Office Depot' },\r\n\t{ title: 'Office Supply' },\r\n\t{ title: 'Oriental Trading' },\r\n\t{ title: 'OshKosh' },\r\n\t{ title: 'Overstock' },\r\n\t{ title: 'Pampered Chef' },\r\n\t{ title: 'Party City' },\r\n\t{ title: 'PishPosh Baby' },\r\n\t{ title: 'Puma' },\r\n\t{ title: 'Quiksilver' },\r\n\t{ title: 'RadioShack' },\r\n\t{ title: 'REI' },\r\n\t{ title: 'Restaurant Supply' },\r\n\t{ title: \"Rogan's Shoes\" },\r\n\t{ title: 'Sally Beauty' },\r\n\t{ title: \"Sam's Club\" },\r\n\t{ title: 'Saucony' },\r\n\t{ title: 'Sears' },\r\n\t{ title: 'Sears Outlet' },\r\n\t{ title: 'Sephora' },\r\n\t{ title: 'Shoe Carnival' },\r\n\t{ title: 'Shop Bop' },\r\n\t{ title: 'Shop Disney' },\r\n\t{ title: 'Sierra' },\r\n\t{ title: \"Spencer's\" },\r\n\t{ title: 'Sperry' },\r\n\t{ title: 'Staples' },\r\n\t{ title: 'Steep and Cheap' },\r\n\t{ title: 'Sun & Ski' },\r\n\t{ title: 'Sur La Table' },\r\n\t{ title: 'Target' },\r\n\t{ title: 'Tin Toy Arcade' },\r\n\t{ title: 'Too Faced' },\r\n\t{ title: 'Tower Hobbies' },\r\n\t{ title: 'Toy Tokyo' },\r\n\t{ title: 'Toy Wiz' },\r\n\t{ title: 'True Value' },\r\n\t{ title: \"Uncle Dan's\" },\r\n\t{ title: 'Ulta' },\r\n\t{ title: 'US Toy' },\r\n\t{ title: 'Vitacost' },\r\n\t{ title: 'Vitamin Shoppe' },\r\n\t{ title: 'Vitamin World' },\r\n\t{ title: 'Walgreens' },\r\n\t{ title: 'Walmart' },\r\n\t{ title: 'Williams-Sonoma' },\r\n\t{ title: 'World Market' },\r\n\t{ title: 'Zappos' },\r\n\t{ title: 'Zumiez' },\r\n];\r\n\r\nexport default FilterComponent;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon';\r\nimport { animated, useSpring } from 'react-spring';\r\n\r\n// redux\r\nimport {\r\n\tuseAppDispatch,\r\n\tuseAppSelector,\r\n\tuseContextMenu,\r\n\tuseDarkMode,\r\n} from '@hooks/hooks';\r\nimport {\r\n\thandleArchiveLead,\r\n\thandleLikeLead,\r\n\tsetCurrentLead,\r\n} from '@features/leads/leadsSlice';\r\n\r\n// utils\r\nimport {\r\n\tcalculateBSR,\r\n\tnumberWithCommas,\r\n\topenLinkHandler,\r\n\ttruncate,\r\n\tuseOutsideMousedown,\r\n} from '@utils/utils';\r\nimport { Lead } from '@utils/interfaces/Lead';\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ninterface LeadRowProps {\r\n\tlead: Lead;\r\n\tuser: User;\r\n\tliked: Lead[];\r\n\tarchived: Lead[];\r\n\tsetShowDetails: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst LeadRow: React.FC<LeadRowProps> = ({\r\n\tlead,\r\n\tuser,\r\n\tliked,\r\n\tarchived,\r\n\tsetShowDetails,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// lead state\r\n\tconst currentLead = useAppSelector((state) => state.leads.currentLead);\r\n\r\n\t// local state\r\n\tconst [expandedView, setExpandedView] = useState(false);\r\n\tconst [eyeDesc, setEyeDesc] = useState(false);\r\n\tconst [linkDesc, setLinkDesc] = useState(false);\r\n\tconst [rowHover, setRowHover] = useState(false);\r\n\tconst [quickView, setQuickView] = useState(false);\r\n\tconst [viewCompetition, setViewCompetition] = useState(false);\r\n\tconst [viewImage, setViewImage] = useState(false);\r\n\r\n\t// destructure necessary items\r\n\tconst { data } = lead;\r\n\r\n\t// disable active states on mousedown\r\n\tconst wrapperRef = useRef(null);\r\n\tuseOutsideMousedown(wrapperRef, setQuickView, setExpandedView);\r\n\r\n\t// set like status & handlers\r\n\tconst [like, setLike] = useState(\r\n\t\tliked.some((l) => l._id === lead._id) ? true : false\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tfor (let i = 0; i < user.likedLeads.length; i++) {\r\n\t\t\tif (user.likedLeads[i]._id === lead._id) {\r\n\t\t\t\tsetLike(true);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}, [user, lead._id]);\r\n\tuseEffect(() => {\r\n\t\tif (liked.some((l) => l._id === lead._id)) {\r\n\t\t\tsetLike(true);\r\n\t\t} else {\r\n\t\t\tsetLike(false);\r\n\t\t}\r\n\t}, [liked, lead._id]);\r\n\r\n\t// set archive status & handler\r\n\tconst [archive, setArchive] = useState(\r\n\t\tarchived.some((l) => l._id === lead._id) ? true : false\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tif (archived.some((l) => l._id === lead._id)) {\r\n\t\t\tsetArchive(true);\r\n\t\t} else {\r\n\t\t\tsetArchive(false);\r\n\t\t}\r\n\t}, [archived, lead._id]);\r\n\r\n\t// set date\r\n\tconst datePosted = DateTime.fromISO(data.date).toFormat('LLL dd');\r\n\r\n\t// handle details on view\r\n\tconst viewDetailsHandler = () => {\r\n\t\tif (currentLead) {\r\n\t\t\tsetShowDetails(true);\r\n\t\t\tdispatch(setCurrentLead(lead));\r\n\t\t} else {\r\n\t\t\tsetShowDetails((prev) => !prev);\r\n\t\t\tdispatch(setCurrentLead(lead));\r\n\t\t}\r\n\t\tsetQuickView(false);\r\n\t\tsetExpandedView(false);\r\n\t};\r\n\r\n\t// handle liking leads\r\n\tconst favoriteHandler = (e: any) => {\r\n\t\te.stopPropagation();\r\n\t\tsetLike((prev) => !prev);\r\n\t\tdispatch(handleLikeLead({ userId: user._id, leadId: lead._id }));\r\n\t};\r\n\t// handle archiving leads\r\n\tconst archiveHandler = (e: any) => {\r\n\t\te.stopPropagation();\r\n\t\tsetArchive((prev) => !prev);\r\n\t\tdispatch(handleArchiveLead({ userId: user._id, leadId: lead._id }));\r\n\t};\r\n\r\n\t// animations\r\n\tconst imageAnimationStyle = useSpring({\r\n\t\topacity: viewImage ? 1 : 0,\r\n\t});\r\n\tconst expandedViewAnimationStyle = useSpring({\r\n\t\tx: expandedView ? 1 : 0,\r\n\t});\r\n\tconst quickViewAnimationStyle = useSpring({\r\n\t\topacity: quickView ? 1 : 0,\r\n\t});\r\n\r\n\t// classes for component\r\n\tconst classes = {\r\n\t\tbsrCellWrapper: 'p-4 lg:p-3 xl:p-2 w-24',\r\n\t\tcategoryCellWrapper: 'p-2 w-56 truncate',\r\n\t\tcompetitorCount: 'font-semibold',\r\n\t\tcompetitionRow: 'center-between',\r\n\t\tcompetitorType: 'font-semibold text-purple-300',\r\n\t\tcompetitionWrapper:\r\n\t\t\t'w-36 absolute bottom-0 z-10 p-2 rounded-md shadow-md bg-gray-900 dark:bg-darkGray-100 text-white text-sm transform -translate-y-12 translate-x-8',\r\n\t\tdateCellWrapper: 'p-2 w-24 whitespace-nowrap',\r\n\t\tdefaultCellWrapper: 'p-2',\r\n\t\tdefaultSvg: 'svg-base',\r\n\t\tdetailsCellButton:\r\n\t\t\t'p-1 rounded-md text-gray-500 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 transition-main ring-gray',\r\n\t\tdetailsCellSvg: 'svg-base',\r\n\t\tdetailsCellImage: 'max-h-56 max-w-xs',\r\n\t\tdetailsCellImageWrapper:\r\n\t\t\t'absolute z-10 p-2 bg-white shadow-xl rounded-main border border-300 transform lg:-translate-y-1/2 translate-x-16',\r\n\t\tdetailsCellWrapper: 'hidden xl:table-cell relative w-20 p-2',\r\n\t\texpandedViewMenuBottom: 'py-2',\r\n\t\texpandedViewMenuButton:\r\n\t\t\t'py-2 px-3 w-full text-left font-semibold text-purple-500 dark:text-purple-300 hover:bg-gray-100 dark:hover:bg-darkGray-100 hover:text-gray-800 transition-colors-main ring-gray ring-inset',\r\n\t\texpandedViewMenuButtonSvg: function () {\r\n\t\t\treturn this.expandedViewMenuButton + ' flex items-center';\r\n\t\t},\r\n\t\texpandedViewMenuSvg: 'ml-2 svg-sm',\r\n\t\texpandedViewWrapper:\r\n\t\t\t'absolute right-0 z-20 w-48 mr-3 mt-1 py-2 cs-light-400 card-200',\r\n\t\teyeIconWrapper:\r\n\t\t\t'relative p-2 rounded-l-lg border-r border-200 ring-gray ring-inset',\r\n\t\tlikeCellActive: 'svg-base hover:text-purple-400 transition-colors-main',\r\n\t\tlikeCellButton: 'p-1 rounded-md ring-purple align-middle',\r\n\t\tlikeCellNull: 'p-2 px-4 svg-base',\r\n\t\tlikeCellWrapper: 'pl-6 pr-2 w-9 text-center text-gray-400',\r\n\t\tlinkIconWrapper: 'relative p-2 border-r border-200 ring-gray ring-inset',\r\n\t\tmonthlySalesCellWrapper: 'p-2 w-24',\r\n\t\tprofitCellWrapper: 'w-36 p-2 uppercase',\r\n\t\tquickViewCellWrapper: quickView\r\n\t\t\t? 'py-4 pl-4 pr-12'\r\n\t\t\t: 'py-2 pl-2 pr-10 w-12',\r\n\t\tquickViewExpandedWrapper:\r\n\t\t\t'absolute transform -translate-x-14 rounded-l-lg border-l border-t border-b border-300 cs-light-400 text-100',\r\n\t\tquickViewMenu: quickView\r\n\t\t\t? 'absolute z-10 p-2 cs-light-400 shadow-sm rounded-r-lg border-r border-t border-b border-300 ring-gray ring-inset'\r\n\t\t\t: 'rounded-main ring-gray',\r\n\t\tquickViewMenuHover:\r\n\t\t\t'w-24 mt-2 p-2 absolute top-0 left-1/2 z-20 bg-gray-900 rounded-main shadow-md text-white text-sm transform -translate-y-12 -translate-x-1/2',\r\n\t\tquickViewNull: 'p-2 svg-base',\r\n\t\tquickViewWrapper:\r\n\t\t\t'all-center rounded-r-lg text-100 hover:text-gray-700 dark:hover-text-gray-200',\r\n\t\troiCellWrapper: 'p-2 w-24',\r\n\t\trowWrapper:\r\n\t\t\t'relative px-1 border-b last:border-none border-100 dark:border-darkGray-200 hover:bg-gray-100 dark:hover:bg-darkGray-300 cursor-pointer',\r\n\t\ttitleCellWrapper:\r\n\t\t\t'p-2 pr-12 w-32 md:w-48 lg:w-64 xl:w-112 font-semibold truncate',\r\n\t\ttitleHover:\r\n\t\t\t'absolute z-10 left-0 p-2 transform -translate-y-10 lg:translate-x-12 rounded-md shadow-md bg-gray-900 text-white text-sm',\r\n\t\tvalueIndicator: 'ml-1 text-100',\r\n\t};\r\n\r\n\tconst [colorTheme] = useDarkMode();\r\n\r\n\treturn (\r\n\t\t<tr\r\n\t\t\tclassName={classes.rowWrapper}\r\n\t\t\tonMouseEnter={() => setRowHover(true)}\r\n\t\t\tonMouseLeave={() => setRowHover(false)}\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tviewDetailsHandler();\r\n\t\t\t}}\r\n\t\t\tid='lead-row'\r\n\t\t>\r\n\t\t\t{/* like/unlike */}\r\n\t\t\t<td className={classes.likeCellWrapper}>\r\n\t\t\t\t{rowHover || like ? (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\tfavoriteHandler(e);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName={classes.likeCellButton}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\tfill={`${\r\n\t\t\t\t\t\t\t\tlike ? (colorTheme === 'dark' ? '#7069FA' : '#A2A5FC') : 'none'\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\tviewBox='0 0 24 24'\r\n\t\t\t\t\t\t\tstroke={`${\r\n\t\t\t\t\t\t\t\tlike\r\n\t\t\t\t\t\t\t\t\t? colorTheme === 'dark'\r\n\t\t\t\t\t\t\t\t\t\t? '#7069FA'\r\n\t\t\t\t\t\t\t\t\t\t: '#A2A5FC'\r\n\t\t\t\t\t\t\t\t\t: 'currentColor'\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\tclassName={classes.likeCellActive}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{svgList.heart}\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className={classes.likeCellNull} />\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t\t{/* title */}\r\n\t\t\t<td className={classes.titleCellWrapper}>\r\n\t\t\t\t<div>{truncate(data.title, 60)}</div>\r\n\t\t\t</td>\r\n\t\t\t{/* category */}\r\n\t\t\t<td className={classes.categoryCellWrapper}>\r\n\t\t\t\t{truncate(data.category, 28)}\r\n\t\t\t</td>\r\n\t\t\t{/* details */}\r\n\t\t\t<td className={classes.detailsCellWrapper}>\r\n\t\t\t\t{/* image */}\r\n\t\t\t\t<button\r\n\t\t\t\t\tonMouseEnter={() => setViewImage(true)}\r\n\t\t\t\t\tonMouseLeave={() => setViewImage(false)}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tsetViewImage((prev) => !prev);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName={classes.detailsCellButton}\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName={classes.detailsCellSvg}\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{svgList.image}\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t\t{/* competitors */}\r\n\t\t\t\t<button\r\n\t\t\t\t\tonMouseEnter={() => setViewCompetition(true)}\r\n\t\t\t\t\tonMouseLeave={() => setViewCompetition(false)}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tsetViewCompetition((prev) => !prev);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName={classes.detailsCellButton}\r\n\t\t\t\t>\r\n\t\t\t\t\t<svg\r\n\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\tclassName={classes.detailsCellSvg}\r\n\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{svgList.competition}\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t\t{viewImage && (\r\n\t\t\t\t\t<animated.div\r\n\t\t\t\t\t\tclassName={classes.detailsCellImageWrapper}\r\n\t\t\t\t\t\tstyle={imageAnimationStyle}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={data.img}\r\n\t\t\t\t\t\t\talt={data.title}\r\n\t\t\t\t\t\t\tclassName={classes.detailsCellImage}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</animated.div>\r\n\t\t\t\t)}\r\n\t\t\t\t{viewCompetition && (\r\n\t\t\t\t\t<div className={classes.competitionWrapper}>\r\n\t\t\t\t\t\t<div className={classes.competitionRow}>\r\n\t\t\t\t\t\t\t<span>Buy box</span>\r\n\t\t\t\t\t\t\t<span className={classes.competitorType}>\r\n\t\t\t\t\t\t\t\t{data.competitorType}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{data.competitorCount > 0 && (\r\n\t\t\t\t\t\t\t<div className={classes.competitionRow}>\r\n\t\t\t\t\t\t\t\t<span># Competitors</span>\r\n\t\t\t\t\t\t\t\t<span className={classes.competitorCount}>\r\n\t\t\t\t\t\t\t\t\t{data.competitorCount}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t\t{/* profit */}\r\n\t\t\t<td className={classes.profitCellWrapper}>\r\n\t\t\t\t<span>$</span>\r\n\t\t\t\t{data.netProfit.toFixed(2)}\r\n\t\t\t\t<span className={classes.valueIndicator}>USD</span>\r\n\t\t\t</td>\r\n\t\t\t{/* roi */}\r\n\t\t\t<td className={classes.roiCellWrapper}>\r\n\t\t\t\t{(\r\n\t\t\t\t\t(+data.netProfit?.toFixed(2) / +data.buyPrice?.toFixed(2)) *\r\n\t\t\t\t\t100\r\n\t\t\t\t).toFixed(0)}\r\n\t\t\t\t<span className={classes.valueIndicator}>%</span>\r\n\t\t\t</td>\r\n\t\t\t{/* bsr */}\r\n\t\t\t<td className={classes.bsrCellWrapper}>\r\n\t\t\t\t{numberWithCommas(data.bsrCurrent)}\r\n\t\t\t\t<span className={classes.valueIndicator}>\r\n\t\t\t\t\t({calculateBSR(data.bsrCurrent, data.category)})\r\n\t\t\t\t\t<span className={classes.valueIndicator}>%</span>\r\n\t\t\t\t</span>\r\n\t\t\t</td>\r\n\t\t\t{/* monthly sales */}\r\n\t\t\t<td className={classes.monthlySalesCellWrapper}>\r\n\t\t\t\t{numberWithCommas(data.monthlySales)}\r\n\t\t\t</td>\r\n\t\t\t{/* date */}\r\n\t\t\t<td className={classes.dateCellWrapper}>{datePosted}</td>\r\n\t\t\t{/* quick menu */}\r\n\t\t\t<td className={classes.quickViewCellWrapper}>\r\n\t\t\t\t<div ref={wrapperRef}>\r\n\t\t\t\t\t{rowHover || expandedView ? (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonMouseEnter={() => setQuickView(true)}\r\n\t\t\t\t\t\t\tonMouseLeave={() => !expandedView && setQuickView(false)}\r\n\t\t\t\t\t\t\tclassName={classes.quickViewWrapper}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{/* horiztonal dots */}\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\tsetExpandedView(!expandedView);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={classes.quickViewMenu}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\tclassName={classes.defaultSvg}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{svgList.dots}\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t{quickView && (\r\n\t\t\t\t\t\t\t\t<animated.div\r\n\t\t\t\t\t\t\t\t\tclassName={classes.quickViewExpandedWrapper}\r\n\t\t\t\t\t\t\t\t\tstyle={quickViewAnimationStyle}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<div className='all-center'>\r\n\t\t\t\t\t\t\t\t\t\t{/* eye */}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewDetailsHandler();\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetRowHover(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => setEyeDesc(true)}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={() => setEyeDesc(false)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.eyeIconWrapper}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.defaultSvg}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{svgList.eye}\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t{eyeDesc && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.quickViewMenuHover}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tView details\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t{/* link */}\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLinkHandler(data.retailerLink, data.amzLink);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetExpandedView(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => setLinkDesc(true)}\r\n\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={() => setLinkDesc(false)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.linkIconWrapper}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.defaultSvg}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{svgList.link}\r\n\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t{linkDesc && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.quickViewMenuHover}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tOpen links\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</animated.div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className={classes.quickViewNull} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{expandedView && (\r\n\t\t\t\t\t\t<animated.div\r\n\t\t\t\t\t\t\tclassName={classes.expandedViewWrapper}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\ttransform: expandedViewAnimationStyle.x\r\n\t\t\t\t\t\t\t\t\t.to({\r\n\t\t\t\t\t\t\t\t\t\trange: [0, 0.35, 0.75, 1],\r\n\t\t\t\t\t\t\t\t\t\toutput: [1, 0.98, 1.02, 1],\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.to((x) => `scale(${x})`),\r\n\t\t\t\t\t\t\t\ttranslateY: '1.5rem',\r\n\t\t\t\t\t\t\t\ttranslateX: '-1.25rem',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\tfavoriteHandler(e);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuButton}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{!like ? 'Like lead' : 'Unlike lead'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\tarchiveHandler(e);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuButton}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{!archive ? 'Archive lead' : 'Unarchive lead'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => openLinkHandler(data.retailerLink, data.amzLink)}\r\n\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuButtonSvg()}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span>Open links</span>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuSvg}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{svgList.link}\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\tviewDetailsHandler();\r\n\t\t\t\t\t\t\t\t\tsetRowHover(false);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuButtonSvg()}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span>View details</span>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\tclassName={classes.expandedViewMenuSvg}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{svgList.eye}\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</animated.div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t);\r\n};\r\n\r\n// svg list for cells\r\nconst svgList = {\r\n\theart: (\r\n\t\t<path\r\n\t\t\tstrokeLinecap='round'\r\n\t\t\tstrokeLinejoin='round'\r\n\t\t\tstrokeWidth={2}\r\n\t\t\td='M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z'\r\n\t\t/>\r\n\t),\r\n\timage: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n\tcompetition: (\r\n\t\t<path d='M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z' />\r\n\t),\r\n\tdots: (\r\n\t\t<path d='M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z' />\r\n\t),\r\n\teye: (\r\n\t\t<g>\r\n\t\t\t<path d='M10 12a2 2 0 100-4 2 2 0 000 4z' />\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t</g>\r\n\t),\r\n\tlink: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n};\r\n\r\nexport default LeadRow;\r\n","import React from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Button from '@components/utils/Button';\r\n\r\ninterface NullStateProps {\r\n\theader: string;\r\n\ttext: string;\r\n\tpath: JSX.Element;\r\n\tlink: string;\r\n\tlinkText: string;\r\n}\r\n\r\nconst NullState: React.FC<NullStateProps> = ({\r\n\theader,\r\n\ttext,\r\n\tpath,\r\n\tlink,\r\n\tlinkText,\r\n}) => {\r\n\treturn (\r\n\t\t<div className={nullStateClasses.nullStateWrapper}>\r\n\t\t\t<div className={nullStateClasses.svgWrapper}>\r\n\t\t\t\t<svg\r\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\tclassName={nullStateClasses.svg}\r\n\t\t\t\t>\r\n\t\t\t\t\t{path}\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\t\t\t<h3 className='mt-2 font-bold text-lg text-200'>{header}</h3>\r\n\t\t\t<p className='text-100'>{text}</p>\r\n\t\t\t{link ? (\r\n\t\t\t\t<Link\r\n\t\t\t\t\tto={link}\r\n\t\t\t\t\tclassName='mt-4 inline-block py-2 px-3 rounded-main shadow-sm hover:shadow-md text-sm font-semibold bg-purple-500 hover:bg-purple-600 text-white transition-main ring-purple'\r\n\t\t\t\t>\r\n\t\t\t\t\t{linkText}\r\n\t\t\t\t</Link>\r\n\t\t\t) : (\r\n\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttext={'Reload the page'}\r\n\t\t\t\t\t\tonClick={() => window.location.reload()}\r\n\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\tsize={'sm'}\r\n\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst nullStateClasses = {\r\n\tnullStateWrapper: 'w-96 card-padding card-200 cs-light-400',\r\n\tsvgWrapper: 'h-10 w-10',\r\n\tsvg: 'p-2 bg-gray-900 rounded-lg text-teal-300 shadow-sm',\r\n};\r\n\r\nexport default NullState;\r\n","import React from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon';\r\nimport ContentLoader from 'react-content-loader';\r\n\r\n// redux\r\nimport { useAppSelector } from '@hooks/hooks';\r\n\r\n// components\r\nimport LeadRow from './LeadRow';\r\nimport NullState from '@components/utils/NullState';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport { Lead } from '@utils/interfaces/Lead';\r\nimport { User } from '@utils/interfaces/User';\r\nimport { useDarkMode } from '@hooks/hooks';\r\n\r\ninterface LeadTableProps {\r\n\tleads: Lead[];\r\n\tuser: User;\r\n\tliked: Lead[];\r\n\tarchived: Lead[];\r\n\tstatus: 'idle' | 'loading' | 'failed';\r\n\tshowDetails: boolean;\r\n\tsetShowDetails: React.Dispatch<React.SetStateAction<boolean>>;\r\n\ttype: string;\r\n\tcurrentSearchValue: string | null;\r\n}\r\n\r\nconst LeadTable: React.FC<LeadTableProps> = ({\r\n\tleads,\r\n\tuser,\r\n\tliked,\r\n\tarchived,\r\n\tstatus,\r\n\tshowDetails,\r\n\tsetShowDetails,\r\n\ttype,\r\n\tcurrentSearchValue,\r\n}) => {\r\n\tconst [colorTheme] = useDarkMode();\r\n\r\n\t// filter state\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\r\n\tconst minDate =\r\n\t\tfilters.dateLimits.min &&\r\n\t\tDateTime.fromISO(filters.dateLimits.min).endOf('day');\r\n\r\n\tconst maxDate =\r\n\t\tfilters.dateLimits.max &&\r\n\t\tDateTime.fromISO(filters.dateLimits.max).endOf('day');\r\n\r\n\treturn (\r\n\t\t<section className={classes.sectionWrapper}>\r\n\t\t\t{status === 'failed' ? (\r\n\t\t\t\t<div className='mt-6 container cs-light-300'>\r\n\t\t\t\t\tThere was an error making that request. If this issue persists, please{' '}\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref='mailto:support@leadgeek.io'\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\tclassName='link text-purple-500 hover:text-purple-600 rounded-lg transition-main ring-gray'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tcontact Leadgeek support\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t.\r\n\t\t\t\t</div>\r\n\t\t\t) : status === 'loading' && leads.length === 0 ? (\r\n\t\t\t\t<Spinner\r\n\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\tcenter={false}\r\n\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\tmargin={true}\r\n\t\t\t\t\ttext={'Loading leads...'}\r\n\t\t\t\t/>\r\n\t\t\t) : leads.length > 0 ? (\r\n\t\t\t\t<div className={classes.tableWrapper}>\r\n\t\t\t\t\t<table className={classes.table} id='leads'>\r\n\t\t\t\t\t\t<thead className={classes.tableHeadWrapper}>\r\n\t\t\t\t\t\t\t<tr className={classes.tableHead}>\r\n\t\t\t\t\t\t\t\t<th className='p-2 rounded-tl-lg' />\r\n\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Title</th>\r\n\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Category</th>\r\n\t\t\t\t\t\t\t\t<th className={'p-2 hidden xl:table-cell'}>Details</th>\r\n\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Profit</th>\r\n\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>ROI</th>\r\n\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>BSR</th>\r\n\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Sales</th>\r\n\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Date</th>\r\n\t\t\t\t\t\t\t\t<th className='p-2 rounded-tr-lg' />\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody className={classes.tableBody}>\r\n\t\t\t\t\t\t\t{status === 'loading'\r\n\t\t\t\t\t\t\t\t? [...Array(filters.itemLimit)].map((lead, i) => (\r\n\t\t\t\t\t\t\t\t\t\t<LeadRowLoader key={i} colorTheme={colorTheme} />\r\n\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t: leads.map((lead, i) => (\r\n\t\t\t\t\t\t\t\t\t\t<LeadRow\r\n\t\t\t\t\t\t\t\t\t\t\tkey={lead._id}\r\n\t\t\t\t\t\t\t\t\t\t\tlead={lead}\r\n\t\t\t\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\t\t\t\tliked={liked}\r\n\t\t\t\t\t\t\t\t\t\t\tarchived={archived}\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowDetails={setShowDetails}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t  ))}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t) : type === 'feed' ? (\r\n\t\t\t\t<NullState\r\n\t\t\t\t\theader={`${\r\n\t\t\t\t\t\tfilters.filters.length > 0\r\n\t\t\t\t\t\t\t? 'Your filters are too strict'\r\n\t\t\t\t\t\t\t: 'Your Feed is empty'\r\n\t\t\t\t\t}`}\r\n\t\t\t\t\ttext={`${\r\n\t\t\t\t\t\tfilters.filters.length > 0\r\n\t\t\t\t\t\t\t? 'No leads match your applied filters. Maybe try loosening your criteria.'\r\n\t\t\t\t\t\t\t: 'No leads were found, try refreshing the page.'\r\n\t\t\t\t\t}`}\r\n\t\t\t\t\tpath={svgList.feed}\r\n\t\t\t\t\tlink={''}\r\n\t\t\t\t\tlinkText={''}\r\n\t\t\t\t/>\r\n\t\t\t) : type === 'liked' ? (\r\n\t\t\t\t<NullState\r\n\t\t\t\t\theader={`${\r\n\t\t\t\t\t\tfilters.filters.length > 0\r\n\t\t\t\t\t\t\t? 'Your filters are too strict'\r\n\t\t\t\t\t\t\t: 'No liked leads were found'\r\n\t\t\t\t\t}`}\r\n\t\t\t\t\ttext={`${\r\n\t\t\t\t\t\tfilters.filters.length > 0\r\n\t\t\t\t\t\t\t? 'No leads match your applied filters. Maybe try loosening your criteria.'\r\n\t\t\t\t\t\t\t: \"You haven't liked any leads yet, but you can go to the Feed to check some products out.\"\r\n\t\t\t\t\t}`}\r\n\t\t\t\t\tpath={svgList.liked}\r\n\t\t\t\t\tlink={'/leads'}\r\n\t\t\t\t\tlinkText={'Go to the Feed'}\r\n\t\t\t\t/>\r\n\t\t\t) : type === 'archived' ? (\r\n\t\t\t\t<NullState\r\n\t\t\t\t\theader={`${\r\n\t\t\t\t\t\tfilters.filters.length > 0\r\n\t\t\t\t\t\t\t? 'Your filters are too strict'\r\n\t\t\t\t\t\t\t: 'No archived leads were found'\r\n\t\t\t\t\t}`}\r\n\t\t\t\t\ttext={`${\r\n\t\t\t\t\t\tfilters.filters.length > 0\r\n\t\t\t\t\t\t\t? 'No leads match your applied filters. Maybe try loosening your criteria.'\r\n\t\t\t\t\t\t\t: \"You haven't archived any leads yet, but you can go to the Feed to check some products out.\"\r\n\t\t\t\t\t}`}\r\n\t\t\t\t\tpath={svgList.archived}\r\n\t\t\t\t\tlink={'/leads'}\r\n\t\t\t\t\tlinkText={'Go to the Feed'}\r\n\t\t\t\t/>\r\n\t\t\t) : type === 'search' && !currentSearchValue ? (\r\n\t\t\t\t<NullState\r\n\t\t\t\t\theader={'No search results found'}\r\n\t\t\t\t\ttext={'Please try a different search query'}\r\n\t\t\t\t\tpath={svgList.search}\r\n\t\t\t\t\tlink={'/leads'}\r\n\t\t\t\t\tlinkText={'Go to the Feed'}\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t<NullState\r\n\t\t\t\t\theader={'No results were found'}\r\n\t\t\t\t\ttext={`There were no results that match these criteria${\r\n\t\t\t\t\t\tminDate && maxDate\r\n\t\t\t\t\t\t\t? minDate !== maxDate\r\n\t\t\t\t\t\t\t\t? ` between ${minDate.toFormat('LLL dd')} - ${maxDate.toFormat(\r\n\t\t\t\t\t\t\t\t\t\t'LLL dd'\r\n\t\t\t\t\t\t\t\t  )}`\r\n\t\t\t\t\t\t\t\t: `today`\r\n\t\t\t\t\t\t\t: minDate\r\n\t\t\t\t\t\t\t? ` on ${minDate.toFormat('LLL dd')}`\r\n\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t}`}\r\n\t\t\t\t\tpath={svgList.search}\r\n\t\t\t\t\tlink={''}\r\n\t\t\t\t\tlinkText={''}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\ninterface LeadRowLoaderProps {\r\n\tcolorTheme: any;\r\n}\r\n\r\nconst LeadRowLoader: React.FC<LeadRowLoaderProps> = ({\r\n\tcolorTheme,\r\n\t...props\r\n}) => {\r\n\t// global values\r\n\tconst height = 25;\r\n\tconst bgColor = colorTheme === 'dark' ? '#F0F4F8' : '#1C2936';\r\n\tconst fgColor = colorTheme === 'dark' ? '#E6EBF0' : '#1E2C3C';\r\n\r\n\treturn (\r\n\t\t<tr className='w-full py-16 border-b last:border-none border-100'>\r\n\t\t\t{/* like */}\r\n\t\t\t<td className='w-16 pt-6 pb-5' />\r\n\t\t\t{/* title */}\r\n\t\t\t<td className='w-32 md:w-64 xl:w-112 pl-2'>\r\n\t\t\t\t<ContentLoader\r\n\t\t\t\t\tspeed={2}\r\n\t\t\t\t\theight={35}\r\n\t\t\t\t\twidth={'80%'}\r\n\t\t\t\t\tbackgroundColor={bgColor}\r\n\t\t\t\t\tforegroundColor={fgColor}\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t>\r\n\t\t\t\t\t<rect x='0' y='7.5' rx='8' ry='8' width='100%' height={height} />\r\n\t\t\t\t</ContentLoader>\r\n\t\t\t</td>\r\n\t\t\t{/* category */}\r\n\t\t\t<td className='px-2 lg:w-40 xl:w-56'>\r\n\t\t\t\t<ContentLoader\r\n\t\t\t\t\tspeed={2}\r\n\t\t\t\t\theight={35}\r\n\t\t\t\t\twidth={'100%'}\r\n\t\t\t\t\tbackgroundColor={bgColor}\r\n\t\t\t\t\tforegroundColor={fgColor}\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t>\r\n\t\t\t\t\t<rect x='0' y='7.5' rx='8' ry='8' width='70%' height={height} />\r\n\t\t\t\t</ContentLoader>\r\n\t\t\t</td>\r\n\t\t\t{/* details */}\r\n\t\t\t<td className='hidden xl:table-cell w-20 px-2'>\r\n\t\t\t\t<ContentLoader\r\n\t\t\t\t\tspeed={2}\r\n\t\t\t\t\theight={35}\r\n\t\t\t\t\twidth={'100%'}\r\n\t\t\t\t\tbackgroundColor={bgColor}\r\n\t\t\t\t\tforegroundColor={fgColor}\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t>\r\n\t\t\t\t\t<rect x='4' y='7.5' rx='8' ry='8' width='22' height={height} />\r\n\t\t\t\t\t<rect x='36' y='7.5' rx='8' ry='8' width='22' height={height} />\r\n\t\t\t\t</ContentLoader>\r\n\t\t\t</td>\r\n\t\t\t{/* profit */}\r\n\t\t\t<td className='w-40 px-2'>\r\n\t\t\t\t<ContentLoader\r\n\t\t\t\t\tspeed={2}\r\n\t\t\t\t\theight={35}\r\n\t\t\t\t\twidth={'100%'}\r\n\t\t\t\t\tbackgroundColor={bgColor}\r\n\t\t\t\t\tforegroundColor={fgColor}\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t>\r\n\t\t\t\t\t<rect x='0' y='7.5' rx='8' ry='8' width='80' height={height} />\r\n\t\t\t\t</ContentLoader>\r\n\t\t\t</td>\r\n\t\t\t{/* roi */}\r\n\t\t\t<td className='px-2 w-24'>\r\n\t\t\t\t<ContentLoader\r\n\t\t\t\t\tspeed={2}\r\n\t\t\t\t\theight={35}\r\n\t\t\t\t\twidth={'100%'}\r\n\t\t\t\t\tbackgroundColor={bgColor}\r\n\t\t\t\t\tforegroundColor={fgColor}\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t>\r\n\t\t\t\t\t<rect x='0' y='7.5' rx='8' ry='8' width='40px' height={height} />\r\n\t\t\t\t</ContentLoader>\r\n\t\t\t</td>\r\n\t\t\t{/* bsr */}\r\n\t\t\t<td className='px-2 w-32'>\r\n\t\t\t\t<ContentLoader\r\n\t\t\t\t\tspeed={2}\r\n\t\t\t\t\theight={35}\r\n\t\t\t\t\twidth={'100%'}\r\n\t\t\t\t\tbackgroundColor={bgColor}\r\n\t\t\t\t\tforegroundColor={fgColor}\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t>\r\n\t\t\t\t\t<rect x='0' y='7.5' rx='8' ry='8' width='90' height={height} />\r\n\t\t\t\t</ContentLoader>\r\n\t\t\t</td>\r\n\t\t\t{/* sales */}\r\n\t\t\t<td className='px-2 w-24'>\r\n\t\t\t\t<ContentLoader\r\n\t\t\t\t\tspeed={2}\r\n\t\t\t\t\theight={35}\r\n\t\t\t\t\twidth={'100%'}\r\n\t\t\t\t\tbackgroundColor={bgColor}\r\n\t\t\t\t\tforegroundColor={fgColor}\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t>\r\n\t\t\t\t\t<rect x='0' y='7.5' rx='8' ry='8' width='40' height={height} />\r\n\t\t\t\t</ContentLoader>\r\n\t\t\t</td>\r\n\t\t\t{/* date */}\r\n\t\t\t<td className='px-2'>\r\n\t\t\t\t<ContentLoader\r\n\t\t\t\t\tspeed={2}\r\n\t\t\t\t\theight={35}\r\n\t\t\t\t\twidth={'100%'}\r\n\t\t\t\t\tbackgroundColor={bgColor}\r\n\t\t\t\t\tforegroundColor={fgColor}\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t>\r\n\t\t\t\t\t<rect x='0' y='7.5' rx='8' ry='8' width='60' height={height} />\r\n\t\t\t\t</ContentLoader>\r\n\t\t\t</td>\r\n\t\t\t{/* hover menu */}\r\n\t\t\t<td className='px-2' />\r\n\t\t</tr>\r\n\t);\r\n};\r\n\r\n// svg paths for nullState\r\nconst svgList = {\r\n\tfeed: (\r\n\t\t<path d='M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z' />\r\n\t),\r\n\tliked: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n\tarchived: <path d='M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z' />,\r\n\tsearch: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n};\r\n\r\n// classes for component\r\nconst classes = {\r\n\tsectionWrapper: 'relative mt-12',\r\n\ttableWrapper:\r\n\t\t'pb-1 cs-light-400 card-300 overflow-x-auto overflow-y-visible xl:overflow-visible',\r\n\ttable: 'w-full',\r\n\ttableHeadWrapper: 'border-b border-100',\r\n\ttableHead:\r\n\t\t'text-left font-semibold text-xs cs-bg text-100 uppercase tracking-widest',\r\n\ttableHeadCell: 'p-4 lg:p-3 xl:p-2',\r\n\ttableBody: 'mx-4 text-sm text-200',\r\n};\r\n\r\nexport default LeadTable;\r\n","import React, { useState, useRef } from 'react';\r\n\r\n// packages\r\nimport ContentLoader from 'react-content-loader';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\n\r\n// redux\r\nimport { useAppDispatch } from '@hooks/hooks';\r\nimport { setItemLimit } from '@components/features/filters/filtersSlice';\r\n\r\n// utils\r\nimport { numberWithCommas, useOutsideMousedown } from '@utils/utils';\r\nimport { Pagination } from '@utils/interfaces/Pagination';\r\nimport { LeadTypes } from '@utils/interfaces/Lead';\r\nimport { useDarkMode } from '@hooks/hooks';\r\n\r\ninterface PaginationProps {\r\n\tpagination: Pagination;\r\n\ttype: LeadTypes;\r\n\titemLimit: number;\r\n\tstatus: string;\r\n\tsetPage: any;\r\n}\r\n\r\nconst PaginationComponent: React.FC<PaginationProps> = ({\r\n\tpagination,\r\n\ttype,\r\n\titemLimit,\r\n\tstatus,\r\n\tsetPage,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// local state\r\n\tconst [colorTheme] = useDarkMode();\r\n\tconst [selectOpen, setSelectOpen] = useState(false);\r\n\tconst [selectValue, setSelectValue] = useState(itemLimit || 15);\r\n\tconst [filteredMessage, setFilteredMessage] = useState(false);\r\n\r\n\t// destructure necessary items\r\n\tconst {\r\n\t\tpage,\r\n\t\thasNextPage,\r\n\t\thasPreviousPage,\r\n\t\tnextPage,\r\n\t\tpreviousPage,\r\n\t\ttotalItems,\r\n\t\tfilteredItems,\r\n\t} = pagination;\r\n\r\n\t// close modal handlers\r\n\tconst ref = useRef(null);\r\n\tuseOutsideMousedown(ref, setSelectOpen, null);\r\n\t// hotkeys\r\n\t// close details on escape key\r\n\tuseHotkeys(\r\n\t\t'Escape',\r\n\t\t() => {\r\n\t\t\tselectOpen && setSelectOpen(false);\r\n\t\t},\r\n\t\t{ keyup: true }\r\n\t);\r\n\r\n\tconst itemsFrom =\r\n\t\tpreviousPage !== null\r\n\t\t\t? previousPage * (itemLimit || 15) + 1\r\n\t\t\t: previousPage && previousPage + 1;\r\n\tconst itemsTo =\r\n\t\tfilteredItems && filteredItems < page * (itemLimit || 15)\r\n\t\t\t? filteredItems\r\n\t\t\t: page * (itemLimit || 15);\r\n\r\n\t// global values\r\n\tconst bgColor = colorTheme === 'dark' ? '#F0F4F8' : '#1C2936';\r\n\tconst fgColor = colorTheme === 'dark' ? '#E6EBF0' : '#1E2C3C';\r\n\r\n\treturn (\r\n\t\t<article className='mt-8'>\r\n\t\t\t<div className='center-between py-2 px-4 cs-light-400 rounded-main shadow-md text-100 border border-300'>\r\n\t\t\t\t{totalItems && totalItems > 0 ? (\r\n\t\t\t\t\t<div className='relative flex items-center text-sm' ref={ref}>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\tclassName='overflow-x-hidden relative w-full pl-2 pr-10 py-2 input border border-300 rounded-main text-left cursor-pointer transition-main ring-purple ring-inset'\r\n\t\t\t\t\t\t\taria-haspopup='listbox'\r\n\t\t\t\t\t\t\taria-expanded='true'\r\n\t\t\t\t\t\t\taria-labelledby='listbox-label'\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tselectOpen ? setSelectOpen(false) : setSelectOpen(true)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<span className='flex items-center'>\r\n\t\t\t\t\t\t\t\t<span className='ml-2 block truncate'>{selectValue}</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span className='ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none'>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName='h-4 w-4 text-gray-400'\r\n\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\taria-hidden='true'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\td='M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z'\r\n\t\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t{selectOpen && (\r\n\t\t\t\t\t\t\t<ul\r\n\t\t\t\t\t\t\t\tclassName='absolute top-0 right-0 z-10 max-h-56 w-full mt-1 py-1 cs-light-300 card-200 text-sm overflow-auto focus:outline-none transform -translate-y-40'\r\n\t\t\t\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\t\t\t\trole='listbox'\r\n\t\t\t\t\t\t\t\taria-labelledby='listbox-label'\r\n\t\t\t\t\t\t\t\taria-activedescendant='listbox-option-3'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{selectOptions.map((option, i) => (\r\n\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\tclassName={`py-2 pl-3 pr-9 cursor-pointer select-none relative ${\r\n\t\t\t\t\t\t\t\t\t\t\tselectValue === option\r\n\t\t\t\t\t\t\t\t\t\t\t\t? 'cs-purple'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: 'hover:bg-gray-100 dark:hover:bg-darkGray-100 text-300'\r\n\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\tid={`listbox-option-${i}`}\r\n\t\t\t\t\t\t\t\t\t\trole='option'\r\n\t\t\t\t\t\t\t\t\t\taria-selected='true'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetItemLimit({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titemLimit: option,\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\tsetSelectValue(option);\r\n\t\t\t\t\t\t\t\t\t\t\tsetSelectOpen(false);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{option}\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div />\r\n\t\t\t\t)}\r\n\t\t\t\t<div className='flex items-center justify-between text-sm'>\r\n\t\t\t\t\t{filteredItems ? (\r\n\t\t\t\t\t\t<div className='relative flex items-center'>\r\n\t\t\t\t\t\t\t{filteredItems > 0 && totalItems && totalItems > filteredItems && (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() => setFilteredMessage((prev) => !prev)}\r\n\t\t\t\t\t\t\t\t\tonMouseEnter={() => setFilteredMessage(true)}\r\n\t\t\t\t\t\t\t\t\tonMouseLeave={() => setFilteredMessage(false)}\r\n\t\t\t\t\t\t\t\t\tclassName='mr-2 rounded-md text-gray-400 hover:text-gray-600 transition-main ring-gray'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\td='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z'\r\n\t\t\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t{filteredMessage && totalItems && (\r\n\t\t\t\t\t\t\t\t\t\t<div className='absolute z-10 bottom-0 py-2 px-4 transform -translate-y-8 rounded-md shadow-md bg-gray-900 text-left text-white text-sm'>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className='font-semibold text-purple-300'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{numberWithCommas(totalItems - filteredItems)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\tleads aren't showing because of applied filters.\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{status === 'idle' ? (\r\n\t\t\t\t\t\t\t\tfilteredItems && (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\tShowing {itemsFrom} to {itemsTo} of {filteredItems} results\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div className='flex justify-end'>\r\n\t\t\t\t\t\t\t\t\t<ContentLoader\r\n\t\t\t\t\t\t\t\t\t\tspeed={2}\r\n\t\t\t\t\t\t\t\t\t\theight={35}\r\n\t\t\t\t\t\t\t\t\t\twidth={'70%'}\r\n\t\t\t\t\t\t\t\t\t\tbackgroundColor={bgColor}\r\n\t\t\t\t\t\t\t\t\t\tforegroundColor={fgColor}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\t\t\t\tx='0'\r\n\t\t\t\t\t\t\t\t\t\t\ty='7.5'\r\n\t\t\t\t\t\t\t\t\t\t\trx='8'\r\n\t\t\t\t\t\t\t\t\t\t\try='8'\r\n\t\t\t\t\t\t\t\t\t\t\twidth='100%'\r\n\t\t\t\t\t\t\t\t\t\t\theight={25}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</ContentLoader>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div />\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{(hasPreviousPage || hasNextPage) && (\r\n\t\t\t\t\t\t<nav>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => dispatch(setPage({ page: previousPage, type }))}\r\n\t\t\t\t\t\t\t\tclassName={`${\r\n\t\t\t\t\t\t\t\t\thasPreviousPage\r\n\t\t\t\t\t\t\t\t\t\t? 'hover:shadow-md hover:text-gray-700 border border-300'\r\n\t\t\t\t\t\t\t\t\t\t: 'pointer-events-none bg-gray-200 opacity-50'\r\n\t\t\t\t\t\t\t\t} ${classes.button} ml-8`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tPrevious\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => dispatch(setPage({ page: nextPage, type }))}\r\n\t\t\t\t\t\t\t\tclassName={`${\r\n\t\t\t\t\t\t\t\t\thasNextPage\r\n\t\t\t\t\t\t\t\t\t\t? 'hover:shadow-md hover:text-gray-700 border border-300'\r\n\t\t\t\t\t\t\t\t\t\t: 'pointer-events-none bg-gray-200 opacity-50'\r\n\t\t\t\t\t\t\t\t} ${classes.button} ml-4`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tNext\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t);\r\n};\r\n\r\nconst selectOptions = [10, 20, 50, 100];\r\n\r\n// component classes\r\nconst classes = {\r\n\tbutton:\r\n\t\t'py-2 px-3 rounded-lg dark:bg-darkGray-200 dark:hover:bg-darkGray-100 shadow-sm text-sm font-semibold border border-gray-200 dark:border-darkGray-100 text-gray-600 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-400 transition duration-100 ease-in-out ring-purple',\r\n};\r\n\r\nexport default PaginationComponent;\r\n","import React, { Fragment, useState, useEffect } from 'react';\r\n\r\n// packages\r\nimport { DateTime } from 'luxon';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useSpring } from 'react-spring';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@hooks/hooks';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\nimport {\r\n\tclearCurrentLead,\r\n\tgetAllLeads,\r\n\tsetLeadLoading,\r\n\tsetPage,\r\n} from '@features/leads/leadsSlice';\r\n\r\n// components\r\nimport Button from '@components/utils/Button';\r\nimport DatePicker from '../filters/DatePicker';\r\nimport Details from './Details';\r\nimport ExportButton from './ExportButton';\r\nimport Filter from '../filters/Filter';\r\nimport LeadTable from './LeadTable';\r\nimport PaginationComponent from '@components/layout/navigation/Pagination';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport { Lead } from '@utils/interfaces/Lead';\r\nimport { Pagination } from '@utils/interfaces/Pagination';\r\nimport { User } from '@utils/interfaces/User';\r\n\r\ninterface LeadsProps {\r\n\tleads: Lead[];\r\n\tallLeads: Lead[];\r\n\tpagination: Pagination;\r\n\ttype: 'feed' | 'liked' | 'archived' | 'search';\r\n\titemLimit: number;\r\n\theaderTitle: string | null;\r\n\tuser: User;\r\n\tstatus: 'idle' | 'loading' | 'failed';\r\n\tsearch: boolean;\r\n\tcurrentSearchValue: string | null;\r\n}\r\n\r\nconst Leads: React.FC<LeadsProps> = ({\r\n\tleads,\r\n\tallLeads,\r\n\tpagination,\r\n\ttype,\r\n\titemLimit,\r\n\theaderTitle,\r\n\tuser,\r\n\tstatus: authStatus,\r\n\tcurrentSearchValue,\r\n}) => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// lead state\r\n\tconst leadStatus = useAppSelector((state) => state.leads.status);\r\n\tconst currentLead = useAppSelector((state) => state.leads.currentLead);\r\n\tconst lastUpdated = useAppSelector((state) => state.leads.lastUpdated);\r\n\t// filter state\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\r\n\t// local state\r\n\tconst [date, setDate] = useState(false);\r\n\tconst [exportLeads, setExportLeads] = useState(false);\r\n\tconst [filter, setFilter] = useState(false);\r\n\tconst [showDetails, setShowDetails] = useState(false);\r\n\r\n\t// destructure necessary items\r\n\tconst { _id: userId, likedLeads, archivedLeads, comments } = user;\r\n\tconst {\r\n\t\tcount: filterCount,\r\n\t\tdateLimits: { selected: dateSelected },\r\n\t} = filters;\r\n\r\n\t// set counts for \"liked\" & \"archived\"\r\n\tconst likedCount = likedLeads?.length > 0 && likedLeads.length;\r\n\tconst archivedCount = archivedLeads?.length > 0 && archivedLeads.length;\r\n\r\n\t// navigation links in header\r\n\tconst primaryLinks = [\r\n\t\t{\r\n\t\t\ttitle: 'Feed',\r\n\t\t\tlink: '/',\r\n\t\t\tcount: null,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Liked',\r\n\t\t\tlink: '/liked/',\r\n\t\t\tcount: likedCount,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Archived',\r\n\t\t\tlink: '/archived/',\r\n\t\t\tcount: archivedCount,\r\n\t\t},\r\n\t];\r\n\r\n\t// tools in header\r\n\tconst tools = [\r\n\t\t{\r\n\t\t\ttext: 'Filters',\r\n\t\t\tpath: svgList.filters,\r\n\t\t\tonClick: () => setFilter((prev) => !prev),\r\n\t\t\tconditional: filterCount! > 0,\r\n\t\t\tconditionalDisplay: (\r\n\t\t\t\t<span className='svg-sm absolute top-0 right-0 all-center py-2.5 px-3 rounded-full cs-purple transform -translate-y-2 translate-x-3'>\r\n\t\t\t\t\t{filterCount}\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\t// handler for exporting leads\r\n\tconst handleExport = async () => {\r\n\t\ttry {\r\n\t\t\tif (leads.length > 0) {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Exporting leads',\r\n\t\t\t\t\t\tmessage: 'Hold tight while the data is accumulated.',\r\n\t\t\t\t\t\talertType: 'warning',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tgetAllLeads({ userId, filters, type, query: currentSearchValue })\r\n\t\t\t\t);\r\n\t\t\t\tsetExportLeads(true);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'There are no leads to export',\r\n\t\t\t\t\t\tmessage: 'Please adjust your export settings and try again',\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tdispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Error exporting leads',\r\n\t\t\t\t\tmessage: 'Please try again or refresh the page.',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\t// set a timeout to get all leads\r\n\tuseEffect(() => {\r\n\t\tif (exportLeads) {\r\n\t\t\tconst resultTimeout = setTimeout(() => {\r\n\t\t\t\tif (allLeads.length === 0) {\r\n\t\t\t\t\tsetExportLeads(false);\r\n\t\t\t\t}\r\n\t\t\t}, 18000);\r\n\r\n\t\t\treturn () => clearTimeout(resultTimeout);\r\n\t\t}\r\n\t}, [allLeads, exportLeads, setExportLeads]);\r\n\r\n\t// details animation style\r\n\tconst animationStyle = useSpring({\r\n\t\ttransform: showDetails ? 'translateX(0%)' : 'translateX(100%)',\r\n\t\tconfig: { duration: 250 },\r\n\t});\r\n\r\n\treturn authStatus === 'idle' && user ? (\r\n\t\t<Fragment>\r\n\t\t\t<section className={classes.leadsWrapper}>\r\n\t\t\t\t<nav className={classes.navWrapper}>\r\n\t\t\t\t\t{/* <header>\r\n\t\t\t\t\t\t<h1 className='text-2xl text-300 font-bold'>Leads</h1>\r\n\t\t\t\t\t</header> */}\r\n\t\t\t\t\t<div className={classes.nav}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{primaryLinks.map((link, i) => (\r\n\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\t\t\tto={`/leads${link.link}`}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tdispatch(setLeadLoading());\r\n\t\t\t\t\t\t\t\t\t\tcurrentLead && dispatch(clearCurrentLead());\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.navLink}\r\n\t\t\t\t\t\t\t\t\tactiveClassName={classes.navLinkActive}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span>{link.title}</span>\r\n\t\t\t\t\t\t\t\t\t{link.count && (\r\n\t\t\t\t\t\t\t\t\t\t<span className={classes.navLinkCounter}>{link.count}</span>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={classes.navToolsWrapper}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\t\t\tdateSelected\r\n\t\t\t\t\t\t\t\t\t\t? dateSelected!\r\n\t\t\t\t\t\t\t\t\t\t: `${\r\n\t\t\t\t\t\t\t\t\t\t\t\tDateTime.fromISO(user?.dateCreated).toFormat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'LLL dd, yyyy'\r\n\t\t\t\t\t\t\t\t\t\t\t\t) || 'Jan 1, 2021'\r\n\t\t\t\t\t\t\t\t\t\t  } - ${DateTime.now().toFormat('LLL dd, yyyy')}` ||\r\n\t\t\t\t\t\t\t\t\t\t  'All leads'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonClick={() => setDate((prev) => !prev)}\r\n\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\tsize={null}\r\n\t\t\t\t\t\t\t\tcta={false}\r\n\t\t\t\t\t\t\t\tpath={svgList.calendar}\r\n\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{tools.map((tool, i) => (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\ttext={tool.text}\r\n\t\t\t\t\t\t\t\t\tonClick={tool.onClick}\r\n\t\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\tsize={null}\r\n\t\t\t\t\t\t\t\t\tcta={false}\r\n\t\t\t\t\t\t\t\t\tpath={tool.path}\r\n\t\t\t\t\t\t\t\t\tconditional={tool.conditional}\r\n\t\t\t\t\t\t\t\t\tconditionalDisplay={tool.conditionalDisplay}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t{/* handle active or inactive states for tools */}\r\n\t\t\t\t\t\t\t{!exportLeads && (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttext='Export'\r\n\t\t\t\t\t\t\t\t\tonClick={handleExport}\r\n\t\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\tsize={null}\r\n\t\t\t\t\t\t\t\t\tcta={false}\r\n\t\t\t\t\t\t\t\t\tpath={svgList.export}\r\n\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{date && (\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\t\t\tdate={date}\r\n\t\t\t\t\t\t\t\t\tsetDate={setDate}\r\n\t\t\t\t\t\t\t\t\tdateCreated={user.dateCreated}\r\n\t\t\t\t\t\t\t\t\tlastUpdated={lastUpdated}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{filter && (\r\n\t\t\t\t\t\t\t\t<Filter filterActive={filter} setFilterActive={setFilter} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{exportLeads &&\r\n\t\t\t\t\t\t\t\t(allLeads.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t<ExportButton\r\n\t\t\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\t\t\tleads={allLeads}\r\n\t\t\t\t\t\t\t\t\t\tsetExportLeads={setExportLeads}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\tdivWidth={'w-24 ml-1'}\r\n\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\tspinnerWidth={'sm'}\r\n\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</nav>\r\n\t\t\t\t<div className='container'>\r\n\t\t\t\t\t{leadStatus === 'failed' ? (\r\n\t\t\t\t\t\t<div className='mt-6 container'>\r\n\t\t\t\t\t\t\tThere was an error making that request. If this issue persists,\r\n\t\t\t\t\t\t\tplease{' '}\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref='mailto:support@leadgeek.io'\r\n\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\tclassName='link text-purple-500 hover:text-purple-600 rounded-lg transition-main ring-gray'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tcontact Leadgeek support\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t.\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<LeadTable\r\n\t\t\t\t\t\t\tleads={leads}\r\n\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\tliked={likedLeads}\r\n\t\t\t\t\t\t\tarchived={archivedLeads}\r\n\t\t\t\t\t\t\tstatus={leadStatus}\r\n\t\t\t\t\t\t\tshowDetails={showDetails}\r\n\t\t\t\t\t\t\tsetShowDetails={setShowDetails}\r\n\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\tcurrentSearchValue={currentSearchValue}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{leads.length > 0 && pagination && (\r\n\t\t\t\t\t\t<PaginationComponent\r\n\t\t\t\t\t\t\tstatus={leadStatus}\r\n\t\t\t\t\t\t\tpagination={pagination}\r\n\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\titemLimit={itemLimit}\r\n\t\t\t\t\t\t\tsetPage={setPage}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t\t{currentLead && (\r\n\t\t\t\t<Details\r\n\t\t\t\t\ttype={type}\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t\tcurrentLead={currentLead}\r\n\t\t\t\t\tshowDetails={showDetails}\r\n\t\t\t\t\tsetShowDetails={setShowDetails}\r\n\t\t\t\t\tanimationStyle={animationStyle}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</Fragment>\r\n\t) : authStatus === 'loading' ? (\r\n\t\t<Spinner\r\n\t\t\tdivWidth={null}\r\n\t\t\tcenter={true}\r\n\t\t\tspinnerWidth={null}\r\n\t\t\tmargin={false}\r\n\t\t\ttext={'Loading leads...'}\r\n\t\t/>\r\n\t) : (\r\n\t\t<div className='mt-6 container'>\r\n\t\t\tThere was an error making that request. If this issue persists, please{' '}\r\n\t\t\t<a\r\n\t\t\t\thref='mailto:support@leadgeek.io'\r\n\t\t\t\ttarget='_blank'\r\n\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\tclassName='link text-purple-500 hover:text-purple-600 rounded-lg transition-main ring-gray'\r\n\t\t\t>\r\n\t\t\t\tcontact Leadgeek support\r\n\t\t\t</a>\r\n\t\t\t.\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// svg paths for tools\r\nconst svgList = {\r\n\tcalendar: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n\tfilters: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n\tprep: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n\texport: (\r\n\t\t<path\r\n\t\t\tfillRule='evenodd'\r\n\t\t\td='M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z'\r\n\t\t\tclipRule='evenodd'\r\n\t\t/>\r\n\t),\r\n};\r\n\r\n// classes for component\r\nconst classes = {\r\n\tleadsWrapper: 'relative pb-28',\r\n\tnavWrapper:\r\n\t\t'pt-3 pb-2 px-4 lg:px-8 cs-light-400 border-b border-300 shadow-sm',\r\n\tnav: 'relative flex items-end justify-between container',\r\n\tnavLink:\r\n\t\t'relative first:ml-0 ml-8 pb-2 font-semibold text-gray-700 dark:text-gray-400 hover:text-purple-500 dark:hover:text-purple-300 hover:border-b-2 hover:border-purple-500 dark:border-purple-200 group transition-colors-main',\r\n\tnavLinkActive:\r\n\t\t'text-purple-500 dark:text-purple-300 border-b-2 border-purple-500 dark:border-purple-200',\r\n\tnavLinkCounter:\r\n\t\t'h-4 w-4 absolute top-0 right-0 all-center py-2.5 px-3 rounded-full cs-purple group-hover:bg-purple-600 dark:group-hover:bg-purple-300 text-xs transform -translate-y-4 translate-x-7',\r\n\tnavToolsWrapper: 'flex items-center',\r\n};\r\n\r\nexport default Leads;\r\n","import React, { useEffect } from 'react';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@hooks/hooks';\r\nimport { getFeedLeads } from '@features/leads/leadsSlice';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Leads from '@components/features/leads/Leads';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\nconst Feed = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// lead state\r\n\tconst feed = useAppSelector((state) => state.leads.feed);\r\n\t// filter state\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\t// destructure necessary items\r\n\tconst { page } = feed.pagination;\r\n\tconst { itemLimit } = filters;\r\n\r\n\t// call getFeedLeads\r\n\tuseEffect(() => {\r\n\t\tstatus === 'idle' &&\r\n\t\t\tisAuthenticated &&\r\n\t\t\tuser?._id &&\r\n\t\t\tdispatch(\r\n\t\t\t\tgetFeedLeads({ user: { id: user._id, role: user.role }, page, filters })\r\n\t\t\t);\r\n\t}, [status, isAuthenticated, user?._id, user?.role, page, filters, dispatch]);\r\n\r\n\treturn status === 'idle' && user ? (\r\n\t\t<AuthLayout>\r\n\t\t\t<Leads\r\n\t\t\t\tleads={feed.pageByIds}\r\n\t\t\t\tallLeads={feed.totalByIds}\r\n\t\t\t\tpagination={feed.pagination}\r\n\t\t\t\ttype={'feed'}\r\n\t\t\t\titemLimit={itemLimit}\r\n\t\t\t\theaderTitle={null}\r\n\t\t\t\tuser={user}\r\n\t\t\t\tstatus={status}\r\n\t\t\t\tsearch={false}\r\n\t\t\t\tcurrentSearchValue={null}\r\n\t\t\t/>\r\n\t\t</AuthLayout>\r\n\t) : (\r\n\t\t<div className='h-screen dark:bg-darkGray-400'>\r\n\t\t\t<Spinner\r\n\t\t\t\tdivWidth={null}\r\n\t\t\t\tcenter={true}\r\n\t\t\t\tspinnerWidth={null}\r\n\t\t\t\tmargin={false}\r\n\t\t\t\ttext={'Loading your Leadgeek profile...'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Feed;\r\n","import React, { useEffect } from 'react';\r\n\r\nimport { useAppSelector, useAppDispatch } from '@hooks/hooks';\r\nimport { getLikedLeads } from '@features/leads/leadsSlice';\r\n\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Leads from '@components/features/leads/Leads';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\nconst LikedPage = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// lead state\r\n\tconst liked = useAppSelector((state) => state.leads.liked);\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\t// destructure necessary items\r\n\tconst { page } = liked.pagination;\r\n\r\n\tuseEffect(() => {\r\n\t\tstatus === 'idle' &&\r\n\t\t\tisAuthenticated &&\r\n\t\t\tuser &&\r\n\t\t\tdispatch(getLikedLeads({ leads: user.likedLeads, page, filters }));\r\n\t}, [status, isAuthenticated, user, page, filters, dispatch]);\r\n\r\n\treturn status === 'idle' && user ? (\r\n\t\t<AuthLayout>\r\n\t\t\t<Leads\r\n\t\t\t\tleads={liked.pageByIds}\r\n\t\t\t\tallLeads={liked.totalByIds}\r\n\t\t\t\tpagination={liked.pagination}\r\n\t\t\t\ttype={'liked'}\r\n\t\t\t\titemLimit={filters.itemLimit}\r\n\t\t\t\theaderTitle={null}\r\n\t\t\t\tuser={user}\r\n\t\t\t\tstatus={status}\r\n\t\t\t\tsearch={false}\r\n\t\t\t\tcurrentSearchValue={null}\r\n\t\t\t/>\r\n\t\t</AuthLayout>\r\n\t) : (\r\n\t\t<div className='h-screen'>\r\n\t\t\t<Spinner\r\n\t\t\t\tdivWidth={null}\r\n\t\t\t\tcenter={true}\r\n\t\t\t\tspinnerWidth={null}\r\n\t\t\t\tmargin={false}\r\n\t\t\t\ttext={'Loading your Leadgeek profile...'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default LikedPage;\r\n","import React, { useEffect } from 'react';\r\n\r\nimport { useAppSelector, useAppDispatch } from '@hooks/hooks';\r\nimport { getArchivedLeads } from '@features/leads/leadsSlice';\r\n\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Leads from '@components/features/leads/Leads';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\nconst Archived = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// lead state\r\n\tconst archived = useAppSelector((state) => state.leads.archived);\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\t// destructure necessary items\r\n\tconst { page } = archived.pagination;\r\n\r\n\tuseEffect(() => {\r\n\t\tstatus === 'idle' &&\r\n\t\t\tisAuthenticated &&\r\n\t\t\tuser &&\r\n\t\t\tdispatch(getArchivedLeads({ leads: user.archivedLeads, page, filters }));\r\n\t}, [status, isAuthenticated, user, page, filters, dispatch]);\r\n\r\n\treturn status === 'idle' && user ? (\r\n\t\t<AuthLayout>\r\n\t\t\t<Leads\r\n\t\t\t\tleads={archived.pageByIds}\r\n\t\t\t\tallLeads={archived.totalByIds}\r\n\t\t\t\tpagination={archived.pagination}\r\n\t\t\t\ttype={'archived'}\r\n\t\t\t\titemLimit={filters.itemLimit}\r\n\t\t\t\theaderTitle={null}\r\n\t\t\t\tuser={user}\r\n\t\t\t\tstatus={status}\r\n\t\t\t\tsearch={false}\r\n\t\t\t\tcurrentSearchValue={null}\r\n\t\t\t/>\r\n\t\t</AuthLayout>\r\n\t) : (\r\n\t\t<div className='h-screen'>\r\n\t\t\t<Spinner\r\n\t\t\t\tdivWidth={null}\r\n\t\t\t\tcenter={true}\r\n\t\t\t\tspinnerWidth={null}\r\n\t\t\t\tmargin={false}\r\n\t\t\t\ttext={'Loading your Leadgeek profile...'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Archived;\r\n","import React, { useEffect } from 'react';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@hooks/hooks';\r\nimport {\r\n\tgetSearchResults,\r\n\tsetLeadIdle,\r\n} from '@components/features/leads/leadsSlice';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Leads from '@components/features/leads/Leads';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\nconst Search = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// lead state\r\n\tconst search = useAppSelector((state) => state.leads.search);\r\n\t// filters state\r\n\tconst filters = useAppSelector((state) => state.filters);\r\n\r\n\t// destructure necessary items\r\n\tconst {\r\n\t\tpagination: { page },\r\n\t\tsearchValue,\r\n\t\tnewSearch,\r\n\t} = search;\r\n\r\n\t// set lead status to idle on load (empty search result)\r\n\tuseEffect(() => {\r\n\t\tif (status === 'idle' && user?._id && searchValue) {\r\n\t\t\tdispatch(\r\n\t\t\t\tgetSearchResults({\r\n\t\t\t\t\tuserId: user._id,\r\n\t\t\t\t\tquery: searchValue,\r\n\t\t\t\t\tpage: newSearch ? 1 : page,\r\n\t\t\t\t\tfilters,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tstatus === 'idle' && dispatch(setLeadIdle());\r\n\t\t}\r\n\t}, [status, user?._id, searchValue, newSearch, page, filters, dispatch]);\r\n\r\n\treturn status === 'idle' && user ? (\r\n\t\t<AuthLayout>\r\n\t\t\t<Leads\r\n\t\t\t\tleads={search.pageByIds}\r\n\t\t\t\tallLeads={search.totalByIds}\r\n\t\t\t\tpagination={search.pagination}\r\n\t\t\t\ttype={'search'}\r\n\t\t\t\titemLimit={filters.itemLimit}\r\n\t\t\t\tuser={user}\r\n\t\t\t\tstatus={status}\r\n\t\t\t\theaderTitle={'Search results'}\r\n\t\t\t\tsearch={true}\r\n\t\t\t\tcurrentSearchValue={searchValue}\r\n\t\t\t/>\r\n\t\t</AuthLayout>\r\n\t) : (\r\n\t\t<div className='h-screen'>\r\n\t\t\t<Spinner\r\n\t\t\t\tdivWidth={null}\r\n\t\t\t\tcenter={true}\r\n\t\t\t\tspinnerWidth={null}\r\n\t\t\t\tmargin={false}\r\n\t\t\t\ttext={'Loading your Leadgeek profile...'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Search;\r\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgX(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 2,\n    d: \"M6 18L18 6M6 6l12 12\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgX);\nexport default __webpack_public_path__ + \"static/media/x.e41cb6e1.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect, useCallback } from 'react';\r\n\r\n// packages\r\nimport axios from 'axios';\r\nimport { DateTime } from 'luxon';\r\nimport { Redirect } from 'react-router';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector } from '@hooks/hooks';\r\nimport { setAlert } from '@features/alert/alertSlice';\r\nimport { surrogateUser } from '@features/auth/authSlice';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Button from '@components/utils/Button';\r\nimport Spinner from '@components/utils/Spinner';\r\nimport { ReactComponent as Check } from '@assets/images/svgs/check.svg';\r\nimport { ReactComponent as X } from '@assets/images/svgs/x.svg';\r\n\r\n// utils\r\nimport { capitalize, config } from '@utils/utils';\r\nimport { User } from '@utils/interfaces/User';\r\nimport { Pagination } from '@utils/interfaces/Pagination';\r\n\r\ninterface UsersState {\r\n\tstatus: 'loading' | 'idle';\r\n\tallUsers: User[];\r\n\tpagination: Pagination;\r\n}\r\n\r\n// TODO!!\r\n// setPage crashes app in pagination component\r\n\r\nconst Admin = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\r\n\t// local state\r\n\tconst [usersState, setUsersState] = useState<UsersState>({\r\n\t\tallUsers: [],\r\n\t\tstatus: 'loading',\r\n\t\tpagination: {\r\n\t\t\tpage: 1,\r\n\t\t\thasNextPage: null,\r\n\t\t\thasPreviousPage: false,\r\n\t\t\tnextPage: null,\r\n\t\t\tpreviousPage: null,\r\n\t\t\tlastPage: null,\r\n\t\t\ttotalItems: null,\r\n\t\t\tfilteredItems: null,\r\n\t\t},\r\n\t});\r\n\r\n\t// upload leads from Google sheet to MongoDB\r\n\tconst handleExportLeads = async (e: React.MouseEvent<HTMLElement>) => {\r\n\t\te.stopPropagation();\r\n\r\n\t\ttry {\r\n\t\t\t// make GET request to API\r\n\t\t\tconst { data } = await axios.get('/api/leads/export');\r\n\r\n\t\t\tif (data === 'Leads were added to the database.') {\r\n\t\t\t\t// redeploy Netlify site webhook\r\n\t\t\t\tawait axios.post(\r\n\t\t\t\t\t'https://api.netlify.com/build_hooks/60f1da8987d39d7d6bceae55'\r\n\t\t\t\t);\r\n\t\t\t\t// alert the admin\r\n\t\t\t\treturn dispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Upload success',\r\n\t\t\t\t\t\tmessage: data,\r\n\t\t\t\t\t\talertType: 'success',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\t// alert the admin the upload failed\r\n\t\t\t\treturn dispatch(\r\n\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\ttitle: 'Error uploading leads',\r\n\t\t\t\t\t\tmessage: 'Check Google Sheets for missing attributes.',\r\n\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\t// get all users\r\n\tconst getAllUsers = useCallback(\r\n\t\tasync (page: number, itemLimit: number) => {\r\n\t\t\ttry {\r\n\t\t\t\t// prepare the JSON object\r\n\t\t\t\tconst body = JSON.stringify({ page, itemLimit });\r\n\r\n\t\t\t\t// make a POST request to the API\r\n\t\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t\t'/api/users/get-all-users',\r\n\t\t\t\t\tbody,\r\n\t\t\t\t\tconfig\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// if there are users, set it in state\r\n\t\t\t\tif (data.users.length > 0) {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tusers,\r\n\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\thasNextPage,\r\n\t\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\t\tnextPage,\r\n\t\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\t\ttotalItems,\r\n\t\t\t\t\t} = data;\r\n\t\t\t\t\treturn setUsersState({\r\n\t\t\t\t\t\t...usersState,\r\n\t\t\t\t\t\tstatus: 'idle',\r\n\t\t\t\t\t\tallUsers: users,\r\n\t\t\t\t\t\tpagination: {\r\n\t\t\t\t\t\t\t...usersState.pagination,\r\n\t\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\t\thasNextPage,\r\n\t\t\t\t\t\t\thasPreviousPage,\r\n\t\t\t\t\t\t\tnextPage,\r\n\t\t\t\t\t\t\tpreviousPage,\r\n\t\t\t\t\t\t\ttotalItems,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// set status to idle\r\n\t\t\t\t\tsetUsersState({ ...usersState, status: 'idle' });\r\n\r\n\t\t\t\t\t// alert the admin that something went wrong\r\n\t\t\t\t\treturn dispatch(\r\n\t\t\t\t\t\tsetAlert({\r\n\t\t\t\t\t\t\ttitle: 'Something went wrong',\r\n\t\t\t\t\t\t\tmessage: 'There was an error retreiving users.',\r\n\t\t\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[usersState, dispatch]\r\n\t);\r\n\r\n\t// get new users on page change\r\n\tuseEffect(() => {\r\n\t\tstatus === 'idle' && getAllUsers(usersState.pagination.page, 20);\r\n\t}, [status, usersState.pagination.page, getAllUsers]);\r\n\r\n\t// options in admin panel\r\n\tconst adminItems = [\r\n\t\t// export leads\r\n\t\t{\r\n\t\t\ttitle: 'Export leads',\r\n\t\t\tmisc: (\r\n\t\t\t\t<Button\r\n\t\t\t\t\twidth={null}\r\n\t\t\t\t\tmargin={false}\r\n\t\t\t\t\tsize={null}\r\n\t\t\t\t\ttext='Confirm and export'\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thandleExportLeads(e);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tpath={\r\n\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\td='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\r\n\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcta={true}\r\n\t\t\t\t\tconditional={null}\r\n\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\t// redirect if user doesn't have permissions to view admin page\r\n\tif (user && user?.role !== 'master' && user?.role !== 'admin') {\r\n\t\treturn <Redirect to={{ pathname: '/leads/' }} />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AuthLayout>\r\n\t\t\t{status === 'idle' && user ? (\r\n\t\t\t\t<section className='my-6 container text-300'>\r\n\t\t\t\t\t<div className='mt-12 flex items-center'>\r\n\t\t\t\t\t\t<div className='w-1/5'></div>\r\n\t\t\t\t\t\t<div className='w-4/5 ml-12 text-300'>\r\n\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t<h2 className='text-2xl font-black text-300'>\r\n\t\t\t\t\t\t\t\t\tAdmin resources\r\n\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t<p className='mt-2 text-200'>\r\n\t\t\t\t\t\t\t\t\tKeep stuff from catching fire, bruh{' '}\r\n\t\t\t\t\t\t\t\t\t<span role='img' aria-label='Fire emoji'>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t<article className='mt-4 py-2 md:py-4 lg:py-6 cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t<div className='pb-4 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t<header className='card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-300'>Users</h2>\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='mt-4'>\r\n\t\t\t\t\t\t\t\t\t{status === 'idle' ? (\r\n\t\t\t\t\t\t\t\t\t\t<table className='w-full mt-4 table-auto'>\r\n\t\t\t\t\t\t\t\t\t\t\t<thead className='border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr className='text-left font-semibold text-xs text-gray-600 uppercase tracking-widest whitespace-no-wrap'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='p-2'>Name</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='p-2'>Email</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='p-2'>Plan</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='p-2'>Status</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='p-2'>Stripe</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='p-2'>Surrogate</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t\t\t<tbody className='mt-4 text-100'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{usersState.allUsers.map((user) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={user._id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='text-sm border-b last:border-none border-100 dark:border-darkGray-200 hover:bg-gray-100 dark:hover:bg-darkGray-300'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>{user.name}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`mailto:${user.email}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='link text-purple-500 hover:text-purple-600'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{user.email}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{capitalize(user.role)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{user.subscription.subIds[0] &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.subscription.subIds[0].active ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Check className='inline-block h-4 w-4 text-teal-500 bg-teal-200 rounded-full' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<X className='inline-block h-4 w-4 text-red-500 bg-red-200 rounded-full' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={`https://dashboard.stripe.com/customers/${user.subscription.cusId}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='text-gray-500 hover:text-gray-600 transition-colors duration-100 ease-in-out'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='h-5 w-5'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path d='M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td='M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='py-1 px-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{user.lastLoggedIn\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? DateTime.fromISO(user.lastLoggedIn).toFormat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'LLL dd, t'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '-'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext='Login'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser?.role === 'master' &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(surrogateUser({ id: user._id }))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Loading users...'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t) : (\r\n\t\t\t\t<div className='h-screen'>\r\n\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\tcenter={true}\r\n\t\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\ttext={'Loading admin settings...'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</AuthLayout>\r\n\t);\r\n};\r\n\r\nexport default Admin;\r\n","import React from 'react';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\ninterface NavbarLinkProps {\r\n\tlink: {\r\n\t\ttitle: string;\r\n\t\tlink: string;\r\n\t\tnew: boolean;\r\n\t};\r\n}\r\n\r\nconst NavbarLink: React.FC<NavbarLinkProps> = ({ link }) => {\r\n\treturn (\r\n\t\t<NavLink\r\n\t\t\tclassName='mb-2 -ml-0.5 pl-4 relative flex items-center group font-semibold text-gray-800 dark:text-gray-200 hover:text-purple-500 dark:hover:text-purple-300 border-l-2 border-gray-200 dark:border-darkGray-100 hover:border-purple-500 dark:hover:border-purple-200 transition-main'\r\n\t\t\tactiveClassName='border-l-2 border-purple-500 dark:border-purple-300 text-purple-500 dark:text-purple-300'\r\n\t\t\tto={`/settings/${link.link}/`}\r\n\t\t>\r\n\t\t\t<span className='text-base'>{link.title}</span>\r\n\t\t\t{link.new && (\r\n\t\t\t\t<span className='ml-6 py-0.5 px-1 rounded-main cs-purple text-xs'>\r\n\t\t\t\t\tNew\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\t\t</NavLink>\r\n\t);\r\n};\r\n\r\nconst SettingsNavbar = () => {\r\n\tconst primaryLinks = [\r\n\t\t{\r\n\t\t\ttitle: 'Account',\r\n\t\t\tlink: 'account',\r\n\t\t\tnew: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Plan & billing',\r\n\t\t\tlink: 'billing',\r\n\t\t\tnew: false,\r\n\t\t},\r\n\t\t// {\r\n\t\t// \ttitle: 'Affiliates',\r\n\t\t// \tlink: 'affiliates',\r\n\t\t// \tnew: true,\r\n\t\t// },\r\n\t];\r\n\r\n\treturn (\r\n\t\t<nav className='w-1/5 flex flex-col text-100 text-sm'>\r\n\t\t\t<h3 className='text-lg font-bold text-300'>Settings</h3>\r\n\t\t\t<ol className='mt-4 pb-1 border-l-2 border-200'>\r\n\t\t\t\t{primaryLinks.map((link, i) => (\r\n\t\t\t\t\t<li key={i}>\r\n\t\t\t\t\t\t<NavbarLink link={link} />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t</ol>\r\n\t\t</nav>\r\n\t);\r\n};\r\n\r\nexport default SettingsNavbar;\r\n","import React from 'react';\r\n\r\n// components\r\nimport SettingsNavbar from '@components/layout/navigation/SettingsNavbar';\r\n\r\ninterface SettingsLayoutProps {\r\n\tchildren: React.ReactNode;\r\n\ttitle: string;\r\n\tdescription: string;\r\n}\r\n\r\nconst SettingsLayout: React.FC<SettingsLayoutProps> = ({\r\n\tchildren,\r\n\ttitle,\r\n\tdescription,\r\n}) => {\r\n\treturn (\r\n\t\t<div className='flex flex-row container mt-12'>\r\n\t\t\t<SettingsNavbar />\r\n\t\t\t<section className='w-4/5 max-w-4xl ml-12 text-300'>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<h2 className='text-2xl font-black text-300'>{title}</h2>\r\n\t\t\t\t\t<p className='mt-2 text-200'>{description}</p>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div>{children}</div>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SettingsLayout;\r\n","import React, { useState } from 'react';\r\n\r\n// redux\r\nimport { useAppDispatch, useAppSelector, useDarkMode } from '@hooks/hooks';\r\nimport { removeAlert, setAlert } from '@features/alert/alertSlice';\r\nimport { updatePassword } from '@components/features/auth/authSlice';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport Button from '@components/utils/Button';\r\nimport PasswordFormField from '@components/utils/PasswordFormField';\r\nimport SettingsLayout from '@components/layout/SettingsLayout';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport { passwordList } from '@utils/utils';\r\n\r\nconst AccountPage = () => {\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\r\n\t// color theme\r\n\tconst [colorTheme, setTheme] = useDarkMode();\r\n\r\n\t// local state\r\n\tconst [checked, setChecked] = useState(colorTheme === 'dark' ? false : true);\r\n\tconst [formData, setFormData] = useState({\r\n\t\tpassword_1: '',\r\n\t\tpassword_2: '',\r\n\t});\r\n\r\n\t// destructure necessary items\r\n\tconst { password_1, password_2 } = formData;\r\n\r\n\t// handle form input change\r\n\tconst onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetFormData({ ...formData, [e.target.name]: e.target.value });\r\n\t};\r\n\r\n\tconst handleUpdatePassword = (\r\n\t\temail: string,\r\n\t\tpassword_1: string,\r\n\t\tpassword_2: string\r\n\t) => {\r\n\t\tif (!email) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// error for empty password\r\n\t\tif (!password_1 || !password_2) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Required field missing',\r\n\t\t\t\t\tmessage: \"Password field can't be empty\",\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// error for password not matching\r\n\t\tif (password_1 !== password_2) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: \"Passwords don't match\",\r\n\t\t\t\t\tmessage: 'Check spelling or case sensitivity',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// error for password too short\r\n\t\tif (password_1.length < 7 && password_2.length < 7) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Password is too short',\r\n\t\t\t\t\tmessage: 'Password must be at least 7 characters',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// error for if password contains email string\r\n\t\tconst stringBeforeAt = (string: string) => {\r\n\t\t\tlet splitString = string.split('@');\r\n\t\t\treturn splitString[0];\r\n\t\t};\r\n\t\tlet emailBeforeAt = stringBeforeAt(email);\r\n\t\tif (\r\n\t\t\tpassword_1.includes(emailBeforeAt) ||\r\n\t\t\tpassword_2.includes(emailBeforeAt)\r\n\t\t) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Password is too similar to your email',\r\n\t\t\t\t\tmessage: 'Please choose another password',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// error for if password is from a list of common passwords\r\n\t\tif (\r\n\t\t\tpasswordList.includes(password_1) ||\r\n\t\t\tpasswordList.includes(password_2)\r\n\t\t) {\r\n\t\t\treturn dispatch(\r\n\t\t\t\tsetAlert({\r\n\t\t\t\t\ttitle: 'Password is too common',\r\n\t\t\t\t\tmessage: 'Please pick a more unique password',\r\n\t\t\t\t\talertType: 'danger',\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tdispatch(removeAlert());\r\n\t\t\t// password passes, update in DB\r\n\t\t\tconst password = password_1;\r\n\t\t\treturn dispatch(updatePassword({ email, password, redirect: false }));\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\tuser && (\r\n\t\t\t<AuthLayout>\r\n\t\t\t\t<SettingsLayout\r\n\t\t\t\t\ttitle={'Account'}\r\n\t\t\t\t\tdescription={'Change your account preferences'}\r\n\t\t\t\t>\r\n\t\t\t\t\t<section>\r\n\t\t\t\t\t\t{status === 'loading' ? (\r\n\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\tspinnerWidth={'sm'}\r\n\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{/* <div className='mt-4 pt-2 md:pt-4 lg:pt-6 cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t\t<div className='pb-4 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t\t<header className='card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-300'>Profile</h2>\r\n\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='flex items-center card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t<FormField\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={'Name'}\r\n\t\t\t\t\t\t\t\t\t\t\ttype={'text'}\r\n\t\t\t\t\t\t\t\t\t\t\tname={'name'}\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={user.name}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={user.name}\r\n\t\t\t\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\t\t\t\tstyles={'w-1/2'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<FormField\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={'Email'}\r\n\t\t\t\t\t\t\t\t\t\t\ttype={'email'}\r\n\t\t\t\t\t\t\t\t\t\t\tname={'email'}\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={user.email}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={user.email}\r\n\t\t\t\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\t\t\t\tstyles={'w-1/2 ml-16'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='flex justify-end mt-4 py-2 card-padding-x cs-bg rounded-b-lg border-t border-300'>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Save'}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => alert('hello')}\r\n\t\t\t\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\tsize={'sm'}\r\n\t\t\t\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\t\t\t<article className='mt-4 pt-2 md:pt-4 lg:pt-6 cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t\t<div className='pb-4 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t\t<header className='card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-300'>Security</h2>\r\n\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<form className='flex items-center card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t<PasswordFormField\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='New Password'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Create a new password'\r\n\t\t\t\t\t\t\t\t\t\t\tname='password_1'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={password_1}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => onChange(e)}\r\n\t\t\t\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\t\t\t\tstyles={'w-1/2'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<PasswordFormField\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Confirm Password'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter the password again'\r\n\t\t\t\t\t\t\t\t\t\t\tname='password_2'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={password_2}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => onChange(e)}\r\n\t\t\t\t\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\t\t\t\t\tstyles={'w-1/2 ml-16'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t<div className='flex justify-end mt-4 py-2 card-padding-x cs-bg rounded-b-lg border-t border-300'>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Save'}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tuser?.email &&\r\n\t\t\t\t\t\t\t\t\t\t\t\thandleUpdatePassword(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser?.email,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpassword_1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpassword_2\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\twidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\t\t\t\t\t\tsize={'sm'}\r\n\t\t\t\t\t\t\t\t\t\t\tcta={true}\r\n\t\t\t\t\t\t\t\t\t\t\tpath={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditional={null}\r\n\t\t\t\t\t\t\t\t\t\t\tconditionalDisplay={null}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t\t<article className='mt-4 py-2 md:py-4 lg:py-6 cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t\t<div className='pb-4 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t\t<header className='card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-300'>Appearance</h2>\r\n\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='mt-4 card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='center-between text-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>Theme</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\t\thtmlFor='colorTheme'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='flex items-center cursor-pointer text-sm font-semibold text-100'\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span aria-label='light'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='svg-base'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill='none'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 24 24'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap='round'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin='round'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td='M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='relative mx-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultChecked={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolorTheme === 'dark' ? true : false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetChecked((prev) => !prev);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('theme', colorTheme);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTheme(colorTheme);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid='colorTheme'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='sr-only'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='block bg-gray-300 dark:bg-darkGray-200 w-12 h-6 rounded-full border border-300' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`absolute left-0.5 top-0.5 w-5 h-5 rounded-full transition transform ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!checked\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-white'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-purple-300 translate-x-6'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} shadow-md`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span aria-label='dark'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='svg-base'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path d='M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</SettingsLayout>\r\n\t\t\t</AuthLayout>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nexport default AccountPage;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\n\r\n// packages\r\nimport axios from 'axios';\r\nimport { DateTime } from 'luxon';\r\n\r\n// redux\r\nimport { useAppSelector } from '@hooks/hooks';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport DescriptionList from '@components/utils/DescriptionList';\r\nimport NullState from '@components/utils/NullState';\r\nimport SettingsLayout from '@components/layout/SettingsLayout';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport {\r\n\tcapitalize,\r\n\tconfig,\r\n\tformatTimestamp,\r\n\tplanCheckerByPrice,\r\n\ttruncate,\r\n} from '@utils/utils';\r\n\r\ninterface PlanState {\r\n\tplan: {\r\n\t\tstatus: 'loading' | 'idle';\r\n\t\tid: string | null;\r\n\t\tcreated: string | null;\r\n\t\tcancelAt: string | null;\r\n\t\tcancelAtPeriod: boolean | null;\r\n\t\tcurrentPeriodEnd: string | null;\r\n\t\tplan: {\r\n\t\t\tid: string | null;\r\n\t\t\tamount: number | null;\r\n\t\t};\r\n\t};\r\n}\r\n\r\ninterface PaymentState {\r\n\tpaymentHistory: {\r\n\t\tstatus: 'loading' | 'idle';\r\n\t\tpayments: any;\r\n\t\tpagination: {\r\n\t\t\tpage: number;\r\n\t\t\titemLimit: 10;\r\n\t\t};\r\n\t};\r\n}\r\n\r\nconst BillingPage = () => {\r\n\t// auth state\r\n\tconst authStatus = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// local state\r\n\tconst [planState, setPlanState] = useState<PlanState>({\r\n\t\tplan: {\r\n\t\t\tstatus: 'loading',\r\n\t\t\tid: null,\r\n\t\t\tcreated: null,\r\n\t\t\tcancelAt: null,\r\n\t\t\tcancelAtPeriod: null,\r\n\t\t\tcurrentPeriodEnd: null,\r\n\t\t\tplan: {\r\n\t\t\t\tid: null,\r\n\t\t\t\tamount: null,\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n\r\n\tconst [paymentState, setPaymentState] = useState<PaymentState>({\r\n\t\tpaymentHistory: {\r\n\t\t\tstatus: 'loading',\r\n\t\t\tpayments: [],\r\n\t\t\tpagination: {\r\n\t\t\t\tpage: 1,\r\n\t\t\t\titemLimit: 10,\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n\r\n\tconst getActivePlanDetails = useCallback(\r\n\t\tasync (activeSubId: string) => {\r\n\t\t\ttry {\r\n\t\t\t\t// build request body\r\n\t\t\t\tconst body = JSON.stringify({ subId: activeSubId });\r\n\r\n\t\t\t\t// POST request to route\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata: { message, subscription },\r\n\t\t\t\t} = await axios.post('/api/users/active-plan-details', body, config);\r\n\r\n\t\t\t\t// if subscription data is found, update state\r\n\t\t\t\tif (message === 'Subscription data found') {\r\n\t\t\t\t\treturn setPlanState({\r\n\t\t\t\t\t\t...planState,\r\n\t\t\t\t\t\tplan: {\r\n\t\t\t\t\t\t\t...planState.plan,\r\n\t\t\t\t\t\t\tstatus: 'idle',\r\n\t\t\t\t\t\t\tid: subscription.id,\r\n\t\t\t\t\t\t\tcreated: subscription.created,\r\n\t\t\t\t\t\t\tcancelAt: subscription.cancelAt,\r\n\t\t\t\t\t\t\tcancelAtPeriod: subscription.cancelAtPeriod,\r\n\t\t\t\t\t\t\tcurrentPeriodEnd: subscription.currentPeriodEnd,\r\n\t\t\t\t\t\t\tplan: {\r\n\t\t\t\t\t\t\t\t...planState.plan.plan,\r\n\t\t\t\t\t\t\t\tid: subscription.plan.id,\r\n\t\t\t\t\t\t\t\tamount: subscription.plan.amount,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// update state loading status\r\n\t\t\t\t\treturn setPlanState({\r\n\t\t\t\t\t\t...planState,\r\n\t\t\t\t\t\tplan: {\r\n\t\t\t\t\t\t\t...planState.plan,\r\n\t\t\t\t\t\t\tstatus: 'idle',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[planState]\r\n\t);\r\n\r\n\t// get active plan details\r\n\tuseEffect(() => {\r\n\t\t// get the user's active subscription\r\n\t\tconst activeSub = user?.subscription.subIds.filter(\r\n\t\t\t(sub) => sub.active === true\r\n\t\t)[0];\r\n\r\n\t\tisAuthenticated &&\r\n\t\t\tauthStatus === 'idle' &&\r\n\t\t\tplanState.plan.status === 'loading' &&\r\n\t\t\tactiveSub?.id &&\r\n\t\t\tgetActivePlanDetails(activeSub.id);\r\n\t}, [\r\n\t\tisAuthenticated,\r\n\t\tauthStatus,\r\n\t\tplanState.plan.status,\r\n\t\tuser?.subscription.subIds,\r\n\t\tgetActivePlanDetails,\r\n\t]);\r\n\r\n\tconst getSuccessfulPayments = useCallback(\r\n\t\tasync (cusId: string) => {\r\n\t\t\ttry {\r\n\t\t\t\t// build request body\r\n\t\t\t\tconst body = JSON.stringify({ cusId });\r\n\r\n\t\t\t\t// POST request to route\r\n\t\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t\t'/api/users/successful-payments/',\r\n\t\t\t\t\tbody,\r\n\t\t\t\t\tconfig\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// update state\r\n\t\t\t\treturn setPaymentState({\r\n\t\t\t\t\t...paymentState,\r\n\t\t\t\t\tpaymentHistory: {\r\n\t\t\t\t\t\t...paymentState.paymentHistory,\r\n\t\t\t\t\t\tstatus: 'idle',\r\n\t\t\t\t\t\tpayments: data.payments,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[paymentState]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tisAuthenticated &&\r\n\t\t\tauthStatus === 'idle' &&\r\n\t\t\tpaymentState.paymentHistory.status === 'loading' &&\r\n\t\t\tuser?.subscription.cusId &&\r\n\t\t\tgetSuccessfulPayments(user.subscription.cusId);\r\n\t}, [\r\n\t\tisAuthenticated,\r\n\t\tauthStatus,\r\n\t\tpaymentState.paymentHistory.status,\r\n\t\tuser?.subscription.cusId,\r\n\t\tgetSuccessfulPayments,\r\n\t]);\r\n\r\n\tconst subscriptionInformation = [\r\n\t\t{\r\n\t\t\ttitle: 'Leadgeek member since',\r\n\t\t\tvalue: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{isAuthenticated &&\r\n\t\t\t\t\t\tuser?.dateCreated &&\r\n\t\t\t\t\t\tDateTime.fromISO(user.dateCreated).toFormat('LLL dd, yyyy')}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Current subscription active since',\r\n\t\t\tvalue: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{planState.plan.created &&\r\n\t\t\t\t\t\tformatTimestamp(+planState.plan.created, true)}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Current subscription',\r\n\t\t\tvalue: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{planState.plan.plan.amount &&\r\n\t\t\t\t\t\tplanCheckerByPrice(planState.plan.plan.amount)}{' '}\r\n\t\t\t\t\tplan\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: `Est. charge for\r\n           ${\r\n\t\t\t\t\t\t\t!planState.plan.cancelAtPeriod &&\r\n\t\t\t\t\t\t\tplanState.plan.currentPeriodEnd &&\r\n\t\t\t\t\t\t\tformatTimestamp(+planState.plan.currentPeriodEnd, false)\r\n\t\t\t\t\t\t}`,\r\n\t\t\tvalue: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{planState.plan.plan.amount && (\r\n\t\t\t\t\t\t<div className='font-bold'>${planState.plan.plan.amount / 100}</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Default payment method',\r\n\t\t\tvalue: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{user?.billing.brand && capitalize(user.billing.brand)}{' '}\r\n\t\t\t\t\t&#8226;&#8226;&#8226;&#8226; {user?.billing.last4}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Update subscription',\r\n\t\t\tvalue: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref='mailto:support@leadgeek.io'\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\trel='noopener noreferrer'\r\n\t\t\t\t\t\tclassName='link'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tContact support\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\tauthStatus === 'idle' &&\r\n\t\tuser && (\r\n\t\t\t<AuthLayout>\r\n\t\t\t\t<SettingsLayout\r\n\t\t\t\t\ttitle={'Plan & billing'}\r\n\t\t\t\t\tdescription={'Update your plan and view past invoices'}\r\n\t\t\t\t>\r\n\t\t\t\t\t<section className='my-6'>\r\n\t\t\t\t\t\t{user?.subscription.cusId ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{/* subscription information */}\r\n\t\t\t\t\t\t\t\t<section className='mt-4 pt-2 md:pt-4 lg:pt-6 pb-5 cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t\t<div className='pb-4 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t\t<header className='card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-300'>\r\n\t\t\t\t\t\t\t\t\t\t\t\tSubscription information\r\n\t\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t{planState.plan.status === 'loading' ? (\r\n\t\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Loading subscription information...'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : planState.plan.id ? (\r\n\t\t\t\t\t\t\t\t\t\t<dl className='grid grid-flow-row grid-cols-1 gap-y-3 gap-x-8 mt-4 text-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t{subscriptionInformation.map((subscriptionItem, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DescriptionList\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={subscriptionItem.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={subscriptionItem.value}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</dl>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<div className='mt-4'>There are no active plans</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t{/* billing history */}\r\n\t\t\t\t\t\t\t\t<section className='mt-4 pt-2 md:pt-4 lg:pt-6 pb-4 cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t\t<header className='pb-4 card-padding-x border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-300'>\r\n\t\t\t\t\t\t\t\t\t\t\tBilling history\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t{paymentState.paymentHistory.status === 'loading' ? (\r\n\t\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'Loading historical payments...'}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : paymentState.paymentHistory.payments.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t<div className={classes.tableWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t<table className={classes.table} id='payments'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<thead className={classes.tableHeadWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr className={classes.tableHead}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='pl-4 md:pl-6 lg:pl-8 pr-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tInvoice ID\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Plan</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Amount</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tPayment method\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='pl-2 pr-4 md:pr-6 lg:pr-8 text-right'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDate\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tbody className={classes.tableBody}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{paymentState.paymentHistory.payments.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(payment: any, i: number) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr key={i} className={classes.rowWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* invoice id */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='pl-4 md:pl-6 lg:pl-8 pr-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={payment.invoice.pdf}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='link rounded-sm ring-purple'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{truncate(payment.invoice.id, 31)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* plan */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{planCheckerByPrice(payment.amount)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* amount */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>$</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.amount / 100}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={classes.valueIndicator}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.currency.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* payment method */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{user?.billing.brand &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcapitalize(user.billing.brand)}{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#8226;&#8226;&#8226;&#8226;{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#8226;&#8226;&#8226;&#8226;{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t&#8226;&#8226;&#8226;&#8226;{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.paymentMethod.last4}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* date */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='pl-2 pr-4 md:pr-6 lg:pr-8 text-right'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTimestamp(payment.created, true)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<section className='mt-4'>\r\n\t\t\t\t\t\t\t\t\t\t\t<NullState\r\n\t\t\t\t\t\t\t\t\t\t\t\theader={'No subscription payments found'}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext={'No payments have been found for your account.'}\r\n\t\t\t\t\t\t\t\t\t\t\t\tpath={svgList.payment}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlink={''}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlinkText={''}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<section className='mt-4 card-padding-x'>\r\n\t\t\t\t\t\t\t\t<NullState\r\n\t\t\t\t\t\t\t\t\theader={'No subscription found'}\r\n\t\t\t\t\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\t\t\t\t\"There isn't a subscription associated with this account.\"\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tpath={svgList.affiliate}\r\n\t\t\t\t\t\t\t\t\tlink={''}\r\n\t\t\t\t\t\t\t\t\tlinkText={''}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</SettingsLayout>\r\n\t\t\t</AuthLayout>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nconst svgList = {\r\n\tpayment: (\r\n\t\t<g>\r\n\t\t\t<path d='M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z' />\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t</g>\r\n\t),\r\n\taffiliate: (\r\n\t\t<path d='M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z' />\r\n\t),\r\n};\r\n\r\nconst classes = {\r\n\ttableWrapper: 'w-full relative',\r\n\ttable: 'w-full table-auto',\r\n\ttableHeadWrapper: 'border-t border-b border-200',\r\n\ttableHead:\r\n\t\t'text-left font-semibold text-xs text-100 uppercase tracking-widest whitespace-no-wrap cs-bg',\r\n\ttableHeadCell: 'p-3',\r\n\ttableBody: 'text-sm text-200',\r\n\trowWrapper: 'relative px-1 border-b border-100 last:border-none',\r\n\tdefaultCellWrapper: 'p-3',\r\n\tdefaultSvg: 'svg-base',\r\n\tvalueIndicator: 'ml-1 text-gray-400 font-semibold',\r\n};\r\n\r\nexport default BillingPage;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\n// packages\r\nimport axios from 'axios';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\n\r\n// redux\r\nimport { useAppSelector } from '@hooks/hooks';\r\n\r\n// components\r\nimport AuthLayout from '@components/layout/AuthLayout';\r\nimport NullState from '@components/utils/NullState';\r\nimport SettingsLayout from '@components/layout/SettingsLayout';\r\nimport Spinner from '@components/utils/Spinner';\r\n\r\n// utils\r\nimport {\r\n\tcalcAffCommission,\r\n\tcalcNextPayoutDate,\r\n\tcalcNextPossiblePayoutDate,\r\n\tconfig,\r\n\tformatTimestamp,\r\n\tplanCheckerByPrice,\r\n\ttruncateAndObfuscate,\r\n} from '@utils/utils';\r\n\r\ninterface Payment {\r\n\tid: string;\r\n\tamount: number;\r\n\tcurrency: string;\r\n\tcreated: number;\r\n}\r\n\r\nconst AffiliatesPage = () => {\r\n\t// auth state\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst user = useAppSelector((state) => state.auth.user);\r\n\t// local state\r\n\tconst [affState, setAffState] = useState<{\r\n\t\tpaypalEmail: string;\r\n\t\tpaymentHistory: {\r\n\t\t\tstatus: string;\r\n\t\t\tpayments: Payment[];\r\n\t\t};\r\n\t}>({\r\n\t\tpaypalEmail: '',\r\n\t\tpaymentHistory: {\r\n\t\t\tstatus: 'loading',\r\n\t\t\tpayments: [],\r\n\t\t},\r\n\t});\r\n\tconst [changePaypal, setChangePaypal] = useState(false);\r\n\tconst [copiedText, setCopiedText] = useState(false);\r\n\tconst [copyText, setCopyText] = useState('Copy LGID');\r\n\tconst [isAff] = useState(\r\n\t\tisAuthenticated && user?.referrals.referrer.isReferrer\r\n\t);\r\n\tconst [lastPayout] = useState(calcNextPossiblePayoutDate(-1));\r\n\tconst [lgid] = useState(isAuthenticated && user?.referrals.referrer.lgid);\r\n\tconst [modal, setModal] = useState(false);\r\n\tconst [nextPayout] = useState(calcNextPossiblePayoutDate(1));\r\n\r\n\t// destructure necessary items\r\n\tconst {\r\n\t\tpaypalEmail,\r\n\t\tpaymentHistory: { status: paymentStatus, payments },\r\n\t} = affState;\r\n\r\n\tconst handleAffPayments = (\r\n\t\tclients: { userId: string; cusId: string }[] | undefined,\r\n\t\taffCreated: string | undefined\r\n\t) => {\r\n\t\tif (!clients || !affCreated) {\r\n\t\t\treturn setAffState({\r\n\t\t\t\t...affState,\r\n\t\t\t\tpaymentHistory: {\r\n\t\t\t\t\t...affState.paymentHistory,\r\n\t\t\t\t\tstatus: 'idle',\r\n\t\t\t\t\tpayments: [],\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn getAffPayments(clients, affCreated);\r\n\t\t}\r\n\t};\r\n\t// get affiliate payments if user is authenticated & affiliate\r\n\tuseEffect(() => {\r\n\t\tisAuthenticated &&\r\n\t\t\tstatus === 'idle' &&\r\n\t\t\tisAff &&\r\n\t\t\thandleAffPayments(\r\n\t\t\t\tuser?.referrals.referrer.clients,\r\n\t\t\t\tuser?.referrals.referrer.dateCreated\r\n\t\t\t);\r\n\t}, [\r\n\t\tisAuthenticated,\r\n\t\tstatus,\r\n\t\tisAff,\r\n\t\tuser?.referrals.referrer.clients,\r\n\t\tuser?.referrals.referrer.dateCreated,\r\n\t]);\r\n\r\n\t// hotkeys\r\n\t// close modal on escape key\r\n\tuseHotkeys(\r\n\t\t'Escape',\r\n\t\t() => {\r\n\t\t\tsetModal(false);\r\n\t\t},\r\n\t\t{ keyup: true }\r\n\t);\r\n\r\n\t// handle input change for PayPal email\r\n\tconst onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetAffState({ ...affState, [e.target.name]: e.target.value });\r\n\t};\r\n\r\n\tconst getAffPayments = async (\r\n\t\tclients: { userId: string; cusId: string }[],\r\n\t\taffCreated: string\r\n\t) => {\r\n\t\ttry {\r\n\t\t\tconst body = JSON.stringify({ clients, affCreated });\r\n\t\t\tconst {\r\n\t\t\t\tdata: { msg: message, affPayments },\r\n\t\t\t} = await axios.post('/api/users/affiliate-payments', body, config);\r\n\t\t\tif (message === 'Referred clients with valid payments were found.') {\r\n\t\t\t\tconsole.log(affPayments);\r\n\t\t\t\t// dispatch({\r\n\t\t\t\t// \ttype: SET_AFFILIATE_PAYMENTS,\r\n\t\t\t\t// \tpayload: affPayments,\r\n\t\t\t\t// });\r\n\t\t\t} else {\r\n\t\t\t\t// dispatch({\r\n\t\t\t\t// type: FINISHED_AFFILIATE_PAYMENTS_LOADING,\r\n\t\t\t\t// });\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\t// export const updatePaypalEmail =\r\n\t// (id, oldEmail, newEmail) => async (dispatch) => {\r\n\t// \ttry {\r\n\t// \t\tif (oldEmail === newEmail) {\r\n\t// \t\t\tdispatch(\r\n\t// \t\t\t\tsetAlert(\r\n\t// \t\t\t\t\t'Submission error',\r\n\t// \t\t\t\t\t'Your current and submitted PayPal emails are the same.',\r\n\t// \t\t\t\t\t'warning'\r\n\t// \t\t\t\t)\r\n\t// \t\t\t);\r\n\t// \t\t}\r\n\t// \t\tconst body = JSON.stringify({ id, newEmail });\r\n\t// \t\tconst {\r\n\t// \t\t\tdata: { status, msg },\r\n\t// \t\t} = await axios.put('/api/users/update-affiliate-paypal', body, config);\r\n\t// \t\tif (status === 'success') {\r\n\t// \t\t\tdispatch({\r\n\t// \t\t\t\ttype: SET_PAYPAL_EMAIL,\r\n\t// \t\t\t\tpayload: newEmail,\r\n\t// \t\t\t});\r\n\t// \t\t\tdispatch(setAlert('Update success', msg, 'success'));\r\n\t// \t\t} else {\r\n\t// \t\t\tdispatch(setAlert('Update failure', msg, 'danger'));\r\n\t// \t\t}\r\n\t// \t} catch (error) {\r\n\t// \t\tconsole.log(error);\r\n\t// \t}\r\n\t// };\r\n\r\n\t// submit for form\r\n\tconst onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\t// updatePaypalEmail(\r\n\t\t// \tuser?._id,\r\n\t\t// \tuser?.referrals.referrer.paypalEmail,\r\n\t\t// \taffState.paypalEmail\r\n\t\t// );\r\n\t\tsetChangePaypal(false);\r\n\t};\r\n\r\n\tconst calcCommissionTotal = (payments: any) => {\r\n\t\tconst total = payments.reduce((a: any, b: any) => {\r\n\t\t\treturn a + b['amount'];\r\n\t\t}, 0);\r\n\t\treturn calcAffCommission(total);\r\n\t};\r\n\r\n\tconst calcAffPayout = (payments: any) => {\r\n\t\tconst eligiblePayments = payments.filter(\r\n\t\t\t(payment: any) =>\r\n\t\t\t\tcalcNextPayoutDate(payment.created) >= lastPayout &&\r\n\t\t\t\tcalcNextPayoutDate(payment.created) <= nextPayout\r\n\t\t);\r\n\t\tconst affPayout = calcCommissionTotal(eligiblePayments);\r\n\r\n\t\treturn affPayout;\r\n\t};\r\n\r\n\tconst basicInformationItems = [\r\n\t\t{\r\n\t\t\ttitle: <span>Unique link</span>,\r\n\t\t\tvalue: (\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => setModal((prev) => !prev)}\r\n\t\t\t\t\tclassName='link rounded-main ring-gray transition-main'\r\n\t\t\t\t>\r\n\t\t\t\t\tGenerate affiliate link\r\n\t\t\t\t</button>\r\n\t\t\t),\r\n\t\t\tisInteractable: true,\r\n\t\t\tt: 'Generate & copy your unique link in the format \"https://leadgeek.io/?lgid=YOUR_LGID\"',\r\n\t\t\tsize: '',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: <span>PayPal email address</span>,\r\n\t\t\tvalue: changePaypal ? (\r\n\t\t\t\t<form onSubmit={(e) => onSubmit(e)} className='flex items-center'>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname='paypalEmail'\r\n\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\tplaceholder='Your new PayPal email'\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\tclassName='w-full py-1 px-2 rounded-l-md input ring-purple focus:ring-inset'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button className='py-1 px-2 rounded-r-md cs-purple border-t border-r border-b border-purple-500 dark:border-purple-300 transition-main ring-purple'>\r\n\t\t\t\t\t\tUpdate\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t) : (\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => setChangePaypal(true)}\r\n\t\t\t\t\tclassName={`font-semibold ${\r\n\t\t\t\t\t\tisAuthenticated &&\r\n\t\t\t\t\t\t(user?.referrals.referrer.paypalEmail || paypalEmail)\r\n\t\t\t\t\t\t\t? 'link'\r\n\t\t\t\t\t\t\t: 'text-red-400 hover:text-red-500'\r\n\t\t\t\t\t} hover:text-gray-700 ring-gray rounded-lg transition-main`}\r\n\t\t\t\t>\r\n\t\t\t\t\t{isAuthenticated &&\r\n\t\t\t\t\t(user?.referrals.referrer.paypalEmail || paypalEmail)\r\n\t\t\t\t\t\t? paypalEmail || user?.referrals.referrer.paypalEmail\r\n\t\t\t\t\t\t: 'Add PayPal email for payout'}\r\n\t\t\t\t</button>\r\n\t\t\t),\r\n\t\t\tisInteractable: true,\r\n\t\t\tt: 'This is the PayPal email where your commission payments will be sent',\r\n\t\t\tsize: '',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: (\r\n\t\t\t\t<span>\r\n\t\t\t\t\tEst. payout for{' '}\r\n\t\t\t\t\t<span className='font-bold'>{nextPayout.toFormat('LLLL dd')}</span>\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t\tvalue:\r\n\t\t\t\tstatus === 'idle' ? (\r\n\t\t\t\t\t<span className='font-bold'>${calcAffPayout(payments)}</span>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\tcenter={true}\r\n\t\t\t\t\t\tspinnerWidth={'sm'}\r\n\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\tisInteractable: false,\r\n\t\t\tt: 'On the 15th of each month for commissions > 60 days old',\r\n\t\t\tsize: '',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: <span>Total clients referred</span>,\r\n\t\t\tvalue: (\r\n\t\t\t\t<span className='font-bold'>\r\n\t\t\t\t\t{isAuthenticated &&\r\n\t\t\t\t\t\tuser?.referrals.referrer.clients &&\r\n\t\t\t\t\t\tuser.referrals.referrer.clients.length}\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t\tisInteractable: false,\r\n\t\t\tt: '',\r\n\t\t\tsize: '',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: <span>Total referral value</span>,\r\n\t\t\tvalue:\r\n\t\t\t\tstatus === 'idle' ? (\r\n\t\t\t\t\t<span className='font-bold'>${calcCommissionTotal(payments)}</span>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\tcenter={true}\r\n\t\t\t\t\t\tspinnerWidth={'sm'}\r\n\t\t\t\t\t\tmargin={false}\r\n\t\t\t\t\t\ttext={null}\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\tisInteractable: false,\r\n\t\t\tt: '',\r\n\t\t\tsize: '',\r\n\t\t},\r\n\t];\r\n\r\n\tconst codeItems = [\r\n\t\t{\r\n\t\t\ttitle: 'Text link',\r\n\t\t\tcode: (\r\n\t\t\t\t<code>\r\n\t\t\t\t\t&lt;<span className='code-html-tag'>a</span>{' '}\r\n\t\t\t\t\t<span className='code-html-attribute'>href</span>\r\n\t\t\t\t\t=\"https://leadgeek.io/?lgid={lgid ? lgid : 'YOUR_LGID'}\"{' '}\r\n\t\t\t\t\t<span className='code-html-attribute'>rel</span>\r\n\t\t\t\t\t=\"sponsored\"&gt;Join Leadgeek now&lt;/\r\n\t\t\t\t\t<span className='code-html-tag'>a</span>&gt;\r\n\t\t\t\t</code>\r\n\t\t\t),\r\n\t\t\tclipboard: `<a href=\"https://leadgeek.io/?lgid=${\r\n\t\t\t\tlgid ? lgid : 'YOUR_LGID'\r\n\t\t\t}\" rel=\"sponsored\">Join Leadgeek now</a>`,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Image link',\r\n\t\t\tcode: (\r\n\t\t\t\t<code>\r\n\t\t\t\t\t&lt;<span className='code-html-tag'>a</span>{' '}\r\n\t\t\t\t\t<span className='code-html-attribute'>href</span>\r\n\t\t\t\t\t=\"https://leadgeek.io/?lgid={lgid ? lgid : 'YOUR_LGID'}\"{' '}\r\n\t\t\t\t\t<span className='code-html-attribute'>rel</span>\r\n\t\t\t\t\t=\"sponsored\"&gt;\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t{'  '}&lt;\r\n\t\t\t\t\t<span className='code-html-tag'>img</span>{' '}\r\n\t\t\t\t\t<span className='code-html-attribute'>src</span>\r\n\t\t\t\t\t=\"https://www.YOUR_WEBSITE.com/YOUR_GRAPHIC.png\" /&gt;\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t&lt;/\r\n\t\t\t\t\t<span className='code-html-tag'>a</span>&gt;\r\n\t\t\t\t</code>\r\n\t\t\t),\r\n\t\t\tclipboard: `<a href=\"https://leadgeek.io/?lgid=${\r\n\t\t\t\tlgid ? lgid : 'YOUR_LGID'\r\n\t\t\t}\" rel=\"sponsored\"><img src=\"https://www.YOUR_WEBSITE.com/YOUR_GRAPHIC.png\"/></a>`,\r\n\t\t},\r\n\t];\r\n\r\n\treturn status === 'idle' && user ? (\r\n\t\t<AuthLayout>\r\n\t\t\t<SettingsLayout\r\n\t\t\t\ttitle={'Affiliates'}\r\n\t\t\t\tdescription={'Generate your unique link and review payouts'}\r\n\t\t\t>\r\n\t\t\t\t<section className='my-6'>\r\n\t\t\t\t\t{isAff ? (\r\n\t\t\t\t\t\t<div className='w-full'>\r\n\t\t\t\t\t\t\t<section className='mt-4 pt-2 md:pt-4 lg:pt-6 pb-4 cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t<div className='pb-4 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t<header className='flex items-end justify-between card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-300'>\r\n\t\t\t\t\t\t\t\t\t\t\tBasic information\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t{lgid && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='relative'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnavigator.clipboard.writeText(lgid || '');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCopyText('LGID copied');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCopiedText(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCopiedText(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCopyText('Copy LGID');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => setCopiedText(true)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={() => setCopiedText(false)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='py-1 px-2 bg-gray-100 dark:bg-gray-900 text-300 rounded-main text-xs font-semibold transition-main ring-gray'\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tLeadgeek ID: {lgid}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{copiedText && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='absolute top-0 right-0 flex items-center p-2 rounded-lg shadow-md bg-gray-900 text-white text-xs whitespace-nowrap transform -translate-y-10'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{copyText || 'Copy LGID'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<ul className='grid grid-flow-col grid-rows-5 grid-cols-1 gap-y-3 gap-x-8 mt-4 card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t{basicInformationItems.map((item, i) => (\r\n\t\t\t\t\t\t\t\t\t\t<BasicInformationItem\r\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={item.title}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={item.value}\r\n\t\t\t\t\t\t\t\t\t\t\tisInteractable={item.isInteractable}\r\n\t\t\t\t\t\t\t\t\t\t\tt={item.t}\r\n\t\t\t\t\t\t\t\t\t\t\tsize={item.size}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t<section className='mt-4 pt-2 md:pt-4 lg:pt-6 pb-4 cs-light-300 card-200'>\r\n\t\t\t\t\t\t\t\t<div className='pb-4 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t<header className='card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className='font-bold text-lg text-300'>\r\n\t\t\t\t\t\t\t\t\t\t\tCommission history\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{paymentStatus === 'loading' ? (\r\n\t\t\t\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\t\t\t\tdivWidth={null}\r\n\t\t\t\t\t\t\t\t\t\tcenter={false}\r\n\t\t\t\t\t\t\t\t\t\tspinnerWidth={null}\r\n\t\t\t\t\t\t\t\t\t\tmargin={true}\r\n\t\t\t\t\t\t\t\t\t\ttext={'Loading affiliate payments...'}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t) : payments.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t<div className={classes.tableWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t<table className={classes.table} id='payments'>\r\n\t\t\t\t\t\t\t\t\t\t\t<thead className={classes.tableHeadWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr className={classes.tableHead}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Transaction ID</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Plan</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th className={classes.tableHeadCell}>Amount</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='pl-2 text-right'>Date created</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th className='pl-2 text-right'>Est. payout date</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t\t\t<tbody className={classes.tableBody}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{payments.map((payment, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr key={i} className={classes.rowWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* transaction id */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{truncateAndObfuscate(payment.id, 22)}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* plan */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{planCheckerByPrice(payment.amount)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* amount */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={classes.defaultCellWrapper}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>$</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{calcAffCommission(payment.amount)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={classes.valueIndicator}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{payment.currency.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* date created */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='pl-2 text-right'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatTimestamp(payment.created, true)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* payout date */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className='pl-2 text-right'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{calcNextPayoutDate(payment.created).toFormat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'LLLL dd, yyyy'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<section className='mt-4 card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t<NullState\r\n\t\t\t\t\t\t\t\t\t\t\theader={'No affiliate payments found'}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={'No payments have been found for your account.'}\r\n\t\t\t\t\t\t\t\t\t\t\tpath={svgList.payment}\r\n\t\t\t\t\t\t\t\t\t\t\tlink={''}\r\n\t\t\t\t\t\t\t\t\t\t\tlinkText={''}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t{modal && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetModal((prev) => !prev);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName='absolute inset-0 z-10 h-full w-full bg-gray-900 opacity-25'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName={`absolute top-1/2 inset-x-0 z-20 max-h-screen max-w-4xl mx-auto pt-2 md:pt-4 lg:pt-6 pb-4 cs-light-200 card-200 transform -translate-y-1/2`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<div className='relative pb-1 border-b border-200'>\r\n\t\t\t\t\t\t\t\t\t\t\t<header className='card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 className='text-xl font-bold text-300'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tGenerated affiliate links\r\n\t\t\t\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setModal((prev) => !prev)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='absolute top-0 right-3 md:right-5 lg:right-7 ml-2 p-1 hover:bg-gray-100 rounded-md hover:text-gray-700 ring-gray transition-main'\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='svg-base'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td='M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className='card-padding-x'>\r\n\t\t\t\t\t\t\t\t\t\t\t{codeItems.map((codeItem, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CodeItem\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={codeItem.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcode={codeItem.code}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclipboard={codeItem.clipboard}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<section className='mt-4'>\r\n\t\t\t\t\t\t\t<NullState\r\n\t\t\t\t\t\t\t\theader={'Become a Leadgeek affiliate'}\r\n\t\t\t\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\t\t\t'Leadgeek offers 25% lifetime commissions for any new member you refer. Apply @ www.leadgeek.io/affiliates'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpath={svgList.affiliate}\r\n\t\t\t\t\t\t\t\tlink={''}\r\n\t\t\t\t\t\t\t\tlinkText={''}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</section>\r\n\t\t\t</SettingsLayout>\r\n\t\t</AuthLayout>\r\n\t) : (\r\n\t\t<div className='h-screen'>\r\n\t\t\t<Spinner\r\n\t\t\t\tdivWidth={null}\r\n\t\t\t\tcenter={true}\r\n\t\t\t\tspinnerWidth={null}\r\n\t\t\t\tmargin={false}\r\n\t\t\t\ttext={'Loading your Leadgeek profile...'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ninterface BasicInformationItemProps {\r\n\ttitle: JSX.Element;\r\n\tvalue: JSX.Element;\r\n\tisInteractable: boolean;\r\n\tt: string;\r\n\tsize: string;\r\n}\r\n\r\nconst BasicInformationItem: React.FC<BasicInformationItemProps> = ({\r\n\ttitle,\r\n\tvalue,\r\n\tisInteractable,\r\n\tt,\r\n\tsize,\r\n}) => {\r\n\t// local state\r\n\tconst [tooltip, setTooltip] = useState(false);\r\n\r\n\treturn (\r\n\t\t<li\r\n\t\t\tclassName={`flex justify-between text-200 ${\r\n\t\t\t\tsize ? `${size} items-start` : 'items-center'\r\n\t\t\t}`}\r\n\t\t>\r\n\t\t\t<header className='flex items-center'>\r\n\t\t\t\t<h3 className='align-bottom'>{title}</h3>\r\n\t\t\t\t{t && (\r\n\t\t\t\t\t<div className='relative z-0 flex items-end mt-1 ml-2'>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonMouseEnter={() => setTooltip(true)}\r\n\t\t\t\t\t\t\tonMouseLeave={() => setTooltip(false)}\r\n\t\t\t\t\t\t\tclassName='text-gray-400 rounded-full ring-gray cursor-pointer'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\t\t\t\t\t\tclassName='h-4 w-4'\r\n\t\t\t\t\t\t\t\tviewBox='0 0 20 20'\r\n\t\t\t\t\t\t\t\tfill='currentColor'\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\t\t\t\td='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z'\r\n\t\t\t\t\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{tooltip && (\r\n\t\t\t\t\t\t\t<div className='absolute left-0 flex items-center p-2 rounded-main shadow-md bg-gray-900 text-white text-xs whitespace-nowrap transform translate-x-6 translate-y-1'>\r\n\t\t\t\t\t\t\t\t{t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</header>\r\n\t\t\t{isInteractable ? value : <div>{value}</div>}\r\n\t\t</li>\r\n\t);\r\n};\r\n\r\ninterface CodeItemProps {\r\n\ttitle: string;\r\n\tcode: JSX.Element;\r\n\tclipboard: string;\r\n}\r\n\r\nconst CodeItem: React.FC<CodeItemProps> = ({ title, code, clipboard }) => {\r\n\tconst [hover, setHover] = useState(false);\r\n\tconst [copyText, setCopyText] = useState('Copy code');\r\n\r\n\treturn (\r\n\t\t<div className='mt-6'>\r\n\t\t\t<header className='relative pb-1 border-b border-200'>\r\n\t\t\t\t<h4 className='text-lg font-bold text-300'>{title}</h4>\r\n\t\t\t\t{hover && (\r\n\t\t\t\t\t<div className='absolute left-1/2 transform -translate-x-1/2 -translate-y-8 p-2 rounded-lg shadow-md bg-gray-900 text-white text-xs whitespace-nowrap'>\r\n\t\t\t\t\t\t{copyText}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</header>\r\n\t\t\t<button\r\n\t\t\t\tonMouseEnter={() => setHover(true)}\r\n\t\t\t\tonMouseLeave={() => copyText === 'Copy code' && setHover(false)}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tnavigator.clipboard.writeText(clipboard || '');\r\n\t\t\t\t\tsetCopyText('Code copied');\r\n\t\t\t\t\tsetHover(true);\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tsetCopyText('Copy code');\r\n\t\t\t\t\t\tsetHover(false);\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t}}\r\n\t\t\t\tclassName='w-full mt-2 rounded-main text-left ring-gray transition-main'\r\n\t\t\t>\r\n\t\t\t\t<pre className='p-4 bg-gray-900 dark:bg-darkGray-100 card-200 text-gray-300 whitespace-pre'>\r\n\t\t\t\t\t{code}\r\n\t\t\t\t</pre>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst svgList = {\r\n\tpayment: (\r\n\t\t<g>\r\n\t\t\t<path d='M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z' />\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\td='M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t/>\r\n\t\t</g>\r\n\t),\r\n\taffiliate: (\r\n\t\t<path d='M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z' />\r\n\t),\r\n};\r\n\r\nconst classes = {\r\n\ttableWrapper: 'w-full relative mt-4 card-padding-x',\r\n\ttable: 'w-full table-auto',\r\n\ttableHeadWrapper: 'border-b border-gray-200',\r\n\ttableHead:\r\n\t\t'text-left font-semibold text-xs text-gray-600 uppercase tracking-widest whitespace-no-wrap',\r\n\ttableHeadCell: 'p-2',\r\n\ttableBody: 'text-sm text-gray-800',\r\n\trowWrapper: 'relative px-1 border-b border-gray-200 hover:bg-gray-100',\r\n\r\n\tdefaultCellWrapper: 'p-2',\r\n\tdefaultSvg: 'svg-base',\r\n\tvalueIndicator: 'ml-1 text-gray-400 font-semibold',\r\n};\r\n\r\nexport default AffiliatesPage;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { useAppSelector } from '@hooks/hooks';\r\n\r\ninterface PrivateRouteProps {\r\n\tcomponent: React.FunctionComponent<any>;\r\n}\r\n\r\nconst PrivateRoute: React.FC<PrivateRouteProps> = ({\r\n\tcomponent: Component,\r\n\t...rest\r\n}) => {\r\n\tconst isAuthenticated = useAppSelector((state) => state.auth.isAuthenticated);\r\n\tconst status = useAppSelector((state) => state.auth.status);\r\n\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={(props) =>\r\n\t\t\t\t!isAuthenticated && status === 'idle' ? (\r\n\t\t\t\t\t<Redirect to='/login' />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Component {...props} />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import React, { Fragment } from 'react';\r\n\r\nimport { Route } from 'react-router-dom';\r\n\r\n// routes\r\nimport Login from '@pages/Login';\r\nimport ForgotPassword from '@pages/ForgotPassword';\r\nimport ResetPassword from '@pages/ResetPassword';\r\nimport Feed from '@pages/Feed';\r\nimport Liked from '@pages/Liked';\r\nimport Archived from '@pages/Archived';\r\nimport Search from '@pages/Search';\r\nimport Admin from '@pages/Admin';\r\nimport Account from '@pages/settings/Account';\r\nimport Billing from '@pages/settings/Billing';\r\nimport Affiliates from '@pages/settings/Affiliates';\r\n// utils\r\nimport PrivateRoute from './PrivateRoute';\r\n\r\nconst Routes = () => {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Route exact path='/login' component={Login} />\r\n\t\t\t<Route exact path='/reset/forgot-password' component={ForgotPassword} />\r\n\t\t\t<Route\r\n\t\t\t\texact\r\n\t\t\t\tpath='/reset/reset-password/:token'\r\n\t\t\t\tcomponent={ResetPassword}\r\n\t\t\t/>\r\n\t\t\t<PrivateRoute exact path='/' component={Feed} />\r\n\t\t\t<PrivateRoute exact path='/leads' component={Feed} />\r\n\t\t\t<PrivateRoute exact path='/leads/liked' component={Liked} />\r\n\t\t\t<PrivateRoute exact path='/leads/archived' component={Archived} />\r\n\t\t\t<PrivateRoute exact path='/search' component={Search} />\r\n\t\t\t<PrivateRoute exact path='/settings/account' component={Account} />\r\n\t\t\t<PrivateRoute exact path='/settings/billing' component={Billing} />\r\n\t\t\t<PrivateRoute exact path='/settings/affiliates' component={Affiliates} />\r\n\t\t\t<PrivateRoute exact path='/admin' component={Admin} />\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default Routes;\r\n","import React, { Fragment, useEffect } from 'react';\r\n\r\n// packages\r\nimport { BrowserRouter as Router, Switch } from 'react-router-dom';\r\nimport { Elements } from '@stripe/react-stripe-js';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n\r\n// redux\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\nimport {\r\n\tgetUserData,\r\n\tremoveUserData,\r\n} from '@components/features/auth/authSlice';\r\n\r\n// routes\r\nimport Routes from './routes/Routes';\r\n\r\n// utils\r\nimport setAuthToken from '@utils/authTokens';\r\nimport { useDarkMode } from '@hooks/hooks';\r\n\r\nconst App: React.FC = () => {\r\n\tuseEffect(() => {\r\n\t\t// check for token in LS\r\n\t\tif (localStorage.token) {\r\n\t\t\tsetAuthToken(localStorage.token);\r\n\t\t}\r\n\t\tstore.dispatch(getUserData());\r\n\t\t// log user out from all tabs if they log out in one tab\r\n\t\twindow.addEventListener('storage', () => {\r\n\t\t\tif (!localStorage.token) store.dispatch(removeUserData());\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst [colorTheme] = useDarkMode();\r\n\r\n\tconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_KEY!);\r\n\r\n\treturn (\r\n\t\t<Elements stripe={stripePromise}>\r\n\t\t\t<Provider store={store}>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Routes />\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t</Router>\r\n\t\t\t</Provider>\r\n\t\t</Elements>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport TagManager from 'react-gtm-module';\r\n\r\nimport App from './App';\r\n\r\nimport '@assets/index.css';\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n\tTagManager.initialize({ gtmId: 'GTM-M4FPRGJ' });\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}